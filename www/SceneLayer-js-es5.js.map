{"version":3,"sources":["webpack:///node_modules/@arcgis/core/layers/SceneLayer.js","webpack:///node_modules/@arcgis/core/layers/support/RangeInfo.js"],"names":["z","Z","getLogger","B","J","e","featureReduction","rangeInfos","operationalLayerType","type","fields","outFields","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","definitionExpression","path","labelsVisible","labelingInfo","legendEnabled","cachedDrawingInfo","color","editingEnabled","popupEnabled","popupTemplate","objectIdField","globalIdField","_fieldUsageInfo","screenSizePerspectiveEnabled","t","url","fieldsIndex","get","getField","domain","r","layerType","pointNodePages","fromJSON","_set","loaded","_validateElevationInfo","X","profile","associatedLayer","capabilities","query","editing","s","supportsGlobalId","o","supportsRollbackOnFailure","i","supportsUploadWithItemId","data","a","supportsZ","n","supportsM","p","isVersioned","operations","l","supportsEditing","d","supportsUpdate","y","supportsChangeTracking","supportsGeometryUpdate","supportsAdd","supportsDelete","attributeStorageInfo","createPopupTemplate","some","name","displayField","store","H","error","layer","signal","loadFromPortal","supportedTypes","then","_fetchService","_verifyRootNodeAndUpdateExtent","_setAssociatedFeatureLayer","_applyAssociatedLayerOverrides","_populateFieldUsageInfo","origin","renderer","addResolvingPromise","geometryType","returnGeometry","returnZ","where","sqlFormat","_getAssociatedLayerForQuery","queryExtent","createQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","_loadAssociatedLayerForQuery","load","statisticsInfo","parsedUrl","href","f","responseType","_debouncedSaveOperations","getTypeKeywords","_getTypeKeywords","portalItemLayerType","applyEdits","source","indexOf","isNaN","version","major","minor","serviceVersion","versionString","supportedVersions","isGeographic","normalReferenceFrame","spatialReference","push","_applyAssociatedLayerFieldsOverrides","_applyAssociatedLayerPopupOverrides","clone","editable","nullable","slice","length","_buddyIsMoreImportant","setDefaultOrigin","originOf","set","portalItem","fetch","_logWarningOnPopupEnabled","title","warn","info","originIdOf","elevationInfo","mode","featureExpressionInfo","expression","types","key","base","typeMap","selection","json","origins","write","prototype","read","readOnly","service","dependsOn","String","reader","value","Boolean","meshpyramids","points","lines","polygons","Y","arguments","field","currentRangeExtent","fullRangeExtent","Number"],"mappings":"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","file":"SceneLayer-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as t,isNone as r}from\"../core/maybe.js\";import s from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{getProperties as o}from\"../core/accessorSupport/utils.js\";import{property as i}from\"../core/accessorSupport/decorators/property.js\";import{reader as a}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import p from\"../core/Error.js\";import{join as l}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{all as d,resolve as y,isAbortError as u}from\"../core/promiseUtils.js\";import{fixRendererFields as c}from\"./support/fieldUtils.js\";import f from\"../PopupTemplate.js\";import h from\"../request.js\";import m from\"./Layer.js\";import{MultiOriginJSONMixin as g}from\"../core/MultiOriginJSONSupport.js\";import{whenValidOnce as v}from\"../core/watchUtils.js\";import{elevationInfo as b,labelsVisible as I,legendEnabled as j,opacityDrawingInfo as w,popupEnabled as L,screenSizePerspectiveEnabled as S}from\"./support/commonProperties.js\";import{OperationalLayer as F}from\"./mixins/OperationalLayer.js\";import\"../renderers/Renderer.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/UniqueValueRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/SimpleRenderer.js\";import{webSceneRendererTypes as O}from\"../renderers/support/types.js\";import\"../renderers/support/jsonUtils.js\";import _ from\"./support/FieldsIndex.js\";import{ArcGISService as T}from\"./mixins/ArcGISService.js\";import{PortalLayer as P}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as x}from\"./mixins/ScaleRangeLayer.js\";import E from\"./support/FeatureReduction.js\";import D from\"./support/LabelClass.js\";import U from\"./support/FeatureReductionSelection.js\";import{defineFieldProperties as A}from\"./support/fieldProperties.js\";import{reader as R}from\"./support/labelingInfo.js\";import{loadStyleRenderer as q}from\"../renderers/support/styleUtils.js\";import{createPopupTemplate as Q}from\"../support/popupUtils.js\";import k from\"../tasks/support/Query.js\";import{zeroCapabilities as N}from\"./support/capabilities.js\";import{I3SNodePageDefinition as C,I3SMaterialDefinition as G,I3STextureSetDefinition as V,I3SGeometryDefinition as M}from\"./support/I3SLayerDefinitions.js\";import{SceneService as K}from\"./mixins/SceneService.js\";import{FetchAssociatedFeatureLayer as $}from\"./support/FetchAssociatedFeatureLayer.js\";import W from\"./support/RangeInfo.js\";const z=[\"3DObject\",\"Point\"],Z=s.getLogger(\"esri.layers.SceneLayer\"),B=A();let J=class extends(K(T(F(P(x(g(m))))))){constructor(...e){super(...e),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType=\"ArcGISSceneServiceLayer\",this.type=\"scene\",this.fields=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.definitionExpression=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.cachedDrawingInfo={color:!1},this.editingEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){const t=this.getField(e);return t&&t.domain?t.domain:null}get fieldsIndex(){return new _(this.fields)}readNodePages(e,t,r){return\"Point\"===t.layerType&&(e=t.pointNodePages),null==e||\"object\"!=typeof e?null:C.fromJSON(e,r)}set elevationInfo(e){this._set(\"elevationInfo\",e),this.loaded&&this._validateElevationInfo()}get geometryType(){return X[this.profile]||\"mesh\"}set renderer(e){c(e,this.fields),this._set(\"renderer\",e)}readCachedDrawingInfo(e){return null!=e&&\"object\"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){const e=t(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:N,{query:r,editing:{supportsGlobalId:s,supportsRollbackOnFailure:o,supportsUploadWithItemId:i},data:{supportsZ:a,supportsM:n,isVersioned:p},operations:{supportsEditing:l,supportsUpdate:d}}=e,y=e.operations.supportsChangeTracking;return{query:r,editing:{supportsGlobalId:s,supportsRollbackOnFailure:o,supportsGeometryUpdate:!1,supportsUploadWithItemId:i},data:{supportsZ:a,supportsM:n,isVersioned:p},operations:{supportsEditing:l&&y,supportsAdd:!1,supportsDelete:!1,supportsUpdate:d&&y}}}get defaultPopupTemplate(){return t(this.associatedLayer)||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,t){return!e&&t.fields&&t.fields.some((t=>(\"esriFieldTypeOID\"===t.type&&(e=t.name),!!e))),e||void 0}readGlobalIdField(e,t){return!e&&t.fields&&t.fields.some((t=>(\"esriFieldTypeGlobalID\"===t.type&&(e=t.name),!!e))),e||void 0}get displayField(){return t(this.associatedLayer)?this.associatedLayer.displayField:null}readProfile(e,t){const r=t.store.profile;return null!=r&&H[r]?H[r]:(Z.error(\"Unknown or missing profile\",{profile:r,layer:this}),\"mesh-pyramids\")}load(e){const r=t(e)?e.signal:null,s=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).then((()=>this._fetchService(r)),(()=>this._fetchService(r))).then((()=>d([this._verifyRootNodeAndUpdateExtent(this.nodePages,r),this._setAssociatedFeatureLayer(r)]))).then((()=>this._validateElevationInfo())).then((()=>this._applyAssociatedLayerOverrides())).then((()=>this._populateFieldUsageInfo())).then((()=>q(this,{origin:\"service\"},r))).then((()=>c(this.renderer,this.fields)));return this.addResolvingPromise(s),y(this)}createQuery(){const e=new k;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(e&&e.features)for(const t of e.features)t.layer=this,t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryObjectIds(e||this.createQuery(),t)))}getFieldUsageInfo(e){const t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(Z.error(\"#getFieldUsageInfo()\",\"Unavailable until layer is loaded\"),t)}createPopupTemplate(e){return Q(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return t(e)&&e.loaded?y(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),r(this.associatedLayer))throw new p(\"scenelayer:query-not-available\",\"SceneLayer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new p(\"scenelayer:query-not-available\",\"SceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((t=>t.name===e))}async queryCachedStatistics(e,t){if(await this.load(t),!this.statisticsInfo)throw new p(\"scenelayer:no-cached-statistics\",\"Cached statistics are not available for this layer\");const r=this.fieldsIndex.get(e);if(!r)throw new p(\"scenelayer:field-unexisting\",`Field '${e}' does not exist on the layer`);for(const e of this.statisticsInfo)if(e.name===r.name){const r=l(this.parsedUrl.path,e.href);return h(r,{query:{f:\"json\"},responseType:\"json\",signal:t?t.signal:null}).then((e=>e.data))}throw new p(\"scenelayer:no-cached-statistics\",\"Cached statistics for this attribute are not available\")}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"scene\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"scene\"};return this._debouncedSaveOperations(0,e)}async applyEdits(e,t){const s=await import(\"./graphics/editingSupport.js\");if(await this.load(),r(this.associatedLayer))throw new p(`${this.type}-layer:not-editable`,\"Service is not editable\");return await this.associatedLayer.load(),s.applyEdits(this,this.associatedLayer.source,e,t)}on(e,t){return super.on(e,t)}validateLayer(e){if(e.layerType&&-1===z.indexOf(e.layerType))throw new p(\"scenelayer:layer-type-not-supported\",\"SceneLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new p(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"});if(this.version.major>1)throw new p(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"});!function(e,t){let r=!1,s=!1;if(null==e)r=!0,s=!0;else{const o=t&&t.isGeographic;switch(e){case\"east-north-up\":case\"earth-centered\":r=!0,s=o;break;case\"vertex-reference-frame\":r=!0,s=!o;break;default:r=!1}}if(!r)throw new p(\"scenelayer:unsupported-normal-reference-frame\",\"Normal reference frame is invalid.\");if(!s)throw new p(\"scenelayer:incompatible-normal-reference-frame\",\"Normal reference frame is incompatible with layer spatial reference.\")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if(\"points\"===this.profile)e.push(\"Point\");else{if(\"mesh-pyramids\"!==this.profile)throw new p(\"scenelayer:unknown-profile\",\"SceneLayer:save() encountered an unknown SceneLayer profile: \"+this.profile);e.push(\"3DObject\")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const e of this.fields){const r=!(!this.attributeStorageInfo||!this.attributeStorageInfo.some((t=>t.name===e.name))),s=!!(t(this.associatedLayer)&&this.associatedLayer.fields&&this.associatedLayer.fields.some((t=>t&&e.name===t.name))),o={supportsLabelingInfo:r,supportsRenderer:r,supportsPopupTemplate:r||s,supportsLayerQuery:s};this._fieldUsageInfo[e.name]=o}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides()}_applyAssociatedLayerFieldsOverrides(){if(r(this.associatedLayer)||!this.associatedLayer.fields)return;let e=null;for(const t of this.associatedLayer.fields){const r=this.getField(t.name);r?(!r.domain&&t.domain&&(r.domain=t.domain.clone()),r.editable=t.editable,r.nullable=t.nullable):(e||(e=this.fields?this.fields.slice():[]),e.push(t.clone()))}e&&this._set(\"fields\",e)}_applyAssociatedLayerPopupOverrides(){if(r(this.associatedLayer))return;const e=[\"popupTemplate\",\"popupEnabled\"],t=o(this);for(let r=0;r<e.length;r++){const s=e[r];this._buddyIsMoreImportant(s)&&(t.setDefaultOrigin(this.associatedLayer.originOf(s)),t.set(s,this.associatedLayer[s]),t.setDefaultOrigin(\"user\"))}}async _setAssociatedFeatureLayer(e){if(-1===[\"mesh-pyramids\",\"points\"].indexOf(this.profile))return;const t=new $(this.parsedUrl,this.portalItem,e);try{this.associatedLayer=await t.fetch()}catch(e){u(e)||this._logWarningOnPopupEnabled()}}_logWarningOnPopupEnabled(){v(this,[\"popupTemplate\",\"popupEnabled\"],(()=>this.popupEnabled&&null!=this.popupTemplate)).then((()=>()=>{const e=`this SceneLayer: ${this.title}`;null==this.attributeStorageInfo?Z.warn(`Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ${e}`):Z.info(`Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ${e}`)}))}_buddyIsMoreImportant(e){if(r(this.associatedLayer))return!1;const t=this.originIdOf(e),s=this.associatedLayer.originIdOf(e);return null!=s&&s<=2?null==t||t<2:null!=s&&s<=3&&(null==t||t<3)}_validateElevationInfo(){const e=this.elevationInfo;e&&(\"mesh-pyramids\"===this.profile&&\"absolute-height\"!==e.mode&&Z.warn(\".elevationInfo=\",\"Mesh scene layers only support absolute-height elevation mode\"),e.featureExpressionInfo&&\"0\"!==e.featureExpressionInfo.expression&&Z.warn(\".elevationInfo=\",\"Scene layers do not support featureExpressionInfo\"))}};e([i({types:{key:\"type\",base:E,typeMap:{selection:U}},json:{origins:{\"web-scene\":{name:\"layerDefinition.featureReduction\",write:!0},\"portal-item\":{name:\"layerDefinition.featureReduction\",write:!0}}}})],J.prototype,\"featureReduction\",void 0),e([i({type:[W],json:{read:!1,origins:{\"web-scene\":{name:\"layerDefinition.rangeInfos\",write:!0},\"portal-item\":{name:\"layerDefinition.rangeInfos\",write:!0}}}})],J.prototype,\"rangeInfos\",void 0),e([i({json:{read:!1}})],J.prototype,\"associatedLayer\",void 0),e([i({type:[\"show\",\"hide\"]})],J.prototype,\"listMode\",void 0),e([i({type:[\"ArcGISSceneServiceLayer\"]})],J.prototype,\"operationalLayerType\",void 0),e([i({json:{read:!1},readOnly:!0})],J.prototype,\"type\",void 0),e([i({...B.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],J.prototype,\"fields\",void 0),e([i({readOnly:!0,dependsOn:[\"fields\"]})],J.prototype,\"fieldsIndex\",null),e([i(B.outFields)],J.prototype,\"outFields\",void 0),e([i({type:C,readOnly:!0,json:{read:!1}})],J.prototype,\"nodePages\",void 0),e([a(\"service\",\"nodePages\",[\"nodePages\",\"pointNodePages\"])],J.prototype,\"readNodePages\",null),e([i({type:[G],readOnly:!0})],J.prototype,\"materialDefinitions\",void 0),e([i({type:[V],readOnly:!0})],J.prototype,\"textureSetDefinitions\",void 0),e([i({type:[M],readOnly:!0})],J.prototype,\"geometryDefinitions\",void 0),e([i({readOnly:!0})],J.prototype,\"serviceUpdateTimeStamp\",void 0),e([i({readOnly:!0})],J.prototype,\"attributeStorageInfo\",void 0),e([i({readOnly:!0})],J.prototype,\"statisticsInfo\",void 0),e([i({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:!0}})],J.prototype,\"definitionExpression\",void 0),e([i({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],J.prototype,\"path\",void 0),e([i(b)],J.prototype,\"elevationInfo\",null),e([i({type:String,dependsOn:[\"profile\"]})],J.prototype,\"geometryType\",null),e([i(I)],J.prototype,\"labelsVisible\",void 0),e([i({type:[D],json:{origins:{service:{name:\"drawingInfo.labelingInfo\",read:{reader:R},write:!1}},name:\"layerDefinition.drawingInfo.labelingInfo\",read:{reader:R},write:!0}})],J.prototype,\"labelingInfo\",void 0),e([i(j)],J.prototype,\"legendEnabled\",void 0),e([i(w)],J.prototype,\"opacity\",void 0),e([i({types:O,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],J.prototype,\"renderer\",null),e([i({json:{read:!1}})],J.prototype,\"cachedDrawingInfo\",void 0),e([a(\"service\",\"cachedDrawingInfo\")],J.prototype,\"readCachedDrawingInfo\",null),e([i({readOnly:!0,json:{read:!1},dependsOn:[\"associatedLayer.capabilities\"]})],J.prototype,\"capabilities\",null),e([i({type:Boolean,json:{read:!1}})],J.prototype,\"editingEnabled\",void 0),e([i(L)],J.prototype,\"popupEnabled\",void 0),e([i({type:f,json:{name:\"popupInfo\",write:!0}})],J.prototype,\"popupTemplate\",void 0),e([i({readOnly:!0,json:{read:!1},dependsOn:[\"fields\",\"title\",\"attributeStorageInfo\",\"associatedLayer\"]})],J.prototype,\"defaultPopupTemplate\",null),e([i({type:String,json:{read:!1}})],J.prototype,\"objectIdField\",void 0),e([a(\"service\",\"objectIdField\",[\"objectIdField\",\"fields\"])],J.prototype,\"readObjectIdField\",null),e([i({type:String,json:{read:!1}})],J.prototype,\"globalIdField\",void 0),e([a(\"service\",\"globalIdField\",[\"globalIdField\",\"fields\"])],J.prototype,\"readGlobalIdField\",null),e([i({readOnly:!0,type:String,json:{read:!1},dependsOn:[\"associatedLayer.displayField\"]})],J.prototype,\"displayField\",null),e([i({type:String,json:{read:!1}})],J.prototype,\"profile\",void 0),e([a(\"service\",\"profile\",[\"store.profile\"])],J.prototype,\"readProfile\",null),e([i({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],J.prototype,\"normalReferenceFrame\",void 0),e([i(S)],J.prototype,\"screenSizePerspectiveEnabled\",void 0),J=e([n(\"esri.layers.SceneLayer\")],J);const H={\"mesh-pyramids\":\"mesh-pyramids\",meshpyramids:\"mesh-pyramids\",\"features-meshes\":\"mesh-pyramids\",points:\"points\",\"features-points\":\"points\",lines:\"lines\",\"features-lines\":\"lines\",polygons:\"polygons\",\"features-polygons\":\"polygons\"},X={\"mesh-pyramids\":\"mesh\",points:\"point\",lines:\"polyline\",polygons:\"polygon\"};var Y=J;export default Y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";let s=class extends o{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type=\"rangeInfo\"}};r([e({type:String,json:{read:!0,write:!0}})],s.prototype,\"name\",void 0),r([e({type:String,json:{read:!0,write:!0}})],s.prototype,\"field\",void 0),r([e({type:[Number],json:{read:!0,write:!0}})],s.prototype,\"currentRangeExtent\",void 0),r([e({type:[Number],json:{read:!0,write:!0}})],s.prototype,\"fullRangeExtent\",void 0),r([e({type:[\"rangeInfo\"],readOnly:!0,json:{read:!1,write:!0}})],s.prototype,\"type\",void 0),s=r([t(\"esri.layers.support.RangeInfo\")],s);var p=s;export default p;export{s as RangeInfo};\n"]}