{"version":3,"sources":["webpack:///node_modules/@arcgis/core/layers/support/arcgisLayers.js"],"names":["s","t","r","url","serverType","o","sublayer","c","FeatureServer","StreamServer","VectorTileServer","y","e","i","tileInfo","then","format","toUpperCase","cacheType","toLowerCase","path","Point","IntegratedMesh","PointCloud","Building","Array","isArray","layers","length","a","layerType","d","FeatureLayer","SceneLayer","f","I","parsedUrl","Constructor","layerOrTableId","sublayerIds","tableIds","b","n","filter","u","l","serviceJSON","currentVersion","layersJSON","tables","layerIds","map","id","reverse","layerInfos","tableInfos","sublayerInfos","p","sourceJSON","v","properties","layerId","title","sublayerTitleMode","forEach","add","find","type","responseType","query","data"],"mappings":"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","file":"support-arcgisLayers-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../core/maybe.js\";import a from\"../../core/Error.js\";import t from\"../../request.js\";import{parse as l}from\"./arcgisLayerUrl.js\";import{layerLookupMap as n}from\"./lazyLayerLoader.js\";async function s(t){const s=await async function(r){const t=l(r);if(e(t))throw new a(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:r});const{serverType:s,sublayer:o}=t;let y;const c={FeatureServer:\"FeatureLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\"};switch(s){case\"MapServer\":y=null!=o?\"FeatureLayer\":async function(e){return(await i(e)).tileInfo}(r).then((e=>e?\"TileLayer\":\"MapImageLayer\"));break;case\"ImageServer\":y=i(r).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||\"LERC\"!==r.toUpperCase()||e.cacheType&&\"elevation\"!==e.cacheType.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\"}));break;case\"SceneServer\":y=i(t.url.path).then((e=>{const r={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return\"SceneLayer\"}));break;default:y=c[s]}const d={FeatureLayer:!0,SceneLayer:!0},f=\"FeatureServer\"===s,I={parsedUrl:t,Constructor:null,layerOrTableId:f?o:null,sublayerIds:null,tableIds:null},b=await y;if(d[b]&&null==o){const e=await async function(e,r){var a,t;let l,n=!1;if(\"FeatureServer\"===r){const r=await async function(e){var r,a;let t=await i(e);t=t||{},t.layers=(null==(r=t.layers)?void 0:r.filter(u))||[];const l={serviceJSON:t};if(t.currentVersion<10.5)return l;const n=await i(e+\"/layers\");return l.layersJSON={layers:(null==n||null==(a=n.layers)?void 0:a.filter(u))||[],tables:(null==n?void 0:n.tables)||[]},l}(e);n=!!r.layersJSON,l=r.layersJSON||r.serviceJSON}else l=await i(e);const s=null==(a=l)?void 0:a.layers,o=null==(t=l)?void 0:t.tables;return{layerIds:(null==s?void 0:s.map((e=>e.id)).reverse())||[],tableIds:(null==o?void 0:o.map((e=>e.id)).reverse())||[],layerInfos:n?s:[],tableInfos:n?o:[]}}(r,s);f&&(I.sublayerInfos=e.layerInfos,I.tableInfos=e.tableInfos);if(1!==e.layerIds.length+e.tableIds.length)I.sublayerIds=e.layerIds,I.tableIds=e.tableIds;else if(f){var p,v;I.layerOrTableId=null!=(p=e.layerIds[0])?p:e.tableIds[0],I.sourceJSON=null!=(v=e.layerInfos[0])?v:e.tableInfos[0]}}return I.Constructor=await async function(e){return(0,n[e])()}(b),I}(t.url),y={...t.properties,url:t.url};if(!s.sublayerIds)return null!=s.layerOrTableId&&(y.layerId=s.layerOrTableId,y.sourceJSON=s.sourceJSON),new s.Constructor(y);const c=new(0,(await import(\"../GroupLayer.js\")).default)({title:s.parsedUrl.title});return function(e,a,t){function l(e,l){const n={...t,layerId:e,sublayerTitleMode:\"service-name\"};return r(l)&&(n.sourceJSON=l),new a.Constructor(n)}a.sublayerIds.forEach((r=>{const t=l(r,o(a.sublayerInfos,r));e.add(t)})),a.tableIds.forEach((r=>{const t=l(r,o(a.tableInfos,r));e.tables.add(t)}))}(c,s,y),c}function o(e,r){return e?e.find((e=>e.id===r)):null}function u(e){return!e.type||\"Feature Layer\"===e.type}async function i(e){return(await t(e,{responseType:\"json\",query:{f:\"json\"}})).data}export{s as fromUrl};\n"]}