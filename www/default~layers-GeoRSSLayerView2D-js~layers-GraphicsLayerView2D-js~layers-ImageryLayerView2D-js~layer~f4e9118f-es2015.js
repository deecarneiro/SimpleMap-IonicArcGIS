(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["default~layers-GeoRSSLayerView2D-js~layers-GraphicsLayerView2D-js~layers-ImageryLayerView2D-js~layer~f4e9118f"],{

/***/ "2AbE":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js ***!
  \**************************************************************************************/
/*! exports provided: default, DISPLAY_ID_TYPE_AGGREGATE, DISPLAY_ID_TYPE_FEATURE, isAggregateId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISPLAY_ID_TYPE_AGGREGATE", function() { return F; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISPLAY_ID_TYPE_FEATURE", function() { return E; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAggregateId", function() { return C; });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/has.js */ "wSAH");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "srIe");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "6S2I");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/Error.js */ "zlDU");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "9MzC");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/mathUtils.js */ "OKTS");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/diffUtils.js */ "DxxZ");
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../layers/support/FieldsIndex.js */ "gLc9");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../engine/webgl/definitions.js */ "jIHu");
/* harmony import */ var _engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../engine/webgl/Utils.js */ "yN2G");
/* harmony import */ var _engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../engine/webgl/util/debug.js */ "l8tk");
/* harmony import */ var _tileRenderers_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../tileRenderers/support/visualVariablesUtils.js */ "gzK8");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
const k=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.views.layers.2d.features.support.AttributeStore"),D=Object(_engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_10__["createDebugLogger"])(_engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_10__["DEBUG_ATTR_UPDATES"],k),E=0,F=1,U=t=>(2147483648&t)>>>31,R=t=>2147483647&t;function C(t){return 1===U(t)}const M={sharedArrayBuffer:Object(_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-shared-array-buffer"),atomics:Object(_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-atomics")};function B(t,e){return i=>e(t(i))}class v{constructor(t,e,i,s){this.size=0,this.texelSize=4;const{pixelType:r,layout:a,textureOnly:o}=s;this.textureOnly=o||!1,this.pixelType=r,this._ctype=e,this.layout=a,this._resetRange(),this._shared=t,this.size=i,o||(this.data=this._initData(r,i,t,e))}get buffer(){return Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["andThen"])(this.data,(t=>t.buffer))}unsetComponentAllTexels(t,e){const i=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data);for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(t,e){const i=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data);for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(t,e,i){const s=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data);for(const r of i)s[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(t,e,i){Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data)[i*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}unsetComponentTexel(t,e,i){Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data)[i*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}getData(t,e){const i=R(t);return Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data)[i*this.texelSize+e]}setData(t,e,i){const s=R(t),r=1<<e;0!=(this.layout&r)?(this.data[s*this.texelSize+e]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)):k.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")}lock(){5121===this.pixelType&&this._shared&&M.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,1)}unlock(){5121===this.pixelType&&this._shared&&M.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,0)}expand(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t,this._shared,this._ctype),i=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data);e.set(i),this.data=e}}toMessage(){const t=this.dirtyStart,e=this.dirtyEnd,i=this.texelSize;if(t>e)return null;this._resetRange();const s=!(this._shared||"local"===this._ctype),r=this.pixelType,a=this.layout,n=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["unwrap"])(this.data);if(!n.slice){if(!s)return{start:t,end:e,data:null,pixelType:r,layout:a};return{start:t,end:e,data:new(Object(_engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_9__["getPixelArrayCtor"])(this.pixelType))(Array.prototype.slice.call(this.data,t*i,(e+1)*i)),pixelType:r,layout:a}}return{start:t,end:e,data:s&&n.slice(t*i,(e+1)*i)||null,pixelType:r,layout:a}}_initData(t,e,i,s){const r=i&&"local"!==s?SharedArrayBuffer:ArrayBuffer,a=Object(_engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_9__["getPixelArrayCtor"])(t),o=new a(new r(e*e*4*a.BYTES_PER_ELEMENT));for(let t=0;t<o.length;t+=4)o[t+1]=255;return o}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}/* harmony default export */ __webpack_exports__["default"] = (class{constructor(t,e){this._client=t,this.config=e,this._attributeComputeMap=new Map,this._blocks=new Array,this._filters=new Array(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__["MAX_FILTERS"]),this._targetType=0,this._abortController=Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["createAbortController"])(),this._hasScaleExpr=!1,this._size=32,this._idsToHighlight=new Set;const i=e.supportsTextureFloat?5126:5121;D(`Creating AttributeStore ${M.sharedArrayBuffer?"with":"without"} shared memory`),this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:i,layout:15},{pixelType:i,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}destroy(){this._abortController.abort()}get hasScaleExpr(){return this._hasScaleExpr}get _signal(){return this._abortController.signal}update(i,s){this.config=s;const r=s.schema.processors[0].storage,a=Object(_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_6__["diff"])(this._schema,r);if((i.targets.feature||i.targets.aggregate)&&(i.storage.data=!0),a&&(Object(_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",a),i.storage.data=!0,this._schema=r,this._attributeComputeMap.clear(),!Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isNone"])(r))){switch(r.target){case"feature":this._targetType=0;break;case"aggregate":this._targetType=1}for(const t of r.mapping)this._bindAttribute(t)}}onTileData(t,i){if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isNone"])(i.addOrUpdate))return;const s=i.addOrUpdate.getCursor();for(;s.next();){const t=s.getDisplayId();this.setAttributeData(t,s)}}invalidateResources(){this._createResourcesPromise=null,this._abortController.abort(),this._abortController=Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["createAbortController"])()}async setHighlight(t,e){const i=this._getBlock(0),s=e.map((t=>R(t)));i.lock(),i.unsetComponentAllTexels(0,1),i.setComponent(0,1,s),i.unlock(),this._idsToHighlight.clear();for(const e of t)this._idsToHighlight.add(e);await this.sendUpdates()}async updateFilters(e,i){const{config:s,service:r,spatialReference:a}=i,{filters:o}=s,n=o.map(((t,e)=>this._updateFilter(t,e,r,a)));(await Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["all"])(n)).some((t=>t))&&(e.storage.filters=!0,Object(_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))}setData(t,e,i,s){const r=R(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,i,s)}getData(t,e,i){return this._getBlock(e).getData(t,i)}getHighlightFlag(t){return this._idsToHighlight.has(t)?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__["HIGHLIGHT_FLAG"]:0}unsetAttributeData(t){const e=R(t);this._getBlock(0).setData(e,0,0)}setAttributeData(t,e){const i=R(t);if(this._ensureSizeForTexel(i),this._getBlock(0).setData(i,0,this.getFilterFlags(e)),this._targetType!==U(t))return;const s=this._attributeComputeMap,r=this.config.supportsTextureFloat?1:2;s.size&&s.forEach(((t,s)=>{const a=s*r%4,o=Math.floor(s*r/4),n=this._getBlock(o+_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__["ATTRIBUTE_DATA_VV"]),l=t(e);if(this.config.supportsTextureFloat)n.setData(i,a,l);else if(l===_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__["NAN_MAGIC_NUMBER"])n.setData(i,a,255),n.setData(i,a+1,255);else{const t=Object(_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__["clamp"])(Math.round(l),-32767,32766)+32768,e=255&t,s=(65280&t)>>8;n.setData(i,a,e),n.setData(i,a+1,s)}}))}sendUpdates(){if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["createResolver"])(),this._nextUpdate.promise;const t={blocks:this._blocks.map((t=>Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(t)?t.toMessage():null))};return this._currUpdate=this._createResources().then((()=>{const e=()=>{if(this._currUpdate=null,this._nextUpdate){const t=this._nextUpdate;this._nextUpdate=null,this.sendUpdates().then((()=>t.resolve()))}},i=this._client.update(t,this._signal).then(e).catch(e);return this._client.render(this._signal),i})).catch((t=>Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["isAbortError"])(t)?(this._createResourcesPromise=null,this._createResources()):(k.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("mapview-attribute-store","Encountered an error during client update",t)),Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["resolve"])()))),this._currUpdate}_ensureSizeForTexel(t){for(;t>=this._size*this._size;)if(this._expand())return}_bindAttribute(t){let e;if(null!=t.fieldIndex)t.normalizationField&&k.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported."),e=e=>e.getComputedNumericAtIndex(t.fieldIndex);else{if(!t.field)return;e=t.normalizationField?e=>{const i=e.readAttribute(t.normalizationField);return i?e.readAttribute(t.field)/i:null}:e=>e.readAttribute(t.field)}if(t.valueRepresentation){e=B(e,(e=>Object(_tileRenderers_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_11__["getVisualVariableSizeValueRepresentationRatio"])(e,t.valueRepresentation)))}this._attributeComputeMap.set(t.binding,B(e,(t=>null===t||isNaN(t)||t===1/0?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__["NAN_MAGIC_NUMBER"]:t)))}_createResources(){if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__["ATTRIBUTE_DATA_ANIMATION"]),D("Initializing AttributeStore");const t={shared:M.sharedArrayBuffer&&!("local"===this._client.type),size:this._size,blocks:Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["mapMany"])(this._blocks,(t=>({textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType})))},r=this._client.initialize(t,this._signal).catch((t=>{Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__["isAbortError"])(t)?this._createResourcesPromise=null:k.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("mapview-attribute-store","Encountered an error during client initialization",t))}));return this._createResourcesPromise=r,r.then((()=>Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isNone"])(this._createResourcesPromise)?this._createResources():void 0)),r}_getBlock(t){const e=this._blocks[t];if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(e))return e;D(`Initializing AttributeBlock at index ${t}`);const s=M.sharedArrayBuffer,r=this._client.type,a=new v(s,r,this._size,this._blockDescriptors[t]);return this._blocks[t]=a,this._createResourcesPromise=null,a}_expand(){if(this._size<this.config.maxTextureSize){const t=this._size<<=1;return D("Expanding block size to",t,this._blocks),Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["forEachSome"])(this._blocks,(e=>e.expand(t))),this._createResourcesPromise=null,this._size=t,0}return k.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("mapview-limitations","Maximum number of onscreen features exceeded.")),-1}async _updateFilter(t,s,r,a){const o=this._filters[s],n=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(o)&&o.hash;if(!o&&!t)return!1;if(n===JSON.stringify(t))return!1;if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isNone"])(t)){const t=1<<s+1,e=this._getBlock(0);return this._filters[s]=null,e.setComponentAllTexels(0,t),this.sendUpdates(),!0}const l=await this._getFilter(s,r);return await l.update(t,a),!0}async _getFilter(t,e){const s=this._filters[t];if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(s))return s;const{default:r}=await Promise.all(/*! import() | layers-graphics-data-FeatureFilter-js */[__webpack_require__.e("default~layers-graphics-data-FeatureFilter-js~layers-graphics-sources-geojson-GeoJSONSourceWorker-js~1a1c8721"), __webpack_require__.e("common"), __webpack_require__.e("layers-graphics-data-FeatureFilter-js")]).then(__webpack_require__.bind(null, /*! ../../../../../layers/graphics/data/FeatureFilter.js */ "64Oa")),a=new r({geometryType:e.geometryType,hasM:!1,hasZ:!1,timeInfo:e.timeInfo,fieldsIndex:new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_7__["default"](e.fields)});return this._filters[t]=a,a}isVisible(t){return!!(2&this._getBlock(0).getData(t,0))}getFilterFlags(t){let i=0;const s=(r=t.getDisplayId(),1===U(r)?254:255);var r;for(let r=0;r<this._filters.length;r++){const a=!!(s&1<<r),o=this._filters[r];i|=(!a||Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isNone"])(o)||o.check(t)?1:0)<<r}let a=0;if(this._idsToHighlight.size){const e=t.getObjectId();a=this.getHighlightFlag(e)}return i<<1|a}});


/***/ }),

/***/ "7g5W":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/Tile.js ***!
  \****************************************************************************/
/*! exports provided: default, Tile, isChildOf, isParentOf */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tile", function() { return l; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isChildOf", function() { return r; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isParentOf", function() { return n; });
/* harmony import */ var _core_ArrayPool_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/ArrayPool.js */ "VW+2");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../geometry/Extent.js */ "OvF4");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../geometry/support/aaBoundingRect.js */ "kYAx");
/* harmony import */ var _tasks_support_QuantizationParameters_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../tasks/support/QuantizationParameters.js */ "AtWh");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../tiling/TileKey.js */ "rlSK");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
function n(e,t){const i=e.bounds,s=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&i[0]<=s[0]&&i[1]<=s[1]&&i[2]>=s[2]&&i[3]>=s[3]}function r(e,t){return n(t,e)}class l{constructor(e,t){this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_4__["default"](0,0,0,0),this.bounds=Object(_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__["create"])(),this.objectIds=new Set,this.key.set(t);const s=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level,this.needsClear=!0}get id(){return this.key.id}get extent(){return _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}get bbox(){const e=this.bounds;return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}clone(){return new l(this.tileInfoView,this.key)}createChildTiles(){const t=this.key.getChildKeys(),i=_core_ArrayPool_js__WEBPACK_IMPORTED_MODULE_0__["default"].acquire();for(let e=0;e<t.length;e++)i[e]=new l(this.tileInfoView,t[e]);return i}getQuantizationParameters(){return _tasks_support_QuantizationParameters_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}/* harmony default export */ __webpack_exports__["default"] = (l);


/***/ }),

/***/ "8NDJ":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js ***!
  \****************************************************************************************/
/*! exports provided: FeatureSetReader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureSetReader", function() { return n; });
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../geometry/support/jsonUtils.js */ "qatw");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../geometry.js */ "4GrV");
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../layers/graphics/OptimizedGeometry.js */ "gVKr");
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../layers/graphics/featureConversionUtils.js */ "ZlUD");
/* harmony import */ var _layers_graphics_centroid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../layers/graphics/centroid.js */ "2X7Z");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
let s=0;class n{constructor(t){this.type="FeatureSetReader",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._xmin=-1,this._xmax=0,this._ymin=0,this._ymax=0,this._joined=[],this.instance=t}static createInstance(){return s++,s=s>65535?0:s,s}get _hasFilter(){return-1!==this._xmin}getQuantizationTransform(){throw new Error("Unable to find transform for featureSet")}getStorage(){return this._storage}getComputedNumeric(t){return this.getComputedNumericAtIndex(0)}setComputedNumeric(t,e){return this.setComputedNumericAtIndex(e,0)}getComputedString(t){return this.getComputedStringAtIndex(0)}setComputedString(t,e){return this.setComputedStringAtIndex(0,e)}getComputedNumericAtIndex(t){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),t)}setComputedNumericAtIndex(t,e){this._storage.setComputedNumericAtIndex(this.getDisplayId(),t,e)}getComputedStringAtIndex(t){return this._storage.getComputedStringAtIndex(this.getDisplayId(),t)}setComputedStringAtIndex(t,e){return this._storage.setComputedStringAtIndex(this.getDisplayId(),t,e)}transform(t,e){const r=this.copy();return r._tx=t,r._ty=e,r}extent(t,e,r,i){const s=this.copy();return s._xmin=t,s._xmax=r,s._ymin=e,s._ymax=i,s}hasFilter(){return this._hasFilter}readAttribute(t,e=!1){const r=this._readAttribute(t,e);if(void 0!==r)return r;for(const r of this._joined){r.setIndex(this.getIndex());const i=r._readAttribute(t,e);if(void 0!==i)return i}}readAttributes(){return this._readAttributes()}joinAttributes(t){this._joined.push(t)}readArcadeFeature(){return this}geometry(){const e=this.readHydratedGeometry(),i=Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_3__["convertToGeometry"])(e,this.geometryType,this.hasZ,this.hasM),s=Object(_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__["fromJSON"])(i);return s.spatialReference=this._arcadeSpatialReference,s}field(t){return this.readAttribute(t,!0)}hasField(t){return!0}setField(t,e){}keys(){return[]}castToText(){return""}_computeCentroid(){if("esriGeometryPolygon"!==this.geometryType)return null;const t=this.readUnquantizedGeometry();if(!t||t.hasIndeterminateRingOrder)return null;const r=this.getQuantizationTransform();return Object(_layers_graphics_centroid_js__WEBPACK_IMPORTED_MODULE_4__["getCentroidOptimizedGeometry"])(new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__["default"],t,this.hasM,this.hasZ,r)}copyInto(t){t.seen=this.seen,t._storage=this._storage,t._arcadeSpatialReference=this._arcadeSpatialReference,t._joined=this._joined,t._tx=this._tx,t._ty=this._ty,t._xmin=this._xmin,t._xmax=this._xmax,t._ymin=this._ymin,t._ymax=this._ymax}}


/***/ }),

/***/ "NIRN":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js ***!
  \*********************************************************************************/
/*! exports provided: getTypeOfSizeVisualVariable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTypeOfSizeVisualVariable", function() { return o; });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Logger.js */ "6S2I");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "zlDU");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums.js */ "yE7X");
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils.js */ "yN2G");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
const l=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLogger("esri.views.2d.engine.webgl");function o(e){return Object(_Utils_js__WEBPACK_IMPORTED_MODULE_3__["isNumber"])(e.minDataValue)&&Object(_Utils_js__WEBPACK_IMPORTED_MODULE_3__["isNumber"])(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?_enums_js__WEBPACK_IMPORTED_MODULE_2__["WGLVVFlag"].SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?_enums_js__WEBPACK_IMPORTED_MODULE_2__["WGLVVFlag"].SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&(Array.isArray(e.stops)||"levels"in e&&e.levels)?_enums_js__WEBPACK_IMPORTED_MODULE_2__["WGLVVFlag"].SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?_enums_js__WEBPACK_IMPORTED_MODULE_2__["WGLVVFlag"].SIZE_UNIT_VALUE:(l.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("mapview-bad-type","Found invalid size VisualVariable",e)),_enums_js__WEBPACK_IMPORTED_MODULE_2__["WGLVVFlag"].NONE)}


/***/ }),

/***/ "P0wj":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/displayIdUtils.js ***!
  \**************************************************************************************/
/*! exports provided: DISPLAY_ID_TYPE_AGGREGATE, DISPLAY_ID_TYPE_FEATURE, DisplayIdGenerator, getDisplayIdIndex, getDisplayIdType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISPLAY_ID_TYPE_AGGREGATE", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DISPLAY_ID_TYPE_FEATURE", function() { return e; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisplayIdGenerator", function() { return n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDisplayIdIndex", function() { return s; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDisplayIdType", function() { return r; });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
const e=0,t=1;function r(e){return(2147483648&e)>>>31}function s(e){return 2147483647&e}class n{constructor(){this._freeIds=[],this._idCounter=1}createId(e=!1){return function(e,t){return((t?2147483648:0)|e)>>>0}(this._getFreeId(),e)}releaseId(e){this._freeIds.push(e)}_getFreeId(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}


/***/ }),

/***/ "Q0oN":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderJSON.js ***!
  \********************************************************************************************/
/*! exports provided: FeatureSetReaderJSON */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureSetReaderJSON", function() { return a; });
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../layers/graphics/featureConversionUtils.js */ "ZlUD");
/* harmony import */ var _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FeatureSetReader.js */ "8NDJ");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
class a extends _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_1__["FeatureSetReader"]{constructor(t,e,r){super(t),this._featureIndex=-1,this._dateFields=new Set,this._geometryType=r,this._features=e}static fromFeatures(e,r,s){const i=Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__["convertFromFeatures"])([],e,r,!1,!1,s);for(let t=0;t<i.length;t++)i[t].displayId=e[t].displayId;return a.fromOptimizedFeatures(i,r)}static fromFeatureSet(t,r){const s=Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__["convertFromFeatureSet"])(t,r);return a.fromOptimizedFeatureSet(s)}static fromOptimizedFeatureSet(t){const{features:e,geometryType:r}=t,s=a.fromOptimizedFeatures(e,r);s._exceededTransferLimit=t.exceededTransferLimit,s._transform=t.transform;for(const e of t.fields)"esriFieldTypeDate"===e.type&&s._dateFields.add(e.name);return s}static fromOptimizedFeatures(t,e,r){const s=_FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_1__["FeatureSetReader"].createInstance(),i=new a(s,t,e);return i._transform=r,i}get _current(){return this._features[this._featureIndex]}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}getApproximateSize(){return this._features.length}getCursor(){return this.copy()}getQuantizationTransform(){return this._transform}getAttributeHash(){let t="";for(const e in this._current.attributes)t+=this._current.attributes[e];return t}getIndex(){return this._featureIndex}setIndex(t){this._featureIndex=t}getObjectId(){return this._current.objectId}getDisplayId(){return this._current.displayId}setDisplayId(t){this._current.displayId=t}getGroupId(){return this._current.groupId}setGroupId(t){this._current.groupId=t}copy(){const t=new a(this.instance,this._features,this.geometryType);return this.copyInto(t),t}next(){if(!this._hasFilter)return++this._featureIndex<this._features.length;for(;++this._featureIndex<this._features.length&&!this._passesFilter(););return this._featureIndex<this._features.length}readLegacyFeature(){return Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__["convertToFeature"])(this._current,this.geometryType,this.hasZ,this.hasM)}readOptimizedFeature(){return this._current}readLegacyPointGeometry(){const t=this.readGeometry();return t?{x:t.coords[0],y:t.coords[1]}:null}readLegacyGeometry(){const t=this.readGeometry();return Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__["convertToGeometry"])(t,this.geometryType,this.hasZ,this.hasM)}readLegacyCentroid(){const t=this.readCentroid();return t?{x:t.coords[0],y:t.coords[1]}:null}readGeometryArea(){return Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__["getQuantizedArea"])(this._current.geometry,2)}readUnquantizedGeometry(){const t=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!t)return t;const e=t.clone();return function({coords:t,lengths:e}){let r=0;for(const s of e){for(let e=1;e<s;e++)t[2*(r+e)]+=t[2*(r+e)-2],t[2*(r+e)+1]+=t[2*(r+e)-1];r+=s}}(e),e}readHydratedGeometry(){const t=this._current.geometry;if(!t)return null;const e=t.clone();return Object(_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__["unquantizeOptimizedGeometry"])(e,e,this.hasZ,this.hasM,this._transform),e}getXHydrate(){const t=this._current.geometry.coords[0]+this._tx,e=this.getQuantizationTransform();return t*e.scale[0]+e.translate[0]}getYHydrate(){const t=this._current.geometry.coords[1]+this._ty,e=this.getQuantizationTransform();return e.translate[1]-t*e.scale[1]}readGeometry(){if(!this._current.hasGeometry)return null;const t=this._current.geometry.clone();if(t.isPoint)return t.coords[0]+=this._tx,t.coords[1]+=this._ty,t;let e=0;for(const r of t.lengths)t.coords[2*e]+=this._tx,t.coords[2*e+1]+=this._ty,e+=r;return t}readCentroid(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){const t=this._computeCentroid();if(!t)return null;t.coords[0]-=this._tx,t.coords[1]-=this._ty,this._current.centroid=t}const t=this._current.centroid.clone();return t.coords[0]+=this._tx,t.coords[1]+=this._ty,t}_readAttribute(t,e){const r=this._current.attributes[t];if(void 0!==r)return e&&this._dateFields.has(t)?new Date(r):r;const s=this.readAttributes(),i=t.toLocaleLowerCase().trim();for(const t in s)if(t.toLocaleLowerCase().trim()===i){const e=this._current.attributes[t];return this._dateFields.has(t)?new Date(e):e}}copyInto(t){super.copyInto(t),t._featureIndex=this._featureIndex,t._transform=this._transform,t._dateFields=this._dateFields}_readAttributes(){return this._current.attributes}_passesFilter(){if(!this._hasFilter)return!0;let t=0,e=0;switch(this.geometryType){case"esriGeometryPoint":{const r=this._current.geometry;if(!r)return!1;[t,e]=r.coords;break}case"esriGeometryPolygon":{const r=this.readCentroid();if(!r)return!1;[t,e]=r.coords,t-=this._tx,e-=this._ty;break}default:return!1}return t>=this._xmin&&t<=this._xmax&&e>=this._ymin&&e<=this._ymax}}


/***/ }),

/***/ "Swtj":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js ***!
  \************************************************************************************************/
/*! exports provided: ComputedAttributeStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComputedAttributeStorage", function() { return i; });
/* harmony import */ var _displayIdUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./displayIdUtils.js */ "P0wj");
/* harmony import */ var _StaticBitSet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StaticBitSet.js */ "feGD");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
function s(t,e,s){if(!(t.length>e))for(;t.length<=e;)t.push(s)}class i{constructor(){this._numerics=[],this._strings=[],this._idGenerator=new _displayIdUtils_js__WEBPACK_IMPORTED_MODULE_0__["DisplayIdGenerator"],this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}createBitset(){const t=this._bitsets.length;return this._bitsets.push(_StaticBitSet_js__WEBPACK_IMPORTED_MODULE_1__["StaticBitSet"].create(this._allocatedSize,2147483647)),t+1}getBitset(t){return this._bitsets[t-1]}_expand(){this._allocatedSize<<=1;for(const t of this._bitsets)t.resize(this._allocatedSize)}_ensureNumeric(t,e){this._numerics[t]||(this._numerics[t]=[]);s(this._numerics[t],e,0)}_ensureInstanceId(t){s(this._instanceIds,t,0)}_ensureString(t,e){this._strings[t]||(this._strings[t]=[]);s(this._strings[t],e,null)}createDisplayId(t=!1){const e=this._idGenerator.createId();return e>this._allocatedSize&&this._expand(),((t,e)=>((e?2147483648:0)|t)>>>0)(e,t)}releaseDisplayId(t){for(const e of this._bitsets)e.unset(t);return this._idGenerator.releaseId(2147483647&t)}getComputedNumeric(t,e){return this.getComputedNumericAtIndex(2147483647&t,0)}setComputedNumeric(t,e,s){return this.setComputedNumericAtIndex(2147483647&t,s,0)}getComputedString(t,e){return this.getComputedStringAtIndex(2147483647&t,0)}setComputedString(t,e,s){return this.setComputedStringAtIndex(2147483647&t,0,s)}getComputedNumericAtIndex(t,e){const s=2147483647&t;return this._ensureNumeric(e,s),this._numerics[e][s]}setComputedNumericAtIndex(t,e,s){const i=2147483647&t;this._ensureNumeric(e,i),this._numerics[e][i]=s}getInstanceId(t){const e=2147483647&t;return this._ensureInstanceId(e),this._instanceIds[e]}setInstanceId(t,e){const s=2147483647&t;this._ensureInstanceId(s),this._instanceIds[s]=e}getComputedStringAtIndex(t,e){const s=2147483647&t;return this._ensureString(e,s),this._strings[e][s]}setComputedStringAtIndex(t,e,s){const i=2147483647&t;this._ensureString(e,i),this._strings[e][i]=s}getXMin(t){return this._bounds[4*(2147483647&t)]}getYMin(t){return this._bounds[4*(2147483647&t)+1]}getXMax(t){return this._bounds[4*(2147483647&t)+2]}getYMax(t){return this._bounds[4*(2147483647&t)+3]}setBounds(t,e){const i=e.readHydratedGeometry();if(!i||!i.coords.length)return!1;let n=1/0,r=1/0,u=-1/0,h=-1/0;i.forEachVertex(((t,e)=>{n=Math.min(n,t),r=Math.min(r,e),u=Math.max(u,t),h=Math.max(h,e)}));const d=2147483647&t;return s(this._bounds,4*d+4,0),this._bounds[4*d]=n,this._bounds[4*d+1]=r,this._bounds[4*d+2]=u,this._bounds[4*d+3]=h,!0}}


/***/ }),

/***/ "feGD":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js ***!
  \************************************************************************************/
/*! exports provided: StaticBitSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StaticBitSet", function() { return t; });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
class t{constructor(t,e){this._mask=0,this._buf=t,this._mask=e}static fromBuffer(e,s){return new t(e,s)}static create(e,s=4294967295){const h=new Uint32Array(Math.ceil(e/32));return new t(h,s)}_getIndex(t){return Math.floor(t/32)}has(t){const e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)}set(t){const e=this._mask&t,s=this._getIndex(e),h=1<<e%32;this._buf[s]|=h}unset(t){const e=this._mask&t,s=this._getIndex(e),h=1<<e%32;this._buf[s]&=4294967295^h}resize(t){const e=this._buf,s=new Uint32Array(Math.ceil(t/32));s.set(e),this._buf=s}or(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this}and(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this}xor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this}ior(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this}iand(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this}ixor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this}any(){for(let t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1}copy(t){for(let e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this}clone(){return new t(this._buf.slice(),this._mask)}clear(){for(let t=0;t<this._buf.length;t++)this._buf[t]=0}forEachSet(t){for(let e=0;e<this._buf.length;e++){let s=this._buf[e],h=32*e;if(s)for(;s;){1&s&&t(h),s>>>=1,h++}}}countSet(){let t=0;return this.forEachSet((e=>{t++})),t}}


/***/ }),

/***/ "w5u1":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/has.js */ "wSAH");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/Evented.js */ "zm0L");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../tiling/TileKey.js */ "rlSK");
/* harmony import */ var _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../tiling/TileCoverage.js */ "umoc");
/* harmony import */ var _chunks_rbush_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../chunks/rbush.js */ "kB+0");
/* harmony import */ var _Tile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Tile.js */ "7g5W");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
const h={added:[],removed:[]},r=new Set,d=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](0,0,0,0);/* harmony default export */ __webpack_exports__["default"] = (class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(t){super(),this._tiles=new Map,this._index=Object(_chunks_rbush_js__WEBPACK_IMPORTED_MODULE_4__["r"])(9,Object(_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}findByKey(e){return this._tiles.get(e.id)}intersections(e,t){const s="string"==typeof e?this.get(e):e;if(!s)return[];const i=t*s.resolution,o=s.bounds[0]-i,n=s.bounds[1]-i,h=s.bounds[2]+i,r=s.bounds[3]+i,d=[];for(const e of this._index.search({minX:o,minY:n,maxX:h,maxY:r})){const t=e.bounds.slice();t[0]=Math.max(t[0],o),t[1]=Math.max(t[1],n),t[2]=Math.min(t[2],h),t[3]=Math.min(t[3],r),t[2]-t[0]>0&&t[3]-t[1]>0&&d.push({bounds:t,tile:e})}return d}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new _Tile_js__WEBPACK_IMPORTED_MODULE_5__["Tile"](this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e)}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:o}=t,{level:l}=o;if(s.length>0)for(const{row:e,colFrom:t,colTo:i}of s)for(let s=t;s<=i;s++){const t=d.set(l,e,o.normalizeCol(s),o.getWorldForColumn(s)).id;if(r.add(t),!this.has(t)){const e=new _Tile_js__WEBPACK_IMPORTED_MODULE_5__["Tile"](this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),h.added.push(e)}}for(let e=this.tiles.length-1;e>=0;e--){const t=this.tiles[e];r.has(t.id)||(this._tiles.delete(t.id),this.tiles.splice(e,1),this._index.remove(t),h.removed.push(t))}(h.added.length||h.removed.length)&&this.emit("update",h),_tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_3__["default"].pool.release(t),r.clear(),h.added.length=0,h.removed.length=0}});


/***/ })

}]);
//# sourceMappingURL=default~layers-GeoRSSLayerView2D-js~layers-GraphicsLayerView2D-js~layers-ImageryLayerView2D-js~layer~f4e9118f-es2015.js.map