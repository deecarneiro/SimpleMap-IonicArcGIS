{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js","webpack:///node_modules/@arcgis/core/views/support/drapedUtils.js","webpack:///node_modules/@arcgis/core/views/2d/engine/RasterTile.js","webpack:///node_modules/@arcgis/core/views/2d/engine/RasterBitmap.js","webpack:///node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","webpack:///node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","webpack:///node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js"],"names":["r","s","t","e","triangleCountReportedInDebug","transforms","dvs","tileMat3","triangleCount","key","bounds","size","coordRange","texture","dispose","_coords","_bounds","o","i","resolution","pixelRatio","toScreenNoRotation","coords","n","h","a","d","displayViewMat3","type","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","m","x","p","y","c","l","f","xmin","Math","min","ymin","xmax","max","ymax","toMap","intersects","bitmap","coordScale","once","ready","stencilRef","getMemoryUsage","destroy","stage","_","bandCount","outMin","outMax","minCutOff","maxCutOff","factor","useGamma","gamma","gammaCorrection","colormap","colormapOffset","_textureInvalidated","_memoryUsed","_supportsBilinear","_symbolizerParameters","height","isRendereredSource","rotation","_source","rawPixelData","_suspended","_bandIds","_interpolation","_transformGrid","width","source","transformGrid","interpolation","_rasterTexture","_rasterTextureBandIds","requestRender","invalidateTexture","setSamplingMode","_transformGridTexture","u","PI","push","_colormapTexture","names","textures","getTextures","map","descriptor","reduce","context","pixels","length","_createOrDestroyRasterTexture","_updateColormapTexture","setData","suspended","bandIds","join","capabilities","textureFloat","textureFloatLinear","_colormap","symbolizerParameters","some","xoffset","abs","yoffset","stops","renderer","event","pointerType","filter","maxSize","minSize","floor","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","_tileInfoView","getTileBounds","tileInfo","registerRenderPass","name","brushes","raster","target","children","drawPhase","MAP","visible","level","row","col","sortChildren","setStencilReference","state","requiredLevel","getClosestInfoForScale","scale","displayLevel","scaleToZoom","DEBUG","HIGHLIGHT","getStencilTarget","has","getTileResolution","setTransform","arguments","_rasterFieldPrefix","layer","view","fullExtent","datumTransformation","dynamicRangeAdjustment","popupEnabled","popupTemplate","identify","value","ObjectId","_formatAttributeValue","rasterInfo","attributeTable","features","attributes","Value","VALUE","String","hasOwnProperty","clone","sourceLayer","_set","fieldInfos","_getFieldInfo","format","trim","indexOf","_formatDelimitedString","_formatNumberFromString","toLowerCase","fieldName","replace","split","Number","isNaN","prototype","readOnly","dependsOn","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","L","getLogger","q","D","_tileStrategy","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_bitmapView","_emptyTilePixelBlock","_srcResolutions","_previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_globalUpdateRequested","useWebGLForProcessing","_redrawDebounced","_redrawImage","updateFullExtent","addResolvingPromise","_get","useProgressiveUpdate","removeAllChildren","cachePolicy","resampling","acquireTile","releaseTile","cacheSize","tileInfoView","requestUpdate","geometry","pause","update","resume","extent","toJSON","fromJSON","ioConfig","sampling","_updateSymbolizerParams","notifyChange","increaseRasterJobHandlerUsage","supportsTextureFloat","allowPartialFill","_initializeTileInfo","concurrency","process","fetchTile","container","addChild","handles","add","error","_canUseMajorityInterpolationOnDataSource","refreshDebounced","_updateBlockCacheRegistry","remove","decreaseRasterJobHandlerUsage","clear","hasTilingEffects","abort","signal","then","updateRequested","reset","tiles","_enqueueTileFetch","createTile","getTileCoords","id","removeChild","_canUseWebGLForProcessing","registryId","requestRawData","srcResolution","symbolizer","canRenderInWebGL","scales","srcResolutions","create","origin","moving","pixelBlock","applyRenderer","_createEmptyTilePixelBlock","_getLayerInterpolation","updateRenderer","_updateGlobalSymbolizerParams","Uint8Array","mask","pixelType","fetchPixels","generateWebGLParameters","isGCS","isGeographic","round","url","multidimensionalDefinition","multidimensionalInfo","getSliceIndex","G"],"mappings":"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","file":"layers-ImageryTileLayerView2D-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{s,m as t}from\"../../../../chunks/mat3.js\";import o from\"../../tiling/TileKey.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as e}from\"../DisplayObject.js\";class r extends e{constructor(s,t,e,r=e){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:i(),tileMat3:i()},this.triangleCount=0,this.key=new o(s),this.bounds=t,this.size=e,this.coordRange=r}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(s){this._coords=[s[0],s[3]],this._bounds=s}setTransform(o,i){const e=i/(o.resolution*o.pixelRatio),r=this.transforms.tileMat3,[n,h]=o.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*e,d=this.size[1]/this.coordRange[1]*e;s(r,a,0,0,0,d,0,n,h,1),t(this.transforms.dvs,o.displayViewMat3,r)}}export{r as TiledDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{TiledDisplayObject as t}from\"./webgl/TiledDisplayObject.js\";import{RasterBitmap as s}from\"./RasterBitmap.js\";class e extends t{constructor(t,e,i,a=null){super(t,e,i),this.bitmap=new s(a,null,null),this.bitmap.coordScale=i,this.bitmap.once(\"isReady\",(()=>this.ready()))}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}getMemoryUsage(){return this.bitmap.getMemoryUsage()}setTransform(t,s){super.setTransform(t,s),this.bitmap.transforms.dvs=this.transforms.dvs}release(){return this.destroy(),this.bitmap=null,this.stage=null,!0}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}export{e as RasterTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{i as e,a as s,r,j as i,m as a}from\"../../../chunks/mat3.js\";import{extractBands as o}from\"../../../layers/support/rasterFunctions/pixelUtils.js\";import{c as u}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import{DisplayObject as h}from\"./DisplayObject.js\";import{createTransformTexture as l,createRasterTexture as d,createColormapTexture as m}from\"../../webgl/rasterUtils.js\";const _={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,type:\"stretch\"};class p extends h{constructor(t=null,e=null,s=null){super(),this._textureInvalidated=!0,this._memoryUsed=null,this._supportsBilinear=!0,this.stencilRef=0,this.coordScale=[1,1],this._symbolizerParameters=null,this.height=null,this.isRendereredSource=!1,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this.rawPixelData=null,this._suspended=!1,this._bandIds=null,this._interpolation=null,this._transformGrid=null,this.width=null,this.x=0,this.y=0,this.transforms={dvs:u()},this.source=t,this.transformGrid=e,this.interpolation=s}get symbolizerParameters(){return this._symbolizerParameters||_}set symbolizerParameters(t){this._symbolizerParameters=t}get source(){return this._source}set source(t){this._source=t,this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._memoryUsed=null)}get suspended(){return this._suspended}set suspended(t){this._suspended&&!t&&this.stage&&(this.ready(),this.requestRender()),this._suspended=t}get bandIds(){return this._bandIds}set bandIds(t){this._bandIds=t,this.invalidateTexture()}get interpolation(){return this._interpolation}set interpolation(t){this._interpolation=t,this._rasterTexture&&this._rasterTexture.setSamplingMode(!this._supportsBilinear||\"bilinear\"!==t&&\"cubic\"!==t?9728:9729)}get transformGrid(){return this._transformGrid}set transformGrid(t){this._transformGrid=t,this._transformGridTexture&&(this._transformGridTexture.dispose(),this._transformGridTexture=null,this._memoryUsed=null)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRender())}setTransform(t){const o=e(this.transforms.dvs),[u,h]=t.toScreenNoRotation([0,0],this.x,this.y),l=this.resolution/this.pixelRatio/t.resolution,d=l*this.width,m=l*this.height,_=Math.PI*this.rotation/180;s(o,o,n(u,h)),s(o,o,n(d/2,m/2)),r(o,o,-_),s(o,o,n(-d/2,-m/2)),i(o,o,n(d,m)),a(this.transforms.dvs,t.displayViewMat3,o)}getTextures(){if(!this._rasterTexture)return null;const t=[],e=[];return this._transformGridTexture&&(e.push(this._transformGridTexture),t.push(\"u_transformGrid\")),this._rasterTexture&&(e.push(this._rasterTexture),t.push(\"u_image\")),this._colormapTexture&&(e.push(this._colormapTexture),t.push(\"u_colormap\")),{names:t,textures:e}}getMemoryUsage(){if(t(this._memoryUsed)){const t=this.getTextures();if(null==t)return 0;this._memoryUsed=t.textures.map((t=>t.descriptor.width*t.descriptor.height*4)).reduce(((t,e)=>t+e))}return this._memoryUsed}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}updateTexture({context:t}){var e,s,r;if(!this.stage)return null==(e=this._rasterTexture)||e.dispose(),null==(s=this._transformGridTexture)||s.dispose(),null==(r=this._colormapTexture)||r.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._transformGridTexture=null,void(this._colormapTexture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1;const i=this.source,a=i&&i.pixels&&i.pixels.length>0;this._createOrDestroyRasterTexture(t),this._rasterTexture&&(a?(this._updateColormapTexture(t),this.transformGrid&&!this._transformGridTexture&&(this._transformGridTexture=l(t,this.transformGrid))):this._rasterTexture.setData(null)),this.suspended||(this.ready(),this.requestRender())}_createOrDestroyRasterTexture(t){var e,s;const r=this.source?o(this.source,this.bandIds):null;if(!(r&&r.pixels&&r.pixels.length>0))return void(this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null));const i=null==this._rasterTextureBandIds&&null==this.bandIds||this._rasterTextureBandIds&&this.bandIds&&this._rasterTextureBandIds.join(\"\")===this.bandIds.join(\"\");if(this._rasterTexture){if(i)return;this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null}const a=this.interpolation||\"nearest\",u=this.isRendereredSource||!(null!=(e=t.capabilities.textureFloat)&&e.textureFloat);this._rasterTexture=d(t,r,a,u),this._supportsBilinear=null==(s=t.capabilities.textureFloat)?void 0:s.textureFloatLinear,this._rasterTextureBandIds=this.bandIds}_updateColormapTexture(t){const e=this._colormap,s=this.symbolizerParameters.colormap;return s?e?s.length!==e.length||s.some(((t,s)=>t!==e[s]))?(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormapTexture=m(t,s),void(this._colormap=s)):void 0:(this._colormapTexture=m(t,s),void(this._colormap=s)):(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),void(this._colormap=null))}}export{p as RasterBitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t,e){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}(t.stops):e}function n(n){const r=n&&n.renderer,s=\"touch\"===(n&&n.event&&n.event.pointerType)?9:6;if(!r)return s;const o=\"visualVariables\"in r?function(t,n){if(!n)return t;const r=n.filter((t=>\"size\"===t.type)).map((n=>{const{maxSize:r,minSize:s}=n;return(e(r,t)+e(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let t=0;t<o;t++)s+=r[t];const f=Math.floor(s/o);return Math.max(f,t)}(s,r.visualVariables):s;if(\"simple\"===r.type)return t(o,r.symbol);if(\"unique-value\"===r.type){let e=o;return r.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===r.type){let e=o;return r.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return r.type,o}export{n as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import{brushes as s}from\"./brushes.js\";import t from\"./webgl/TileContainer.js\";import{RasterTile as i}from\"./RasterTile.js\";class o extends t{createTile(r){const s=this._tileInfoView.getTileBounds(e(),r);return new i(r,s,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[s.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:r.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===r.MAP&&super.doRender(e)}}export{o as RasterTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./enums.js\";import r from\"./brushes/WGLBrushInfo.js\";import s from\"./brushes/WGLBrushStencil.js\";import t from\"./WGLContainer.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;export default class extends t{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[s],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[r],drawPhase:e.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{n as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as s,resolve as n}from\"../../core/promiseUtils.js\";import a from\"../../Graphic.js\";import{projectExtent as l}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as p}from\"./support/popupUtils.js\";const u=u=>{let m=class extends u{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,r){const{layer:i}=this;if(!e)return s(new o(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:i}));const{popupEnabled:n}=i,l=p(i,r);if(!n||!t(l))throw new o(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:n,popupTemplate:l});const u=[],{value:m}=await i.identify(e);if(m){var f,c;const e=m.join(\", \"),t={ObjectId:0},r=\"Raster.ServicePixelValue\";t[r]=this._formatAttributeValue(e,r);const o=null==(f=i.rasterInfo)||null==(c=f.attributeTable)?void 0:c.features;if(o&&o.length>0){const r=o.filter((t=>{const r=t.attributes.value||t.attributes.Value||t.attributes.VALUE;return String(r)===e}));if(r.length>0){const e=r[0];if(e)for(const r in e.attributes)if(e.attributes.hasOwnProperty(r)){const i=this._rasterFieldPrefix+r;t[i]=this._formatAttributeValue(e.attributes[r],i)}}}const s=new a(this.fullExtent.clone(),null,t);s.layer=i,s.sourceLayer=s.layer,u.push(s)}return u}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new o(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));const r=l(this.layer.fullExtent,this.view.spatialReference,this.datumTransformation);return null==r&&(t=new o(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",r),t?s(t):n()}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return e([r()],m.prototype,\"layer\",void 0),e([r()],m.prototype,\"view\",void 0),e([r()],m.prototype,\"fullExtent\",void 0),e([r()],m.prototype,\"tileInfo\",void 0),e([r({readOnly:!0,dependsOn:[\"layer.renderer\"]})],m.prototype,\"hasTilingEffects\",null),m=e([i(\"esri.views.layers.ImageryTileLayerView\")],m),m};export{u as ImageryTileLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as t,unwrap as i}from\"../../../core/maybe.js\";import s from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{debounce as l,resolve as o,isAbortError as n,createAbortController as h,eachAlways as c}from\"../../../core/promiseUtils.js\";import u from\"../../../geometry/Point.js\";import p from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import{createScreenPoint as m}from\"../../../core/screenUtils.js\";import d from\"../../../Graphic.js\";import{watch as y}from\"../../../core/watchUtils.js\";import _ from\"../../../layers/support/PixelBlock.js\";import b from\"../../../layers/support/TileInfo.js\";import{extractBands as g}from\"../../../layers/support/rasterFunctions/pixelUtils.js\";import{computeProjectedScales as f}from\"../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{update as w,unregister as I,register as P,getRasterId as U}from\"../../../layers/support/rasterDatasets/RawBlockCache.js\";import{RefreshableLayerView as R}from\"../../layers/RefreshableLayerView.js\";import T from\"../../webgl/capabilities.js\";import v from\"../tiling/TileInfoView.js\";import x from\"../tiling/TileQueue.js\";import S from\"../tiling/TileStrategy.js\";import k from\"../../layers/LayerView.js\";import{createQueryGeometry as C}from\"../../support/drapedUtils.js\";import{ImageryTileLayerView as z}from\"../../layers/ImageryTileLayerView.js\";import{RasterTileContainer as j}from\"../engine/RasterTileContainer.js\";import{LayerView2DMixin as V}from\"./LayerView2D.js\";const L=s.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),q=[0,0];let D=class extends(z(R(V(k)))){constructor(){super(...arguments),this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._bitmapView=null,this._emptyTilePixelBlock=null,this._srcResolutions=null,this._previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._globalUpdateRequested=!1,this.useWebGLForProcessing=!0,this.datumTransformation=null,this._redrawDebounced=l((e=>this._redrawImage(e)),2e3)}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){this._tileStrategy&&this.useProgressiveUpdate!==e&&(this._tileStrategy.destroy(),this._bitmapView.removeAllChildren(),this._tileStrategy=new S({cachePolicy:e?\"keep\":\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:e?40:0,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate())}hitTest(e,t){if(this.suspended)return o(null);const i=this.view.toMap(m(e,t));return o(new d({attributes:{},geometry:i}))}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var a;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:p.fromJSON(t);w(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(a=this._previousLOD)?void 0:a.level)!==r.level&&(this._previousLOD=r,null!=this._symbolizerParams&&this._updateSymbolizerParams())}this.notifyChange(\"updating\")}attach(){this.layer.increaseRasterJobHandlerUsage(),T().supportsTextureFloat||(this.useWebGLForProcessing=!1),this.layer.raster&&(this.layer.raster.ioConfig.allowPartialFill=!0),this._initializeTileInfo(),this._tileInfoView=new v(this.tileInfo,this.fullExtent),this._fetchQueue=new x({tileInfoView:this._tileInfoView,concurrency:10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new S({cachePolicy:this.useProgressiveUpdate?\"keep\":\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:this.useProgressiveUpdate?40:0,tileInfoView:this._tileInfoView}),this._bitmapView=new j(this._tileInfoView),this.container.addChild(this._bitmapView),this.handles.add([y(this,[\"layer.bandIds\",\"layer.renderer\"],(()=>this._redrawDebounced().catch((e=>{n(e)||L.error(e)})))),y(this,[\"layer.interpolation\"],((e,t)=>{\"majority\"!==e&&\"majority\"!==t||!this._canUseMajorityInterpolationOnDataSource()?this._redrawDebounced().catch((e=>{n(e)||L.error(e)})):this.refreshDebounced()})),y(this,[\"layer.multidimensionalDefinition\"],this.refreshDebounced)],\"attach\"),this._updateBlockCacheRegistry()}detach(){this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,I(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=h(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.requestUpdate()}))),this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return C(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._updateSymbolizerParams(),this._updateBlockCacheRegistry(),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){return this._fetchQueue.length>0||this._globalUpdateRequested}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(q,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.requestUpdate()})),this.requestUpdate()}fetchTile(e,s){const r=!t(s)&&s.signal,a=this._canUseWebGLForProcessing(),l={tileInfo:this.tileInfo,signal:i(r),registryId:this._blockCacheRegistryId,requestRawData:a,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:a?\"nearest\":this.layer.interpolation};return this.layer.fetchTile(e.level,e.row,e.col,l)}_canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())}_initializeTileInfo(){const e=this.view.spatialReference,t=new u({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s}=f(this.layer.rasterInfo,e),r=b.create({spatialReference:e,size:512,scales:i});(0===r.origin.x||r.origin.x>t.x)&&(r.origin=t),this._set(\"tileInfo\",r),this._srcResolutions=null!=s?s:[]}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:i}=this.layer;let s=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){s=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(e){n(e)&&L.error(e)}this._globalUpdateRequested=!1}const r=this._canUseWebGLForProcessing();if(r&&!this.hasTilingEffects&&null==this._symbolizerParams&&this._updateSymbolizerParams(),t&&t.pixelBlock){if(r)e.bitmap.source=t.pixelBlock,e.bitmap.isRendereredSource=!1;else{const i={extent:t.extent,pixelBlock:t.pixelBlock},s=await this.layer.applyRenderer(i,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null);e.bitmap.rawPixelData=i,e.bitmap.source=s,e.bitmap.isRendereredSource=!0}e.bitmap.symbolizerParameters=r?this._globalSymbolizerParams||this._symbolizerParams:null,!e.bitmap.transformGrid&&r?e.bitmap.transformGrid=t.transformGrid:e.bitmap.transformGrid=null}else{const t=this._createEmptyTilePixelBlock();e.bitmap.source=t,e.bitmap.symbolizerParameters=r?this._symbolizerParams:null,e.bitmap.transformGrid=null}e.bitmap.bandIds=i,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=s,e.bitmap.invalidateTexture(),e.once(\"attach\",(()=>this.requestUpdate())),this._bitmapView.addChild(e)}catch(e){n(e)||L.error(e)}this.requestUpdate()}}async _redrawImage(e){this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const{bandIds:t}=this.layer,i=this._bitmapView.children.map((async e=>{const i=this._canUseWebGLForProcessing();i?e.bitmap.isRendereredSource=!1:(e.bitmap.source=await this.layer.applyRenderer(e.bitmap.rawPixelData,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null),e.bitmap.isRendereredSource=!0),e.bitmap.symbolizerParameters=i?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.bandIds=t,e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=!1}));await c(i),this.container.requestRender()}_createEmptyTilePixelBlock(){if(!this._emptyTilePixelBlock){const e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new _({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:\"u8\"})}return this._emptyTilePixelBlock}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:g(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this._canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(){const{url:e,rasterInfo:t,multidimensionalDefinition:i,raster:s}=this.layer,r=null!=t&&t.multidimensionalInfo?s.getSliceIndex(i):null,a=U(e,r);a!==this._blockCacheRegistryUrl&&(null==this._blockCacheRegistryUrl&&I(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=P(a,this.layer.raster.rasterInfo),this._blockCacheRegistryUrl=a)}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:s}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||\"u8\"===s||\"s8\"===s)}_getLayerInterpolation(){const e=this.layer.renderer.type;return\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e?\"nearest\":this.layer.interpolation}};e([r()],D.prototype,\"useProgressiveUpdate\",null),D=e([a(\"esri.views.2d.layers.ImageryTileLayerView2D\")],D);var G=D;export default G;\n"]}