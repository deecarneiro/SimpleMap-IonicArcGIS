{"version":3,"sources":["webpack:///node_modules/@arcgis/core/arcade/functions/featuresetgeom.js","webpack:///node_modules/@arcgis/core/layers/support/FieldsIndex.js"],"names":["S","e","h","i","s","d","g","length","Error","parentfeatureset","relation","relationGeom","mode","functions","intersects","n","t","failDefferred","standardFunctionAsync","envelopeintersects","signatures","push","name","min","max","contains","overlaps","within","touches","crosses","relate","l","type","toLowerCase","trim","fields","_fieldsMap","Map","_dateFieldsSet","Set","dateFields","a","set","add","sort","uid","join","clear","get","has"],"mappings":"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","file":"arcade-functions-featuresetgeom-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{resolve as e,reject as n}from\"../../core/promiseUtils.js\";import t from\"../../geometry/Geometry.js\";import{J as r,z as a,p as i,e as s}from\"../../chunks/languageUtils.js\";import{shapeExtent as l}from\"../kernel.js\";import{crosses as o,touches as u,within as c,overlaps as f,contains as p,intersects as m,relate as d}from\"../../geometry/geometryEngineAsync.js\";import y from\"../featureset/sources/Empty.js\";import R from\"../featureset/actions/SpatialFilter.js\";function S(e){return e instanceof t}function h(i,s,d,h,g){return g(i,s,(function(i,s,g){if(g.length<2)return h(new Error(\"Missing Parameters\"));if(null===(g=r(g))[0]&&null===g[1])return e(!1);if(a(g[0]))return g[1]instanceof t?e(new R({parentfeatureset:g[0],relation:d,relationGeom:g[1]})):null===g[1]?e(new y({parentfeatureset:g[0]})):h(\"Spatial Relation cannot accept this parameter type\");if(S(g[0])){if(S(g[1])){let e=null;switch(d){case\"esriSpatialRelEnvelopeIntersects\":e=m(l(g[0]),l(g[1]));break;case\"esriSpatialRelIntersects\":e=m(g[0],g[1]);break;case\"esriSpatialRelContains\":e=p(g[0],g[1]);break;case\"esriSpatialRelOverlaps\":e=f(g[0],g[1]);break;case\"esriSpatialRelWithin\":e=c(g[0],g[1]);break;case\"esriSpatialRelTouches\":e=u(g[0],g[1]);break;case\"esriSpatialRelCrosses\":e=o(g[0],g[1])}return null!==e?e:n(new Error(\"Unrecognised Relationship\"))}return a(g[1])?e(new R({parentfeatureset:g[1],relation:d,relationGeom:g[0]})):null===g[1]?e(!1):h(\"Spatial Relation cannot accept this parameter type\")}return null!==g[0]?h(\"Spatial Relation cannot accept this parameter type\"):a(g[1])?e(new y({parentfeatureset:g[1]})):g[1]instanceof t||null===g[1]?e(!1):void 0}))}function g(e){\"async\"===e.mode&&(e.functions.intersects=function(n,t){return h(n,t,\"esriSpatialRelIntersects\",e.failDefferred,e.standardFunctionAsync)},e.functions.envelopeintersects=function(n,t){return h(n,t,\"esriSpatialRelEnvelopeIntersects\",e.failDefferred,e.standardFunctionAsync)},e.signatures.push({name:\"envelopeintersects\",min:\"2\",max:\"2\"}),e.functions.contains=function(n,t){return h(n,t,\"esriSpatialRelContains\",e.failDefferred,e.standardFunctionAsync)},e.functions.overlaps=function(n,t){return h(n,t,\"esriSpatialRelOverlaps\",e.failDefferred,e.standardFunctionAsync)},e.functions.within=function(n,t){return h(n,t,\"esriSpatialRelWithin\",e.failDefferred,e.standardFunctionAsync)},e.functions.touches=function(n,t){return h(n,t,\"esriSpatialRelTouches\",e.failDefferred,e.standardFunctionAsync)},e.functions.crosses=function(n,t){return h(n,t,\"esriSpatialRelCrosses\",e.failDefferred,e.standardFunctionAsync)},e.functions.relate=function(n,l){return e.standardFunctionAsync(n,l,(function(e,n,l){if(l=r(l),i(l,3,3),S(l[0])&&S(l[1]))return d(l[0],l[1],s(l[2]));if(l[0]instanceof t&&null===l[1])return!1;if(l[1]instanceof t&&null===l[0])return!1;if(a(l[0])&&null===l[1])return new y({parentfeatureset:l[0]});if(a(l[1])&&null===l[0])return new y({parentfeatureset:l[1]});if(a(l[0])&&l[1]instanceof t)return l[0].relate(l[1],s(l[2]));if(a(l[1])&&l[0]instanceof t)return l[1].relate(l[0],s(l[2]));if(null===l[0]&&null===l[1])return!1;throw new Error(\"Illegal Argument\")}))})}export{g as registerFunctions};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t){return\"date\"===t.type||\"esriFieldTypeDate\"===t.type}function e(t){return t.toLowerCase().trim()}export default class{constructor(s){if(this.fields=s,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!s)return;const i=[];for(const d of s){const s=d&&d.name;if(s){const a=e(s);this._fieldsMap.set(s,d),this._fieldsMap.set(a,d),i.push(a),t(d)&&(this.dateFields.push(d),this._dateFieldsSet.add(d))}}i.sort(),this.uid=i.join(\",\")}destroy(){this._fieldsMap.clear()}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(e(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}\n"]}