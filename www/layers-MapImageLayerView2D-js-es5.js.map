{"version":3,"sources":["webpack:///node_modules/@arcgis/core/symbols/support/FeatureExpressionInfo.js","webpack:///node_modules/@arcgis/core/symbols/support/ElevationInfo.js","webpack:///node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","webpack:///node_modules/@arcgis/core/views/support/drapedUtils.js","webpack:///node_modules/@arcgis/core/layers/support/sublayerUtils.js","webpack:///node_modules/@arcgis/core/layers/support/commonProperties.js","webpack:///node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///node_modules/@arcgis/core/views/layers/MapImageLayerView.js","webpack:///node_modules/@arcgis/core/layers/support/ExportImageParameters.js","webpack:///node_modules/@arcgis/core/symbols/support/unitConversionUtils.js","webpack:///node_modules/@arcgis/core/renderers/support/lengthUtils.js","webpack:///node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"names":["p","i","r","o","expression","title","type","String","json","write","prototype","c","l","m","onTheGround","relativeToGround","relativeToScene","absoluteHeight","d","foot","kilometer","meter","mile","yard","arguments","offset","e","featureExpression","value","t","_isOverridden","_get","featureExpressionInfo","_override","_set","mode","unit","clone","apiValues","dependsOn","nonNullable","jsonValues","read","writer","isRequired","Number","x","getLogger","_exportImageVersion","strategy","update","error","layer","imageMaxWidth","imageMaxHeight","version","s","_bitmapContainer","container","addChild","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","imageParameters","view","handles","add","destroy","remove","removeChild","removeAllChildren","updating","updateRequested","timeExtent","timestamp","refreshTimestamp","y","a","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","f","xmin","Math","min","ymin","xmax","max","ymax","n","toMap","intersects","flatten","sublayers","length","some","originIdOf","source","mapLayerId","id","gdbVersion","slice","reverse","toArray","map","minScale","layerDefinition","Boolean","origins","reader","screenSizePerspective","originOf","store","set","ignoreOrigin","target","name","disablePopup","enabled","service","readOnly","u","opacity","origin","drawingInfo","transparency","get","timeInfo","useViewTime","intersection","isEmpty","timeOffset","xoffset","abs","yoffset","stops","size","renderer","event","pointerType","filter","maxSize","minSize","floor","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","maxScale","visible","popupEnabled","defaultPopupTemplateEnabled","push","sublayer","popupTemplate","load","createQuery","createFetchPopupFeaturesQueryGeometry","geometry","outFields","_loadArcadeModules","arcadeUtils","hasGeometryOperations","maxAllowableOffset","width","queryFeatures","features","reduce","definitionExpression","labelingInfo","labelsVisible","_scale","hasDynamicLayers","visibleSublayers","toExportImageJSON","JSON","stringify","serviceSublayers","allSublayers","on","notifyChange","propertyName","join","scale","layers","layerDefs","dynamicLayers","dpi","imageFormat","imageTransparency","unshift","format","transparent","Object","keys","sort","inches","feet","yards","miles","millimeters","centimeters","decimeters","meters","kilometers","radius","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","indexOf","keyField","defaultPopupTemplate"],"mappings":"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","file":"layers-MapImageLayerView2D-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{collectArcadeFieldNames as t}from\"../../layers/support/fieldUtils.js\";var p;let i=p=class extends s{async collectRequiredFields(r,o){return t(r,o,this.expression)}clone(){return new p({expression:this.expression,title:this.title})}};r([o({type:String,json:{write:!0}})],i.prototype,\"expression\",void 0),r([o({type:String,json:{write:!0}})],i.prototype,\"title\",void 0),i=p=r([e(\"esri.layers.support.FeatureExpressionInfo\")],i);var c=i;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{strict as t,JSONMap as s}from\"../../core/jsonMap.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as u}from\"../../core/JSONSupport.js\";import a from\"./FeatureExpressionInfo.js\";import{supportedUnits as f}from\"./unitConversionUtils.js\";var l;const m=t()({onTheGround:\"on-the-ground\",relativeToGround:\"relative-to-ground\",relativeToScene:\"relative-to-scene\",absoluteHeight:\"absolute-height\"}),d=new s({foot:\"feet\",kilometer:\"kilometers\",meter:\"meters\",mile:\"miles\",\"us-foot\":\"us-feet\",yard:\"yards\"});let c=l=class extends u{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:\"0\"}:void 0}writeFeatureExpressionInfo(e,r,o,t){r[o]=e.write(null,t),\"0\"===e.expression&&(r.featureExpression={value:0})}get mode(){return this._isOverridden(\"mode\")?this._get(\"mode\"):r(this.offset)||this.featureExpressionInfo?\"relative-to-ground\":\"on-the-ground\"}set mode(e){this._override(\"mode\",e)}set unit(e){this._set(\"unit\",e)}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new l({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};e([o({type:a,json:{write:!0}})],c.prototype,\"featureExpressionInfo\",void 0),e([i(\"featureExpressionInfo\",[\"featureExpressionInfo\",\"featureExpression\"])],c.prototype,\"readFeatureExpressionInfo\",null),e([p(\"featureExpressionInfo\",{featureExpressionInfo:{type:a},\"featureExpression.value\":{type:[0]}})],c.prototype,\"writeFeatureExpressionInfo\",null),e([o({type:m.apiValues,dependsOn:[\"offset\",\"featureExpressionInfo\"],nonNullable:!0,json:{type:m.jsonValues,read:m.read,write:{writer:m.write,isRequired:!0}}})],c.prototype,\"mode\",null),e([o({type:Number,json:{write:!0}})],c.prototype,\"offset\",void 0),e([o({type:f,json:{type:String,read:d.read,write:d.write}})],c.prototype,\"unit\",null),c=l=e([n(\"esri.layers.support.ElevationInfo\")],c);var x=c;export default x;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{init as a}from\"../../../core/watchUtils.js\";import{RefreshableLayerView as o}from\"../../layers/RefreshableLayerView.js\";import{ExportImageParameters as p}from\"../../../layers/support/ExportImageParameters.js\";import m from\"../../layers/LayerView.js\";import{createQueryGeometry as h}from\"../../support/drapedUtils.js\";import{MapImageLayerView as n}from\"../../layers/MapImageLayerView.js\";import{BitmapContainer as d}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as g}from\"./LayerView2D.js\";import u from\"./support/ExportStrategy.js\";const c=t.getLogger(\"esri.views.2d.layers.MapImageLayerView2D\");let l=class extends(n(o(g(m)))){constructor(){super(...arguments),this._exportImageVersion=-1}hitTest(){return null}update(e){this.strategy.update(e).catch((e=>{s(e)||c.error(e)}))}attach(){const{imageMaxWidth:e,imageMaxHeight:t,version:r}=this.layer,i=r>=10.3,s=r>=10;this._bitmapContainer=new d,this.container.addChild(this._bitmapContainer),this.strategy=new u({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:e,imageMaxHeight:t,imageRotationSupported:i,imageNormalizationSupported:s,hidpi:!0}),this.imageParameters=new p({view:this.view,layer:this.layer}),this.handles.add(a(this.imageParameters,\"version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),\"mapimagelayerview-update\")}detach(){this.strategy.destroy(),this.handles.remove(\"mapimagelayerview-update\"),this.imageParameters.destroy(),this.imageParameters=null,this._exportImageVersion=-1,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return h(e,t,this.view)}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.imageParameters.timeExtent,timestamp:this.refreshTimestamp,...i})}};e([r()],l.prototype,\"strategy\",void 0),e([r({dependsOn:[\"strategy.updating\"]})],l.prototype,\"updating\",void 0),l=e([i(\"esri.views.2d.layers.MapImageLayerView2D\")],l);var y=l;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e,n,i){if(n.flatten((({sublayers:e})=>e)).length!==e.length)return!0;return!!e.some((e=>e.originIdOf(\"minScale\")>i||e.originIdOf(\"maxScale\")>i||e.originIdOf(\"renderer\")>i||e.originIdOf(\"labelingInfo\")>i||e.originIdOf(\"opacity\")>i||e.originIdOf(\"labelsVisible\")>i||e.originIdOf(\"source\")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"opacity\")>2||e.originIdOf(\"labelsVisible\")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:n}of e){for(;i<o&&r[i]!==n;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}export{n as isExportDynamic,i as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getProperties as e}from\"../../core/accessorSupport/utils.js\";import{w as i}from\"../../chunks/persistableUrlUtils.js\";import{willPropertyWrite as r}from\"../../core/accessorSupport/write.js\";import{transparencyToOpacity as n}from\"../../webdoc/support/opacityUtils.js\";import t from\"../../TimeExtent.js\";import o from\"../../symbols/support/ElevationInfo.js\";const s={type:Boolean,value:!0,json:{origins:{\"web-scene\":{read:{source:[\"id\",\"url\",\"layerType\"],reader(i,r){if(null!=r.screenSizePerspective||\"defaults\"!==this.originOf(\"screenSizePerspectiveEnabled\"))return r.screenSizePerspective;e(this).store.set(\"screenSizePerspectiveEnabled\",!1,0)}},write:{ignoreOrigin:!0,target:\"screenSizePerspective\",writer(e,i,n,t){(\"defaults\"===this.originOf(\"screenSizePerspectiveEnabled\")&&e||r(this,\"screenSizePerspectiveEnabled\",{},t))&&(i[n]=e)}}}}}},a={type:Boolean,value:!0,json:{name:\"disablePopup\",read:{reader:(e,i)=>!i.disablePopup},write:{enabled:!0,writer(e,i,r){i[r]=!e}}}},l={type:Boolean,value:!0,json:{name:\"showLabels\",write:!0}},p={type:String,json:{origins:{\"portal-item\":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:i}}},c={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:\"showLegend\",write:!0}},d={value:null,type:o,json:{origins:{service:{name:\"elevationInfo\",write:!0}},name:\"layerDefinition.elevationInfo\",write:!0}};function f(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u={type:Number,json:{origins:{\"web-document\":{default:1,write:!0,read:!0},\"portal-item\":{write:!0}}}},y={...u,json:{...u.json,origins:{\"web-document\":{...u.json.origins[\"web-document\"],write:{enabled:!0,target:{opacity:{type:Number},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}},read:{source:[\"layerDefinition.drawingInfo.transparency\",\"drawingInfo.transparency\"],reader:(e,i,r)=>r&&\"service\"!==r.origin||!i.drawingInfo||void 0===i.drawingInfo.transparency?i.layerDefinition&&i.layerDefinition.drawingInfo&&void 0!==i.layerDefinition.drawingInfo.transparency?n(i.layerDefinition.drawingInfo.transparency):void 0:n(i.drawingInfo.transparency)}}},m={type:t,dependsOn:[\"view.timeExtent\",\"layer.timeExtent\",\"layer.timeInfo\",\"layer.timeOffset\",\"layer.timeOffset.value\",\"layer.timeOffset.unit\",\"layer.useViewTime\"],readOnly:!0,get(){var e,i;if(null==(e=this.layer)||!e.timeInfo)return null;const r=null==(i=this.view)?void 0:i.timeExtent,n=this.layer.timeExtent,t=this.layer.useViewTime?r&&n?r.intersection(n):r||n:n;if(!t||t.isEmpty)return t;const o=this.layer.timeOffset,s=o?t.offset(-o.value,o.unit):t,a=this._get(\"timeExtent\");return s.equals(a)?a:s}};export{m as combinedViewLayerTimeExtentProperty,d as elevationInfo,l as labelsVisible,c as legendEnabled,u as opacity,y as opacityDrawingInfo,a as popupEnabled,f as readOnlyService,s as screenSizePerspectiveEnabled,p as url};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t,e){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}(t.stops):e}function n(n){const r=n&&n.renderer,s=\"touch\"===(n&&n.event&&n.event.pointerType)?9:6;if(!r)return s;const o=\"visualVariables\"in r?function(t,n){if(!n)return t;const r=n.filter((t=>\"size\"===t.type)).map((n=>{const{maxSize:r,minSize:s}=n;return(e(r,t)+e(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let t=0;t<o;t++)s+=r[t];const f=Math.floor(s/o);return Math.max(f,t)}(s,r.visualVariables):s;if(\"simple\"===r.type)return t(o,r.symbol);if(\"unique-value\"===r.type){let e=o;return r.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===r.type){let e=o;return r.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return r.type,o}export{n as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as a,all as p,eachAlways as i}from\"../../core/promiseUtils.js\";import{loadArcade as u}from\"../../support/arcadeOnDemand.js\";import{calculateTolerance as c}from\"../../renderers/support/clickToleranceUtils.js\";import{getRequiredFields as l,getFetchPopupTemplate as m}from\"./support/popupUtils.js\";const n=n=>{let d=class extends n{async fetchPopupFeatures(e,t){const{layer:s}=this;if(!e)return a(new o(\"mapimagelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s}));const u=this.get(\"view.scale\"),n=[],d=async e=>{const s=0===e.minScale||u<=e.minScale,o=0===e.maxScale||u>=e.maxScale;if(e.visible&&s&&o)if(e.sublayers)e.sublayers.forEach(d);else if(e.popupEnabled){const s=m(e,{...t,defaultPopupTemplateEnabled:!1});r(s)&&n.push({sublayer:e,popupTemplate:s})}},y=s.sublayers.toArray().map(d);await p(y);const f=n.map((async({sublayer:s,popupTemplate:o})=>{await s.load().catch((()=>{}));const a=s.createQuery(),p=r(t)?t.event:null,i=c({renderer:s.renderer,event:p}),u=this.createFetchPopupFeaturesQueryGeometry(e,i);a.geometry=u,a.outFields=await l(s,o);const m=await this._loadArcadeModules(o);m&&m.arcadeUtils.hasGeometryOperations(o)||(a.maxAllowableOffset=u.width/i);return(await s.queryFeatures(a)).features}));return(await i(f)).reduce(((e,r)=>r.value?[...e,...r.value]:e),[]).filter((e=>null!=e))}canResume(){var e,r;return!!super.canResume()&&(null==(e=this.imageParameters)||null==(r=e.timeExtent)||!r.isEmpty)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return u()}};return e([t()],d.prototype,\"imageParameters\",void 0),e([t()],d.prototype,\"layer\",void 0),e([t({dependsOn:[\"imageParameters.timeExtent\"]})],d.prototype,\"suspended\",void 0),d=e([s(\"esri.views.layers.MapImageLayerView\")],d),d};export{n as MapImageLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import{combinedViewLayerTimeExtentProperty as a}from\"./commonProperties.js\";import{HandleOwnerMixin as t}from\"../../core/HandleOwner.js\";import{isExportDynamic as l}from\"./sublayerUtils.js\";import n from\"../../views/View.js\";const o={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let y=class extends(t(i)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&l(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(o[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,s)=>(e[s.id]=s.definitionExpression,e)),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const s=e.layer;return s&&(s.dpi,s.imageFormat,s.imageTransparency,s.gdbVersion),(this._get(\"version\")||0)+1}set version(e){this._set(\"version\",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const s=this.layer.sublayers,r=s=>{const i=this.scale,a=0===i,t=0===s.minScale||i<=s.minScale,l=0===s.maxScale||i>=s.maxScale;s.visible&&(a||t&&l)&&(s.sublayers?s.sublayers.forEach(r):e.unshift(s))};s&&s.forEach(r);const i=this._get(\"visibleSublayers\");return!i||i.length!==e.length||i.some(((s,r)=>e[r]!==s))?e:i}toJSON(){const e=this.layer;let s={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?s.dynamicLayers=this.dynamicLayers:s={...s,layers:this.layers,layerDefs:this.layerDefs},s}};e([s({readOnly:!0,dependsOn:[\"hasDynamicLayers\",\"visibleSublayers\"]})],y.prototype,\"dynamicLayers\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\",\"layer.serviceSublayers\",\"layer.capabilities\"]})],y.prototype,\"hasDynamicLayers\",null),e([s()],y.prototype,\"layer\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],y.prototype,\"layers\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],y.prototype,\"layerDefs\",null),e([s({type:Number,dependsOn:[\"view.scale\"]})],y.prototype,\"scale\",null),e([s(a)],y.prototype,\"timeExtent\",void 0),e([s({dependsOn:[\"layers\",\"layerDefs\",\"dynamicLayers\",\"layer.dpi\",\"layer.imageFormat\",\"layer.imageTransparency\",\"layer.gdbVersion\",\"timeExtent\"]})],y.prototype,\"version\",null),e([s({type:n})],y.prototype,\"view\",void 0),e([s({readOnly:!0,dependsOn:[\"layer.sublayers\",\"scale\"]})],y.prototype,\"visibleSublayers\",null),y=e([r(\"esri.layers.mixins.ExportImageParameters\")],y);export{y as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{meterIn as t}from\"../../renderers/support/lengthUtils.js\";function n(n){return null!=t[n]}function r(n){return 1/(t[n]||1)}const e=function(){const n=Object.keys(t);return n.sort(),n}();export{r as getMetersPerUnit,e as supportedUnits,n as supportsUnit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{earth as e}from\"../../geometry/support/Ellipsoid.js\";import{convertUnit as s,lengthToDegrees as t}from\"../../core/unitUtils.js\";const m={inches:s(1,\"meters\",\"inches\"),feet:s(1,\"meters\",\"feet\"),\"us-feet\":s(1,\"meters\",\"us-feet\"),yards:s(1,\"meters\",\"yards\"),miles:s(1,\"meters\",\"miles\"),\"nautical-miles\":s(1,\"meters\",\"nautical-miles\"),millimeters:s(1,\"meters\",\"millimeters\"),centimeters:s(1,\"meters\",\"centimeters\"),decimeters:s(1,\"meters\",\"decimeters\"),meters:s(1,\"meters\",\"meters\"),kilometers:s(1,\"meters\",\"kilometers\"),\"decimal-degrees\":1/t(1,\"meters\",e.radius)};export{m as meterIn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n"]}