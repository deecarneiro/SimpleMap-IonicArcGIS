{"version":3,"sources":["webpack:///node_modules/@arcgis/core/layers/support/WMTSSublayer.js","webpack:///node_modules/@arcgis/core/layers/support/TileMatrixSet.js","webpack:///node_modules/@arcgis/core/layers/support/WMTSStyle.js","webpack:///node_modules/@arcgis/core/layers/support/wmtsUtils.js","webpack:///node_modules/@arcgis/core/layers/WMTSLayer.js"],"names":["p","m","t","fullExtent","imageFormats","id","layer","styles","tileMatrixSetId","tileMatrixSets","_get","_set","e","fromJSON","length","indexOf","console","error","getItemAt","find","hasOwnProperty","description","slice","imageFormat","clone","styleId","title","prototype","dependsOn","json","read","source","type","ofType","value","write","ignoreOrigin","readOnly","h","l","tileInfo","String","n","i","r","legendUrl","isDefault","keywords","s","a","replace","DOMParser","parseFromString","documentElement","Map","d","g","c","x","y","querySelector","T","getElementsByTagName","w","Array","call","M","url","E","S","V","serviceMode","b","some","f","attributes","nodeValue","getAttribute","A","substring","copyright","layers","map","set","u","split","xmin","parseFloat","ymin","xmax","ymax","spatialReference","wkid","toLowerCase","parseInt","pop","o","Number","Math","pow","forEach","push","resolution","toJSON","dpi","size","origin","lods","formats","tileUrl","layerMap","dimensionMap","scale","textContent","childNodes","nodeName","get","dimensions","dimensions2","template","format","resourceType","level","levelValue","values","PI","metersPerDegree","_","Set","O","_sublayersHandles","customParameters","customLayerParameters","operationalLayerType","resourceInfo","sublayers","version","watch","removeAll","add","on","item","addResolvingPromise","loadFromPortal","supportedTypes","then","_fetchService","activeLayer","templateUrl","wmtsInfo","_getLowerCasedUrlParams","layerIdentifier","tileMatrixSet","isArray","style","getUrlTemplate","_mergeParams","toArray","_override","_clearOverride","substr","_getTileMatrixSetById","urlTemplate","getTileUrl","responseType","data","_appendCustomLayerParameters","ssl","_getCapabilities","_getCapabilitiesUrl","findSublayerById","encodeURIComponent","_appendCustomParameters","query","Object","keys","has","origins","target","service","C"],"mappings":"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","file":"WMTSLayer-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as r}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import o from\"../../geometry/Extent.js\";import l from\"../../core/Collection.js\";import a from\"./TileMatrixSet.js\";import n from\"./WMTSStyle.js\";var p;let m=p=class extends i{constructor(t){super(t),this.fullExtent=null,this.imageFormats=null,this.id=null,this.layer=null,this.styles=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}get description(){return this._get(\"description\")}set description(t){this._set(\"description\",t)}readFullExtent(t,e){return(t=e.fullExtent)?o.fromJSON(t):null}get imageFormat(){let t=this._get(\"imageFormat\");return t||(t=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:\"\"),t}set imageFormat(t){const e=this.imageFormats;t&&(t.indexOf(\"image/\")>-1||e&&-1===e.indexOf(t))&&(-1===t.indexOf(\"image/\")&&(t=\"image/\"+t),e&&-1===e.indexOf(t))?console.error(\"The layer doesn't support the format of \"+t):this._set(\"imageFormat\",t)}get styleId(){let t=this._get(\"styleId\");return t||(t=this.styles&&this.styles.length?this.styles.getItemAt(0).id:\"\"),t}set styleId(t){this._set(\"styleId\",t)}get title(){return this._get(\"title\")}set title(t){this._set(\"title\",t)}get tileMatrixSet(){return this.tileMatrixSets?this.tileMatrixSets.find((t=>t.id===this.tileMatrixSetId)):null}clone(){const t=new p;return this.hasOwnProperty(\"description\")&&(t.description=this.description),this.hasOwnProperty(\"imageFormats\")&&(t.imageFormats=this.imageFormats&&this.imageFormats.slice()),this.hasOwnProperty(\"imageFormat\")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"layer\")&&(t.layer=this.layer),this.hasOwnProperty(\"styleId\")&&(t.styleId=this.styleId),this.hasOwnProperty(\"styles\")&&(t.styles=this.styles&&this.styles.clone()),this.hasOwnProperty(\"tileMatrixSetId\")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty(\"tileMatrixSets\")&&(t.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty(\"title\")&&(t.title=this.title),t}};t([e()],m.prototype,\"description\",null),t([e()],m.prototype,\"fullExtent\",void 0),t([r(\"fullExtent\",[\"fullExtent\"])],m.prototype,\"readFullExtent\",null),t([e({dependsOn:[\"imageFormats\"]})],m.prototype,\"imageFormat\",null),t([e({json:{read:{source:\"formats\"}}})],m.prototype,\"imageFormats\",void 0),t([e()],m.prototype,\"id\",void 0),t([e()],m.prototype,\"layer\",void 0),t([e({dependsOn:[\"styles\"]})],m.prototype,\"styleId\",null),t([e({type:l.ofType(n),json:{read:{source:\"styles\"}}})],m.prototype,\"styles\",void 0),t([e({value:null,json:{write:{ignoreOrigin:!0}}})],m.prototype,\"title\",null),t([e()],m.prototype,\"tileMatrixSetId\",void 0),t([e({readOnly:!0,dependsOn:[\"tileMatrixSetId\"]})],m.prototype,\"tileMatrixSet\",null),t([e({type:l.ofType(a),json:{read:{source:\"tileMatrixSets\"}}})],m.prototype,\"tileMatrixSets\",void 0),m=p=t([s(\"esri.layers.support.WMTSSublayer\")],m);var h=m;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import s from\"../../geometry/Extent.js\";import i from\"./TileInfo.js\";var p;let l=p=class extends e{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new p;return this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"tileInfo\")&&(t.tileInfo=this.tileInfo&&this.tileInfo.clone()),t}};t([o({type:s,json:{read:{source:\"fullExtent\"}}})],l.prototype,\"fullExtent\",void 0),t([o({type:String,json:{read:{source:\"id\"}}})],l.prototype,\"id\",void 0),t([o({type:i,json:{read:{source:\"tileInfo\"}}})],l.prototype,\"tileInfo\",void 0),l=p=t([r(\"esri.layer.support.TileMatrixSet\")],l);var n=l;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";var t;let i=t=class extends s{constructor(r){super(r),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const r=new t;return this.hasOwnProperty(\"description\")&&(r.description=this.description),this.hasOwnProperty(\"id\")&&(r.id=this.id),this.hasOwnProperty(\"isDefault\")&&(r.isDefault=this.isDefault),this.hasOwnProperty(\"keywords\")&&(r.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty(\"legendUrl\")&&(r.legendUrl=this.legendUrl),this.hasOwnProperty(\"title\")&&(r.title=this.title),r}};r([e({json:{read:{source:\"id\"}}})],i.prototype,\"id\",void 0),r([e({json:{read:{source:\"title\"}}})],i.prototype,\"title\",void 0),r([e({json:{read:{source:\"abstract\"}}})],i.prototype,\"description\",void 0),r([e({json:{read:{source:\"legendUrl\"}}})],i.prototype,\"legendUrl\",void 0),r([e({json:{read:{source:\"isDefault\"}}})],i.prototype,\"isDefault\",void 0),r([e({json:{read:{source:\"keywords\"}}})],i.prototype,\"keywords\",void 0),i=t=r([o(\"esri.layer.support.WMTSStyle\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import t from\"../../geometry/support/WKIDUnitConversion.js\";import i from\"../../geometry/SpatialReference.js\";import n from\"../../geometry/Point.js\";import r from\"../../geometry/Extent.js\";import{getReferenceEllipsoidFromWKID as l}from\"../../geometry/projectionEllipsoid.js\";import o from\"./TileInfo.js\";const s=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function a(t,l){t=t.replace(/ows:/gi,\"\");const a=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,p=new Map,d=new Map,g=c(\"Contents\",a);if(!g)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const x=c(\"OperationsMetadata\",a),y=x&&x.querySelector(\"[name='GetTile']\"),T=y&&y.getElementsByTagName(\"Get\"),w=T&&Array.prototype.slice.call(T),M=l&&l.url&&l.url.indexOf(\"https\")>-1;let E,S,V=l.serviceMode,b=l&&l.url;if(w&&w.length&&w.some((e=>{const t=c(\"Constraint\",e);return!t||f(\"AllowedValues\",\"Value\",V,t)?(b=e.attributes[0].nodeValue,!0):(!t||f(\"AllowedValues\",\"Value\",\"RESTful\",t)||f(\"AllowedValues\",\"Value\",\"REST\",t)?S=e.attributes[0].nodeValue:t&&!f(\"AllowedValues\",\"Value\",\"KVP\",t)||(E=e.attributes[0].nodeValue),!1)})),!b)if(S)b=S,V=\"RESTful\";else if(E)b=E,V=\"KVP\";else{const e=c(\"ServiceMetadataURL\",a);b=e&&e.getAttribute(\"xlink:href\")}const A=b.indexOf(\"1.0.0/\");-1===A&&\"RESTful\"===V?b+=\"/\":A>-1&&(b=b.substring(0,A)),\"KVP\"===V&&(b+=A>-1?\"\":\"?\"),M&&(b=b.replace(/^http:/i,\"https:\"));return{copyright:m(\"ServiceIdentification>AccessConstraints\",a),layers:Array.prototype.slice.call(g.getElementsByTagName(\"Layer\")).map((e=>{const t=m(\"Identifier\",e);return p.set(t,e),function(e,t,l,a){const p=m(\"Abstract\",t),d=u(\"Format\",t),g=function(e){const t=c(\"WGS84BoundingBox\",e),i=t?m(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],n=t?m(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(i[0]),ymin:parseFloat(i[1]),xmax:parseFloat(n[0]),ymax:parseFloat(n[1]),spatialReference:{wkid:4326}}}(t),x=function(e,t){return Array.prototype.slice.call(e.getElementsByTagName(\"Style\")).map((e=>{const i=c(\"LegendURL\",e),n=c(\"Keywords\",e),r=n&&u(\"Keyword\",n);let l=i&&i.getAttribute(\"xlink:href\");t&&(l=l&&l.replace(/^http:/i,\"https:\"));return{abstract:m(\"Abstract\",e),id:m(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:l,title:m(\"Title\",e)}}))}(t,a),y=m(\"Title\",t),T=function(e,t){return u(\"TileMatrixSet\",e).map((l=>function(e,t,l){const a=u(\"TileMatrix\",f(\"TileMatrixSetLink\",\"TileMatrixSet\",e,t)),p=f(\"TileMatrixSet\",\"Identifier\",e,l),d=function(e){let t=m(\"SupportedCRS\",e);t&&(t=t.toLowerCase());let r=parseInt(t.split(\":\").pop(),10);900913!==r&&3857!==r||(r=102100);let l=!1;t.indexOf(\"crs84\")>-1||t.indexOf(\"crs:84\")>-1?(r=4326,l=!0):t.indexOf(\"crs83\")>-1||t.indexOf(\"crs:83\")>-1?(r=4269,l=!0):(t.indexOf(\"crs27\")>-1||t.indexOf(\"crs:27\")>-1)&&(r=4267,l=!0);const o=new i({wkid:r}),a=m(\"TopLeftCorner\",c(\"TileMatrix\",e)).split(\" \"),p=a[0].split(\"E\").map((e=>Number(e))),u=a[1].split(\"E\").map((e=>Number(e)));let f,d=p[0],g=u[0];p.length>1&&(d=p[0]*Math.pow(10,p[1]));u.length>1&&(g=u[0]*Math.pow(10,u[1]));const x=l&&4326===r&&90===d&&-180===g;return s.some(((e,i)=>{const a=Number(t.split(\":\").pop());return a>=e[0]&&a<=e[1]||4326===r&&(!l||x)?(f=new n(g,d,o),!0):(i===s.length-1&&(f=new n(d,g,o)),!1)})),f}(p),g=d.spatialReference,x=g.wkid,y=c(\"TileMatrix\",p),T=[parseInt(m(\"TileWidth\",y),10),parseInt(m(\"TileHeight\",y),10)],w=[];if(a.length)a.forEach(((t,i)=>{const n=f(\"TileMatrix\",\"Identifier\",t,p);w.push(h(n,x,i,e))}));else{Array.prototype.slice.call(p.getElementsByTagName(\"TileMatrix\")).forEach(((t,i)=>{w.push(h(t,x,i,e))}))}const M=function(e,t,i,n){const l=c(\"BoundingBox\",e);let o,s,a,p,u,f;l&&(o=m(\"LowerCorner\",l).split(\" \"),s=m(\"UpperCorner\",l).split(\" \"));if(o&&o.length>1&&s&&s.length>1)a=parseFloat(o[0]),u=parseFloat(o[1]),p=parseFloat(s[0]),f=parseFloat(s[1]);else{const r=c(\"TileMatrix\",e),l=parseFloat(m(\"MatrixWidth\",r)),o=parseFloat(m(\"MatrixHeight\",r));a=t.x,f=t.y,p=a+l*i[0]*n.resolution,u=f-o*i[1]*n.resolution}return new r(a,u,p,f,t.spatialReference)}(p,d,T,w[0]);return{id:e,fullExtent:M.toJSON(),tileInfo:new o({dpi:96,spatialReference:g,size:T,origin:d,lods:w}).toJSON()}}(l,e,t)))}(t,l);return{id:e,fullExtent:g,description:p,formats:d,styles:x,title:y,tileMatrixSets:T}}(t,e,g,M)})),tileUrl:b,serviceMode:V,layerMap:p,dimensionMap:d}}function p(e){return e.layers.forEach((e=>{e.tileMatrixSets.forEach((e=>{const t=e.tileInfo;96!==t.dpi&&(t.lods.forEach((i=>{i.scale=96*i.scale/t.dpi,i.resolution=y(t.spatialReference.wkid,90.71428571428571*i.scale/96,e.id)})),t.dpi=96)}))})),e}function c(e,t){const i=t.getElementsByTagName(e);return i&&i.length>0?i[0]:null}function u(e,t){return Array.prototype.slice.call(t.getElementsByTagName(e)).map((e=>e.textContent))}function m(e,t){return e.split(\">\").forEach((e=>{t&&(t=c(e,t))})),t&&t.textContent}function f(e,t,i,n){let r;return Array.prototype.slice.call(n.childNodes).some((n=>{if(n.nodeName.indexOf(e)>-1){const e=c(t,n),l=e&&e.textContent;if(l===i||i.split(\":\")&&i.split(\":\")[1]===l)return r=n,!0}return!1})),r}function d(e,t){const i=[],n=e.layerMap.get(t);if(!n)return;const r=Array.prototype.slice.call(n.getElementsByTagName(\"ResourceURL\")),l=n.getElementsByTagName(\"Dimension\");let o,s,a,p;return l.length&&(o=m(\"Identifier\",l[0]),s=u(\"Default\",l[0])||u(\"Value\",l[0])),l.length>1&&(a=m(\"Identifier\",l[1]),p=u(\"Default\",l[1])||u(\"Value\",l[1])),e.dimensionMap.set(t,{dimensions:s,dimensions2:p}),r.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(o&&s.length)if(t.indexOf(\"{\"+o+\"}\")>-1)t=t.replace(\"{\"+o+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+o.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+o.length+2))}if(a&&p.length)if(t.indexOf(\"{\"+a+\"}\")>-1)t=t.replace(\"{\"+a+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+a.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+a.length+2))}i.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),i}function g(e,t,i,n,r,l,o,s){const{dimensionMap:a}=e,p=d(e,t),c=a.get(t).dimensions&&a.get(t).dimensions[0],u=a.get(t).dimensions2&&a.get(t).dimensions2[0];let m=\"\";if(p&&p.length>0){let e=null;p.some((t=>t.format===n&&(e=t,!0))),e||(e=p[o%p.length]),m=e.template.replace(/\\{Style\\}/gi,r).replace(/\\{TileMatrixSet\\}/gi,i).replace(/\\{TileMatrix\\}/gi,l).replace(/\\{TileRow\\}/gi,\"\"+o).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,c).replace(/\\{dimensionValue2\\}/gi,u)}return m}function x(e,t,i,n){const{dimensionMap:r}=e,l=d(e,t);let o=\"\";if(l&&l.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];o=l[0].template,o.indexOf(\".xxx\")===o.length-4&&(o=o.slice(0,o.length-4)),o=o.replace(/\\{Style\\}/gi,n),o=o.replace(/\\{TileMatrixSet\\}/gi,i),o=o.replace(/\\{TileMatrix\\}/gi,\"{level}\"),o=o.replace(/\\{TileRow\\}/gi,\"{row}\"),o=o.replace(/\\{TileCol\\}/gi,\"{col}\"),o=o.replace(/\\{dimensionValue\\}/gi,e),o=o.replace(/\\{dimensionValue2\\}/gi,s)}return o}function h(e,t,i,n){const r=m(\"Identifier\",e),l=m(\"ScaleDenominator\",e).split(\"E\").map((e=>Number(e)));let o;o=l.length>1?l[0]*Math.pow(10,l[1]):l[0];const s=y(t,o,n);return o*=1.058267716535433,{level:i,levelValue:r,scale:o,resolution:s}}function y(e,i,n){let r;return r=t.hasOwnProperty(String(e))?t.values[t[e]]:\"default028mm\"===n?6370997*Math.PI/180:l(e).metersPerDegree,7*i/25e3/r}export{g as getTileUrlFromResourceUrls,x as getTileUrlTemplateFromResourceUrls,a as parseCapabilities,p as parseResourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{clone as t}from\"../core/lang.js\";import{getDeepValue as r}from\"../core/object.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../core/accessorSupport/decorators/writer.js\";import l from\"../core/Error.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{resolve as m}from\"../core/promiseUtils.js\";import c from\"../geometry/Extent.js\";import p from\"../core/Collection.js\";import u from\"../request.js\";import y from\"../core/Handles.js\";import d from\"./Layer.js\";import{MultiOriginJSONMixin as h}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as f}from\"./mixins/OperationalLayer.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{PortalLayer as g}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as L}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as w}from\"./mixins/ScaleRangeLayer.js\";import I from\"./support/TileInfo.js\";import S from\"./support/WMTSLayerInfo.js\";import M from\"./WebTileLayer.js\";import P from\"./support/WMTSSublayer.js\";import{getTileUrlFromResourceUrls as T,getTileUrlTemplateFromResourceUrls as b,parseCapabilities as j,parseResourceInfo as x}from\"./support/wmtsUtils.js\";const E={\"image/png\":\".png\",\"image/png8\":\".png\",\"image/png24\":\".png\",\"image/png32\":\".png\",\"image/jpg\":\".jpg\",\"image/jpeg\":\".jpeg\",\"image/gif\":\".gif\",\"image/bmp\":\".bmp\",\"image/tiff\":\".tif\",\"image/jpgpng\":\"\",\"image/jpegpng\":\"\",\"image/unknown\":\"\"},_=new Set([\"version\",\"service\",\"request\",\"layer\",\"style\",\"format\",\"tilematrixset\",\"tilematrix\",\"tilerow\",\"tilecol\"]);let O=class extends(v(L(w(f(g(h(d))))))){constructor(...e){super(...e),this._sublayersHandles=new y,this.copyright=\"\",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType=\"WebTiledLayer\",this.resourceInfo=null,this.serviceMode=\"RESTful\",this.sublayers=null,this.type=\"wmts\",this.version=\"1.0.0\",this.watch(\"activeLayer\",((e,t)=>{t&&(t.layer=null),e&&(e.layer=this)}),!0),this.watch(\"sublayers\",((e,t)=>{t&&(t.forEach((e=>{e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((e=>{e.layer=this})),this._sublayersHandles||(this._sublayersHandles=new y),this._sublayersHandles.add([e.on(\"after-add\",(({item:e})=>{e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.layer=null}))]))}),!0)}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(\"KVP\"===this.serviceMode||\"RESTful\"===this.serviceMode)return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).then((()=>this._fetchService(e))).catch((e=>{throw new l(\"wmtslayer:unsupported-service-data\",\"Invalid response from the WMTS service.\",{error:e})}))),m(this);console.error(\"WMTS mode could only be 'KVP' or 'RESTful'\")}get activeLayer(){return this._get(\"activeLayer\")}set activeLayer(e){this._set(\"activeLayer\",e)}readActiveLayerFromService(e,t,r){let s;return this.activeLayer?t.layers.some((e=>e.id===this.activeLayer.id&&(s=e,!0))):(this.activeLayer=new P,s=t.layers[0]),this.activeLayer.read(s,r),this.activeLayer}readActiveLayerFromItemOrWebDoc(e,t){const{templateUrl:r,wmtsInfo:s}=t,i=r?this._getLowerCasedUrlParams(r):null,a=s&&s.layerIdentifier;let o=null;const l=s&&s.tileMatrixSet;l&&(Array.isArray(l)?l.length&&(o=l[0]):o=l);const n=i&&i.format,m=i&&i.style;return new P({id:a,imageFormat:n,styleId:m,tileMatrixSetId:o})}writeActiveLayer(e,t,s,i){const a=this.activeLayer;t.templateUrl=this.getUrlTemplate(a.id,a.tileMatrixSetId,a.imageFormat,a.styleId);const o=r(\"tileMatrixSet.tileInfo\",a);t.tileInfo=o?o.toJSON(i):null,t.wmtsInfo={...t.wmtsInfo,layerIdentifier:a.id,tileMatrixSet:a.tileMatrixSetId}}readCustomParameters(e,t){const r=t.wmtsInfo;return r?this._mergeParams(r.customParameters,r.url):null}get fullExtents(){const e=[];return this.activeLayer.tileMatrixSets.forEach((t=>{t.fullExtent&&e.push(t.fullExtent)})),e}readServiceMode(e,t){return t.templateUrl.indexOf(\"?\")>-1?\"KVP\":\"RESTful\"}readSublayersFromService(e,t,r){return function(e,t){return e.map((e=>{const r=new P;return r.read(e,t),r}))}(t.layers,r)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets.map((e=>e.tileInfo.spatialReference)).toArray()}get title(){var e,t;return null!=(e=null==(t=this.activeLayer)?void 0:t.title)?e:\"Layer\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return this._get(\"url\")}set url(e){e&&\"/\"===e.substr(-1)?this._set(\"url\",e.slice(0,-1)):this._set(\"url\",e)}createWebTileLayer(e){const t=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),r=this._getTileMatrixSetById(e.tileMatrixSetId).tileInfo,s=e.fullExtent,i=new S({layerIdentifier:e.id,tileMatrixSet:e.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(i.customLayerParameters=this.customLayerParameters),this.customParameters&&(i.customParameters=this.customParameters),new M({fullExtent:s,urlTemplate:t,tileInfo:r,wmtsInfo:i})}fetchTile(e,t,r){const s=this.getTileUrl(e,t,r);return u(s,{responseType:\"image\"}).then((e=>e.data))}findSublayerById(e){return this.sublayers.find((t=>t.id===e))}getTileUrl(e,t,r){const s=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[e],i=s?s.levelValue?s.levelValue:`${s.level}`:`${e}`;let a=this.resourceInfo?\"\":T({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,i,t,r);if(!a){a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\\{level\\}/gi,i).replace(/\\{row\\}/gi,`${t}`).replace(/\\{col\\}/gi,`${r}`)}return a=this._appendCustomLayerParameters(a),a}getUrlTemplate(e,t,r,s){if(!this.resourceInfo){const r=b({dimensionMap:this.dimensionMap,layerMap:this.layerMap},e,t,s);if(r)return r}if(\"KVP\"===this.serviceMode)return this.url+\"?SERVICE=WMTS&VERSION=\"+this.version+\"&REQUEST=GetTile&LAYER=\"+e+\"&STYLE=\"+s+\"&FORMAT=\"+r+\"&TILEMATRIXSET=\"+t+\"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}\";if(\"RESTful\"===this.serviceMode){let i=\"\";return E[r.toLowerCase()]&&(i=E[r.toLowerCase()]),this.url+e+\"/\"+s+\"/\"+t+\"/{level}/{row}/{col}\"+i}return\"\"}async _fetchService(e){let t;if(this.resourceInfo)\"KVP\"===this.resourceInfo.serviceMode&&(this.url+=this.url.indexOf(\"?\")>-1?\"\":\"?\"),t={ssl:!1,data:this.resourceInfo};else try{t=await this._getCapabilities(this.serviceMode,e)}catch{const r=\"KVP\"===this.serviceMode?\"RESTful\":\"KVP\";try{t=await this._getCapabilities(r,e),this.serviceMode=r}catch(e){throw new l(\"wmtslayer:unsupported-service-data\",\"Services does not support RESTful or KVP service modes.\",{error:e})}}this.resourceInfo?t.data=x(t.data):t.data=j(t.data,{serviceMode:this.serviceMode,url:this.url}),t.data&&this.read(t.data,{origin:\"service\"})}async _getCapabilities(e,t){const r=this._getCapabilitiesUrl(e);return await u(r,{...t,responseType:\"text\"})}_getTileMatrixSetById(e){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find((t=>t.id===e))}_appendCustomParameters(e){if(this.customParameters)for(const t in this.customParameters)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(this.customParameters[t]);return e}_appendCustomLayerParameters(e){if(this.customLayerParameters||this.customParameters){const r={...t(this.customParameters||{}),...this.customLayerParameters};for(const t in r)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(r[t])}return e}_getCapabilitiesUrl(e){let t;return this.url=this.url.split(\"?\")[0],\"KVP\"===e?t=this.url+\"?request=GetCapabilities&service=WMTS&version=\"+this.version:\"RESTful\"===e&&(t=this.url+\"/\"+this.version+\"/WMTSCapabilities.xml\"),t=this._appendCustomParameters(t),t}_getLowerCasedUrlParams(e){if(!e)return null;const t=n(e).query;if(!t)return null;const r={};return Object.keys(t).forEach((e=>{r[e.toLowerCase()]=t[e]})),r}_mergeParams(e,r){const s=this._getLowerCasedUrlParams(r);if(s){const r=Object.keys(s);r.length&&(e=e?t(e):{},r.forEach((t=>{e.hasOwnProperty(t)||_.has(t)||(e[t]=s[t])})))}return e}};e([s()],O.prototype,\"dimensionMap\",void 0),e([s()],O.prototype,\"layerMap\",void 0),e([s({type:P,dependsOn:[\"sublayers\"],json:{origins:{\"web-document\":{write:{ignoreOrigin:!0}}}}})],O.prototype,\"activeLayer\",null),e([i(\"service\",\"activeLayer\",[\"layers\"])],O.prototype,\"readActiveLayerFromService\",null),e([i([\"web-document\",\"portal-item\"],\"activeLayer\",[\"wmtsInfo\"])],O.prototype,\"readActiveLayerFromItemOrWebDoc\",null),e([o([\"web-document\",\"portal-item\"],\"activeLayer\",{templateUrl:{type:String},tileInfo:{type:I},\"wmtsInfo.layerIdentifier\":{type:String},\"wmtsInfo.tileMatrixSet\":{type:String}})],O.prototype,\"writeActiveLayer\",null),e([s({type:String,value:\"\",json:{write:!0}})],O.prototype,\"copyright\",void 0),e([s({type:[\"show\",\"hide\"]})],O.prototype,\"listMode\",void 0),e([s({json:{origins:{\"web-document\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}},\"portal-item\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}}}}})],O.prototype,\"customParameters\",void 0),e([i(\"web-document\",\"customParameters\"),i(\"portal-item\",\"customParameters\")],O.prototype,\"readCustomParameters\",null),e([s({json:{origins:{\"web-document\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}},\"portal-item\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}}}}})],O.prototype,\"customLayerParameters\",void 0),e([s({type:c,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{read:{source:\"fullExtent\"}},\"portal-item\":{read:{source:\"fullExtent\"}}}}})],O.prototype,\"fullExtent\",void 0),e([s({readOnly:!0,dependsOn:[\"activeLayer\"]})],O.prototype,\"fullExtents\",null),e([s({type:[\"WebTiledLayer\"]})],O.prototype,\"operationalLayerType\",void 0),e([s()],O.prototype,\"resourceInfo\",void 0),e([s()],O.prototype,\"serviceMode\",void 0),e([i([\"portal-item\",\"web-document\"],\"serviceMode\",[\"templateUrl\"])],O.prototype,\"readServiceMode\",null),e([s({type:p.ofType(P)})],O.prototype,\"sublayers\",void 0),e([i(\"service\",\"sublayers\",[\"layers\"])],O.prototype,\"readSublayersFromService\",null),e([s({readOnly:!0,dependsOn:[\"activeLayer\"]})],O.prototype,\"supportedSpatialReferences\",null),e([s({dependsOn:[\"activeLayer\"],json:{read:{source:\"title\"}}})],O.prototype,\"title\",null),e([s({json:{read:!1},readOnly:!0,value:\"wmts\"})],O.prototype,\"type\",void 0),e([s({json:{origins:{service:{read:{source:\"tileUrl\"}},\"web-document\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}},\"portal-item\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}}}}})],O.prototype,\"url\",null),e([s()],O.prototype,\"version\",void 0),O=e([a(\"esri.layers.WMTSLayer\")],O);var C=O;export default C;\n"]}