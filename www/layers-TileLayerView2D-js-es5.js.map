{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js","webpack:///node_modules/@arcgis/core/views/support/drapedUtils.js","webpack:///node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","webpack:///node_modules/@arcgis/core/views/layers/TileLayerView.js","webpack:///node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js"],"names":["r","s","t","e","triangleCountReportedInDebug","transforms","dvs","tileMat3","triangleCount","key","bounds","size","coordRange","texture","dispose","_coords","_bounds","o","i","resolution","pixelRatio","toScreenNoRotation","coords","n","h","a","d","displayViewMat3","type","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","m","x","p","y","c","l","f","xmin","Math","min","ymin","xmax","max","ymax","toMap","intersects","w","getLogger","_","I","arguments","_tileStrategy","_fetchQueue","layer","tileInfo","view","watch","refresh","addResolvingPromise","resampling","pause","state","update","resume","notifyChange","tileServers","_tileInfoView","fullExtent","tileInfoView","concurrency","length","process","fetchTile","cachePolicy","acquireTile","releaseTile","requestUpdate","container","requestRender","destroy","clear","removeAllChildren","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","_bitmapView","createTile","bitmap","getTileCoords","getTileResolution","width","height","addChild","abort","id","removeChild","once","tilemapCache","signal","_fetchImage","_createBlankImage","fetchAvailabilityUpsample","level","row","col","u","_resampleImage","has","push","source","error","timestamp","refreshTimestamp","getLODInfoAt","getXForColumn","getYForRow","g","round","getContext","drawImage","document","createElement","dependsOn","prototype","T","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","map","createQuery","event","renderer","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","xoffset","abs","yoffset","stops","pointerType","maxSize","minSize","floor","visualVariables","symbol","uniqueValueInfos","classBreakInfos","sortChildren","setStencilReference","requiredLevel","getClosestInfoForScale","scale","displayLevel","scaleToZoom","registerRenderPass","name","brushes","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","children","setTransform","stencilRef"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;UACoOA,C;;;;;AAAY,mBAAYC,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB,EAAsB;AAAA;;AAAA,cAAJH,EAAI,uEAAFG,CAAE;;AAAA;;AAAC,qCAAQ,MAAKC,4BAAL,GAAkC,CAA1C,EAA4C,MAAKC,UAAL,GAAgB;AAACC,eAAG,EAAC,8DAAL;AAASC,oBAAQ,EAAC;AAAlB,WAA5D,EAAmF,MAAKC,aAAL,GAAmB,CAAtG,EAAwG,MAAKC,GAAL,GAAS,IAAI,0DAAJ,CAAMR,CAAN,CAAjH,EAA0H,MAAKS,MAAL,GAAYR,CAAtI,EAAwI,MAAKS,IAAL,GAAUR,CAAlJ,EAAoJ,MAAKS,UAAL,GAAgBZ,EAApK;AAAD;AAAuK;;;;iBAAA,mBAAS;AAAC,iBAAKa,OAAL,KAAe,KAAKA,OAAL,CAAaC,OAAb,IAAuB,KAAKD,OAAL,GAAa,IAAnD;AAAyD;;;eAAA,eAAY;AAAC,mBAAO,KAAKE,OAAZ;AAAoB;;;eAAA,eAAY;AAAC,mBAAO,KAAKC,OAAZ;AAAoB,W;eAAA,aAAWf,CAAX,EAAa;AAAC,iBAAKc,OAAL,GAAa,CAACd,CAAC,CAAC,CAAD,CAAF,EAAMA,CAAC,CAAC,CAAD,CAAP,CAAb,EAAyB,KAAKe,OAAL,GAAaf,CAAtC;AAAwC;;;iBAAA,sBAAagB,CAAb,EAAeC,CAAf,EAAiB;AAAO,gBAAAf,CAAC,GAACe,CAAC,IAAED,CAAC,CAACE,UAAF,GAAaF,CAAC,CAACG,UAAjB,CAAH;AAAA,gBAAgCpB,GAAhC,GAAkC,KAAKK,UAAL,CAAgBE,QAAlD;AAAA,wCAAiEU,CAAC,CAACI,kBAAF,CAAqB,CAAC,CAAD,EAAG,CAAH,CAArB,EAA2B,KAAKC,MAAhC,CAAjE;AAAA;AAAA,gBAA4DC,CAA5D;AAAA,gBAA8DC,CAA9D;AAAA,gBAAyGC,CAAzG,GAA2G,KAAKd,IAAL,CAAU,CAAV,IAAa,KAAKC,UAAL,CAAgB,CAAhB,CAAb,GAAgCT,CAA3I;AAAA,gBAA6IuB,CAA7I,GAA+I,KAAKf,IAAL,CAAU,CAAV,IAAa,KAAKC,UAAL,CAAgB,CAAhB,CAAb,GAAgCT,CAA/K;;AAAiL,sEAAEH,GAAF,EAAIyB,CAAJ,EAAM,CAAN,EAAQ,CAAR,EAAU,CAAV,EAAYC,CAAZ,EAAc,CAAd,EAAgBH,CAAhB,EAAkBC,CAAlB,EAAoB,CAApB,GAAuB,0DAAE,KAAKnB,UAAL,CAAgBC,GAAlB,EAAsBW,CAAC,CAACU,eAAxB,EAAwC3B,GAAxC,CAAvB;AAAkE;;;;QAAroB,+D;;;;;;;;;;;;;;;;;ACJ9O;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AAC+Q,eAASyB,CAAT,CAAWvB,CAAX,EAAagB,CAAb,EAAeO,CAAf,EAAyB;AAAA,YAARR,CAAQ,uEAAN,IAAI,2DAAJ,EAAM;AAAC,YAAIhB,CAAJ;AAAM,YAAG,SAAOwB,CAAC,CAACG,IAAZ,EAAiB3B,CAAC,GAACiB,CAAC,GAACO,CAAC,CAACN,UAAN,CAAjB,KAAuC,IAAG,SAAOM,CAAC,CAACG,IAAZ,EAAiB;AAAC,cAAM5B,CAAC,GAACyB,CAAC,CAACI,0BAAF,CAA6B3B,CAA7B,CAAR;AAAA,cAAwCe,EAAC,GAACQ,CAAC,CAACK,uBAA5C;AAAoE7B,WAAC,GAAC,8DAAEgB,EAAF,KAAM,CAACA,EAAC,CAACc,MAAF,CAASN,CAAC,CAACO,gBAAX,CAAP,GAAoC,iFAAEf,EAAF,IAAK,iFAAEQ,CAAC,CAACO,gBAAJ,CAAzC,GAA+Dd,CAAC,GAAClB,CAAnE;AAAqE;AAAM,YAAAiC,CAAC,GAAC/B,CAAC,CAACgC,CAAF,GAAIjC,CAAN;AAAA,YAAQkC,CAAR,GAAUjC,CAAC,CAACkC,CAAF,GAAInC,CAAd;AAAA,YAAgBoC,CAAhB,GAAkBnC,CAAC,CAACgC,CAAF,GAAIjC,CAAtB;AAAA,YAAwBqC,CAAxB,GAA0BpC,CAAC,CAACkC,CAAF,GAAInC,CAA9B;AAAA,YAAkDsC,CAAlD,GAAqDd,CAArD,CAAiCO,gBAAjC;AAAuD,eAAOf,CAAC,CAACuB,IAAF,GAAOC,IAAI,CAACC,GAAL,CAAST,CAAT,EAAWI,CAAX,CAAP,EAAqBpB,CAAC,CAAC0B,IAAF,GAAOF,IAAI,CAACC,GAAL,CAASP,CAAT,EAAWG,CAAX,CAA5B,EAA0CrB,CAAC,CAAC2B,IAAF,GAAOH,IAAI,CAACI,GAAL,CAASZ,CAAT,EAAWI,CAAX,CAAjD,EAA+DpB,CAAC,CAAC6B,IAAF,GAAOL,IAAI,CAACI,GAAL,CAASV,CAAT,EAAWG,CAAX,CAAtE,EAAoFrB,CAAC,CAACe,gBAAF,GAAmBO,CAAvG,EAAyGtB,CAAhH;AAAkH;;AAAA,eAASA,CAAT,CAAWd,CAAX,EAAaH,CAAb,EAAeuB,CAAf,EAAiB;AAAC,YAAMN,CAAC,GAACM,CAAC,CAACwB,KAAF,CAAQ5C,CAAR,CAAR;AAAmB,YAAG,8DAAEc,CAAF,CAAH,EAAQ,OAAM,CAAC,CAAP;AAAS,eAAOQ,CAAC,CAACR,CAAD,EAAG,sGAAH,EAAOM,CAAP,EAAStB,CAAT,CAAD,CAAa+C,UAAb,CAAwBhD,CAAxB,CAAP;AAAkC;;AAAA,UAAMC,CAAC,GAAC,IAAI,2DAAJ,EAAR;;;;;;;;;;;;;;;;ACJxvB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AACsmC,UAAMgD,CAAC,GAAC,wDAAEC,SAAF,CAAY,sCAAZ,CAAR;AAAA,UAA4DC,CAAC,GAAC,CAAC,CAAD,EAAG,CAAH,CAA9D;;AAAoE,UAAIC,CAAC;AAAA;;AAAA;;AAA8B,qBAAa;AAAA;;AAAA;;AAAC,uCAASC,SAAT,GAAoB,OAAKC,aAAL,GAAmB,IAAvC,EAA4C,OAAKC,WAAL,GAAiB,IAA7D,EAAkE,OAAKC,KAAL,GAAW,IAA7E;AAAD;AAAmF;;AAA9H;AAAA;AAAA,iBAA8H,sBAAY;AAAA;;AAAC,gBAAMrD,CAAC,GAAC,KAAKqD,KAAL,CAAWC,QAAnB;AAAA,gBAA4BvD,CAAC,GAACC,CAAC,IAAEA,CAAC,CAAC6B,gBAAnC;AAAoD,gBAAId,CAAJ;AAAMhB,aAAC,KAAGgB,CAAC,GAAC,IAAI,sDAAJ,CAAM,sCAAN,EAA6C,8CAA7C,EAA4F;AAACsC,mBAAK,EAAC,KAAKA;AAAZ,aAA5F,CAAL,CAAD,EAAuHtD,CAAC,CAAC6B,MAAF,CAAS,KAAK2B,IAAL,CAAU1B,gBAAnB,MAAuCd,CAAC,GAAC,IAAI,sDAAJ,CAAM,0CAAN,EAAiD,gFAAjD,EAAkI;AAACsC,mBAAK,EAAC,KAAKA;AAAZ,aAAlI,CAAzC,CAAvH,EAAuT,KAAKG,KAAL,CAAW,YAAX,EAAyB,YAAI;AAAC,oBAAI,CAACC,OAAL;AAAe,aAA7C,CAAvT,EAAuW1C,CAAC,IAAE,KAAK2C,mBAAL,CAAyB,sEAAE3C,CAAF,CAAzB,CAA1W;AAAyY;AAA9kB;AAAA;AAAA,eAA8kB,eAAgB;AAAC,mBAAM,EAAE,gBAAe,KAAKsC,KAAtB,KAA8B,CAAC,CAAD,KAAK,KAAKA,KAAL,CAAWM,UAApD;AAA+D;AAA9pB;AAAA;AAAA,iBAA8pB,mBAAS;AAAC,mBAAO,IAAP;AAAY;AAAprB;AAAA;AAAA,iBAAorB,gBAAO3D,CAAP,EAAS;AAAC,iBAAKoD,WAAL,CAAiBQ,KAAjB,IAAyB,KAAKR,WAAL,CAAiBS,KAAjB,GAAuB7D,CAAC,CAAC6D,KAAlD,EAAwD,KAAKV,aAAL,CAAmBW,MAAnB,CAA0B9D,CAA1B,CAAxD,EAAqF,KAAKoD,WAAL,CAAiBW,MAAjB,EAArF,EAA+G,KAAKC,YAAL,CAAkB,UAAlB,CAA/G;AAA6I;AAA30B;AAAA;AAAA,iBAA20B,kBAAQ;AAAA;;AAAC,gBAAMhE,CAAC,GAAC,iBAAgB,KAAKqD,KAArB,GAA2B,KAAKA,KAAL,CAAWY,WAAtC,GAAkD,IAA1D;AAA+D,iBAAKC,aAAL,GAAmB,IAAI,gEAAJ,CAAM,KAAKb,KAAL,CAAWC,QAAjB,EAA0B,KAAKD,KAAL,CAAWc,UAArC,CAAnB,EAAoE,KAAKf,WAAL,GAAiB,IAAI,6DAAJ,CAAM;AAACgB,0BAAY,EAAC,KAAKF,aAAnB;AAAiCG,yBAAW,EAACrE,CAAC,IAAE,KAAGA,CAAC,CAACsE,MAAR,IAAgB,EAA7D;AAAgEC,qBAAO,EAAC,iBAACvE,CAAD,EAAGD,CAAH;AAAA,uBAAO,MAAI,CAACyE,SAAL,CAAexE,CAAf,EAAiBD,CAAjB,CAAP;AAAA;AAAxE,aAAN,CAArF,EAAgM,KAAKoD,aAAL,GAAmB,IAAI,gEAAJ,CAAM;AAACsB,yBAAW,EAAC,MAAb;AAAoBd,wBAAU,EAAC,KAAKA,UAApC;AAA+Ce,yBAAW,EAAC,qBAAA1E,CAAC;AAAA,uBAAE,MAAI,CAAC0E,WAAL,CAAiB1E,CAAjB,CAAF;AAAA,eAA5D;AAAkF2E,yBAAW,EAAC,qBAAA3E,CAAC;AAAA,uBAAE,MAAI,CAAC2E,WAAL,CAAiB3E,CAAjB,CAAF;AAAA,eAA/F;AAAqHoE,0BAAY,EAAC,KAAKF;AAAvI,aAAN,CAAnN,EAAgX,KAAKU,aAAL,EAAhX,EAAqY,KAAKC,SAAL,CAAeC,aAAf,EAArY;AAAmb;AAAt0C;AAAA;AAAA,iBAAs0C,kBAAQ;AAAC,2EAAe,KAAK3B,aAAL,CAAmB4B,OAAnB,EAAf,EAA4C,KAAK3B,WAAL,CAAiB4B,KAAjB,EAA5C,EAAqE,KAAKH,SAAL,CAAeI,iBAAf,EAArE,EAAwG,KAAK7B,WAAL,GAAiB,KAAKD,aAAL,GAAmB,KAAKe,aAAL,GAAmB,IAA/J;AAAoK;AAAn/C;AAAA;AAAA,iBAAm/C,qBAAW;AAAC,iBAAKU,aAAL;AAAqB;AAAphD;AAAA;AAAA,iBAAohD,sBAAY;AAAC,iBAAKA,aAAL;AAAqB;AAAtjD;AAAA;AAAA,iBAAsjD,mBAAS;AAAC,iBAAKA,aAAL;AAAqB;AAArlD;AAAA;AAAA,iBAAqlD,+CAAsC5E,CAAtC,EAAwCD,CAAxC,EAA0C;AAAC,mBAAO,qFAAEC,CAAF,EAAID,CAAJ,EAAM,KAAKwD,IAAX,CAAP;AAAwB;AAAxpD;AAAA;AAAA;AAAA,qFAAwpD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAkB,2BAAK2B,eAAL,IAAsB,KAAKC,SAA3B,KAAuC,KAAK/B,WAAL,CAAiBgC,KAAjB,IAAyB,KAAKjC,aAAL,CAAmBkC,KAAnB,CAAyBC,OAAzB,CAAkC,UAAAtF,CAAC;AAAA,+BAAE,MAAI,CAACuF,iBAAL,CAAuBvF,CAAvB,CAAF;AAAA,uBAAnC,CAAzB,EAA0F,KAAKgE,YAAL,CAAkB,UAAlB,CAAjI;;AAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAxpD;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA00D,sBAAY;AAAC,gBAAIhE,CAAJ;AAAM,mBAAM,CAAC,SAAOA,CAAC,GAAC,KAAKoD,WAAd,IAA2B,KAAK,CAAhC,GAAkCpD,CAAC,CAACsE,MAArC,IAA6C,CAAnD;AAAqD;AAAl5D;AAAA;AAAA,iBAAk5D,qBAAYtE,CAAZ,EAAc;AAAA;;AAAC,gBAAMD,CAAC,GAAC,KAAKyF,WAAL,CAAiBC,UAAjB,CAA4BzF,CAA5B,CAAR;AAAA,gBAAuCe,CAAC,GAAChB,CAAC,CAAC2F,MAA3C;;AAAkD,mBAAM,yBAAU,KAAKxB,aAAL,CAAmByB,aAAnB,CAAiC3C,CAAjC,EAAmCjD,CAAC,CAACO,GAArC,CAAV,qEAACS,CAAC,CAACgB,CAAH,8BAAKhB,CAAC,CAACkB,CAAP,sDAAoDlB,CAAC,CAACC,UAAF,GAAa,KAAKkD,aAAL,CAAmB0B,iBAAnB,CAAqC7F,CAAC,CAACO,GAAvC,CAAjE,2BAAgI,KAAK4D,aAAL,CAAmBZ,QAAnB,CAA4B9C,IAA5J,qEAA8GO,CAAC,CAAC8E,KAAhH,8BAAsH9E,CAAC,CAAC+E,MAAxH,sDAAiK,KAAKP,iBAAL,CAAuBxF,CAAvB,CAAjK,EAA2L,KAAKyF,WAAL,CAAiBO,QAAjB,CAA0BhG,CAA1B,CAA3L,EAAwN,KAAK6E,aAAL,EAAxN,EAA6O7E,CAAnP;AAAqP;AAAxsE;AAAA;AAAA,iBAAwsE,qBAAYC,CAAZ,EAAc;AAAC,iBAAKoD,WAAL,CAAiB4C,KAAjB,CAAuBhG,CAAC,CAACM,GAAF,CAAM2F,EAA7B,GAAiC,KAAKT,WAAL,CAAiBU,WAAjB,CAA6BlG,CAA7B,CAAjC,EAAiEA,CAAC,CAACmG,IAAF,CAAO,QAAP,EAAiB;AAAA,qBAAInG,CAAC,CAAC+E,OAAF,EAAJ;AAAA,aAAjB,CAAjE,EAAoG,KAAKH,aAAL,EAApG;AAAyH;AAAh1E;AAAA;AAAA;AAAA,qFAAg1E,kBAAgB5E,CAAhB,EAAkBe,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2BlB,uBAA3B,GAA6B,kBAAiB,KAAKwD,KAAtB,GAA4B,KAAKA,KAAL,CAAW+C,YAAvC,GAAoD,IAAjF,EAAsFtG,CAAtF,GAAwF,CAAC,8DAAEiB,CAAF,CAAD,IAAOA,CAAC,CAACsF,MAAjG;;AAAA,0BAA4GxG,CAA5G;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAA+H,KAAKyG,WAAL,CAAiBtG,CAAjB,EAAmBF,CAAnB,CAA/H;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,4BAAiK,CAAC,yFAAD,IAAO,CAAC,KAAK6D,UAA9K;AAAA;AAAA;AAAA;;AAAA,wDAAgM,KAAK4C,iBAAL,EAAhM;;AAAA;AAAA;;AAAA;AAAuOjF,uBAAvO,GAAyO,IAAI,2DAAJ,CAAM,CAAN,EAAQ,CAAR,EAAU,CAAV,EAAY,CAAZ,CAAzO;AAAA;AAAA;AAAA,6BAA2QzB,CAAC,CAAC2G,yBAAF,CAA4BxG,CAAC,CAACyG,KAA9B,EAAoCzG,CAAC,CAAC0G,GAAtC,EAA0C1G,CAAC,CAAC2G,GAA5C,EAAgDrF,CAAhD,EAAkD;AAAC+E,8BAAM,EAACvG;AAAR,uBAAlD,CAA3Q;;AAAA;AAAA,4BAAyUwB,CAAC,CAACmF,KAAF,KAAUzG,CAAC,CAACyG,KAAZ,IAAmB,CAAC,KAAK9C,UAAlW;AAAA;AAAA;AAAA;;AAAA,wDAAoX,KAAK4C,iBAAL,EAApX;;AAAA;AAAA;AAAA,6BAAqZ,KAAKD,WAAL,CAAiBhF,CAAjB,EAAmBxB,CAAnB,CAArZ;;AAAA;AAA6YqC,uBAA7Y;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,2BAAub,yFAAvb;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,6BAA4c,KAAKmE,WAAL,CAAiBtG,CAAjB,EAAmBF,CAAnB,CAA5c;;AAAA;AAAocqC,uBAApc;;AAAA;AAA8ed,uBAA9e,GAA6fC,CAA7f,CAAwemF,KAAxe,EAAofvE,CAApf,GAA6fZ,CAA7f,CAAgfoF,GAAhf,EAA0fE,CAA1f,GAA6ftF,CAA7f,CAAsfqF,GAAtf;AAAA,wDAAsgB,KAAKhD,UAAL,IAAiBtC,CAAC,KAAGrB,CAAC,CAACyG,KAAvB,GAA6B,KAAKI,cAAL,CAAoB1E,CAApB,EAAsBd,CAAtB,EAAwBa,CAAxB,EAA0B0E,CAA1B,EAA4B5G,CAAC,CAACyG,KAA9B,EAAoCzG,CAAC,CAAC0G,GAAtC,EAA0C1G,CAAC,CAAC2G,GAA5C,CAA7B,GAA8ExE,CAAplB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAh1E;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6FAAs6F,kBAAwBnC,CAAxB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA+B,KAAKoD,WAAL,CAAiB0D,GAAjB,CAAqB9G,CAAC,CAACM,GAAF,CAAM2F,EAA3B,CAA/B;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAAiF,KAAK7C,WAAL,CAAiB2D,IAAjB,CAAsB/G,CAAC,CAACM,GAAxB,CAAjF;;AAAA;AAAyEP,uBAAzE;AAA8GC,uBAAC,CAAC0F,MAAF,CAASsB,MAAT,GAAgBjH,CAAhB,EAAkBC,CAAC,CAAC0F,MAAF,CAASG,KAAT,GAAe,KAAK3B,aAAL,CAAmBZ,QAAnB,CAA4B9C,IAA5B,CAAiC,CAAjC,CAAjC,EAAqER,CAAC,CAAC0F,MAAF,CAASI,MAAT,GAAgB,KAAK5B,aAAL,CAAmBZ,QAAnB,CAA4B9C,IAA5B,CAAiC,CAAjC,CAArF,EAAyHR,CAAC,CAACmG,IAAF,CAAO,QAAP,EAAiB;AAAA,+BAAI,MAAI,CAACvB,aAAL,EAAJ;AAAA,uBAAjB,CAAzH;AAA9G;AAAA;;AAAA;AAAA;AAAA;AAA4R,mHAAM9B,CAAC,CAACmE,KAAF,cAAN;;AAA5R;AAA6S,2BAAKrC,aAAL;;AAA7S;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAt6F;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uFAAyuG,kBAAkB5E,CAAlB,EAAoBD,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA,wDAA8B,KAAKsD,KAAL,CAAWmB,SAAX,CAAqBxE,CAAC,CAACyG,KAAvB,EAA6BzG,CAAC,CAAC0G,GAA/B,EAAmC1G,CAAC,CAAC2G,GAArC,EAAyC;AAACO,iCAAS,EAAC,KAAKC,gBAAhB;AAAiCd,8BAAM,EAACtG;AAAxC,uBAAzC,CAA9B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAzuG;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA41G,wBAAeC,CAAf,EAAiBD,CAAjB,EAAmBgB,CAAnB,EAAqBlB,CAArB,EAAuBC,CAAvB,EAAyBwB,CAAzB,EAA2Ba,CAA3B,EAA6B;AAAC,gBAAMrB,CAAC,GAAC,KAAKoD,aAAL,CAAmBZ,QAAnB,CAA4B9C,IAApC;AAAA,gBAAyCa,CAAC,GAAC,KAAK6C,aAAL,CAAmB0B,iBAAnB,CAAqC7F,CAArC,CAA3C;AAAA,gBAAmFqB,CAAC,GAAC,KAAK8C,aAAL,CAAmB0B,iBAAnB,CAAqC9F,CAArC,CAArF;;AAA6H,gBAAIoC,CAAC,GAAC,KAAKgC,aAAL,CAAmBkD,YAAnB,CAAgCtH,CAAhC,CAAN;;AAAyC,gBAAM8G,CAAC,GAAC1E,CAAC,CAACmF,aAAF,CAAgBlF,CAAhB,CAAR;AAAA,gBAA2BH,CAAC,GAACE,CAAC,CAACoF,UAAF,CAAahG,CAAb,CAA7B;AAA6CY,aAAC,GAAC,KAAKgC,aAAL,CAAmBkD,YAAnB,CAAgCrH,CAAhC,CAAF;;AAAqC,gBAAM+B,CAAC,GAACI,CAAC,CAACmF,aAAF,CAAgBxH,CAAhB,CAAR;AAAA,gBAA2BuC,CAAC,GAACF,CAAC,CAACoF,UAAF,CAAavG,CAAb,CAA7B;AAAA,gBAA6CwG,CAAC,GAACjF,IAAI,CAACkF,KAAL,CAAW,CAACZ,CAAC,GAAC9E,CAAH,IAAMT,CAAjB,CAA/C;AAAA,gBAAmEY,CAAC,GAACK,IAAI,CAACkF,KAAL,CAAW,EAAExF,CAAC,GAACI,CAAJ,IAAOf,CAAlB,CAArE;AAAA,gBAA0FE,CAAC,GAACe,IAAI,CAACkF,KAAL,CAAW1G,CAAC,CAAC,CAAD,CAAD,IAAMM,CAAC,GAACC,CAAR,CAAX,CAA5F;AAAA,gBAAmHyB,CAAC,GAACR,IAAI,CAACkF,KAAL,CAAW1G,CAAC,CAAC,CAAD,CAAD,IAAMM,CAAC,GAACC,CAAR,CAAX,CAArH;AAAA,gBAA4I2B,CAAC,GAAC,KAAKuD,iBAAL,EAA9I;;AAAuK,mBAAOvD,CAAC,CAACyE,UAAF,CAAa,IAAb,EAAmBC,SAAnB,CAA6B1H,CAA7B,EAA+BuH,CAA/B,EAAiCtF,CAAjC,EAAmCV,CAAnC,EAAqCuB,CAArC,EAAuC,CAAvC,EAAyC,CAAzC,EAA2ChC,CAAC,CAAC,CAAD,CAA5C,EAAgDA,CAAC,CAAC,CAAD,CAAjD,GAAsDkC,CAA7D;AAA+D;AAAx1H;AAAA;AAAA,iBAAw1H,6BAAmB;AAAA;;AAAC,gBAAMhD,CAAC,GAAC,KAAKkE,aAAL,CAAmBZ,QAAnB,CAA4B9C,IAApC;AAAA,gBAAyCT,CAAC,GAAC4H,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAA3C;AAA4E,mBAAM,OAAmB5H,CAAnB,gCAACD,CAAC,CAAC8F,KAAH,WAAS9F,CAAC,CAAC+F,MAAX,iBAAqB/F,CAA3B;AAA6B;AAAr9H;;AAAA;AAAA,QAAe,gFAAE,8FAAE,yFAAE,0EAAE,6DAAF,CAAF,CAAF,CAAF,CAAf,CAAL;;AAA49H,qEAAE,CAAC,8FAAE;AAAC8H,iBAAS,EAAC,CAAC,mBAAD;AAAX,OAAF,CAAD,CAAF,EAAyC5E,CAAC,CAAC6E,SAA3C,EAAqD,YAArD,EAAkE,IAAlE,GAAwE7E,CAAC,GAAC,+DAAE,CAAC,8FAAE,sCAAF,CAAD,CAAF,EAA8CA,CAA9C,CAA1E;AAA2H,UAAI8E,CAAC,GAAC9E,CAAN;AAAuB;;AAAA,uCAAA8E,CAAA;;;;;;;;;;;;;;;;ACJxxK;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AACooB,UAAM7F,CAAC,GAAC,WAAAA,GAAC,EAAE;AAAC,YAAIC,CAAC;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,gGAAiB,kBAAyBnC,CAAzB,EAA2BD,CAA3B;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA0Ce,yBAA1C,GAA6C,IAA7C,CAAoCuC,KAApC;;AAAA,4BAAsDrD,CAAtD;AAAA;AAAA;AAAA;;AAAA,0DAA+D,sEAAE,IAAI,sDAAJ,CAAM,kCAAN,EAAyC,+BAAzC,EAAyE;AAACqD,+BAAK,EAACvC;AAAP,yBAAzE,CAAF,CAA/D;;AAAA;AAAA,8BAAyJ,WAASA,CAAC,CAACW,IAApK;AAAA;AAAA;AAAA;;AAAA,0DAAgL,sEAAE,IAAI,sDAAJ,CAAM,kCAAN,EAAyC,6BAAzC,EAAuE;AAACA,8BAAI,EAACX,CAAC,CAACW;AAAR,yBAAvE,CAAF,CAAhL;;AAAA;AAA+QS,yBAA/Q,GAAiR,KAAK8F,GAAL,CAAS,YAAT,CAAjR,EAAwS7F,EAAxS,GAA0SrB,CAAC,CAACmH,YAAF,CAAeC,OAAf,GAAyBC,MAAzB,CAAiC,UAAAnI,CAAC,EAAE;AAAC,8BAAMH,CAAC,GAAC,MAAIG,CAAC,CAACoI,QAAN,IAAgBlG,CAAC,IAAElC,CAAC,CAACoI,QAA7B;AAAA,8BAAsCrI,CAAC,GAAC,MAAIC,CAAC,CAACqI,QAAN,IAAgBnG,CAAC,IAAElC,CAAC,CAACqI,QAA7D;AAAsE,iCAAOrI,CAAC,CAACsI,aAAF,IAAiBtI,CAAC,CAACuI,YAAnB,IAAiCvI,CAAC,CAACwI,OAAnC,IAA4C3I,CAA5C,IAA+CE,CAAtD;AAAwD,yBAAnK,CAA1S;AAAA,0DAAud,0EAAEoC,EAAC,CAACsG,GAAF;AAAA,6FAAO,kBAAM3H,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgBhB,qCAAhB,GAAkBgB,CAAC,CAAC4H,WAAF,EAAlB,EAAkC1G,CAAlC,GAAoC,8DAAEjC,CAAF,IAAKA,CAAC,CAAC4I,KAAP,GAAa,IAAjD,EAAsDrH,CAAtD,GAAwD,sGAAE;AAACsH,8CAAQ,EAAC9H,CAAC,CAAC8H,QAAZ;AAAqBD,2CAAK,EAAC3G;AAA3B,qCAAF,CAAxD;AAAyFlC,qCAAC,CAAC+I,QAAF,GAAW,MAAI,CAACC,qCAAL,CAA2C9I,CAA3C,EAA6CsB,CAA7C,CAApG;AAAA;AAAA,2CAAsKR,CAAC,CAACwH,aAAF,CAAgBS,iBAAhB,EAAtK;;AAAA;AAAoJjJ,qCAAC,CAACkJ,SAAtJ;AAAA;AAAA,2CAAuNlI,CAAC,CAACmI,aAAF,CAAgBnJ,CAAhB,CAAvN;;AAAA;AAAA,qFAA2OoJ,QAA3O;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAP;;AAAA;AAAA;AAAA;AAAA,4BAAF,EAAiQC,IAAjQ,CAAuQ,UAAAnJ,CAAC;AAAA;;AAAA,iCAAE,aAAGoJ,MAAH,iCAAapJ,CAAC,CAACyI,GAAF,CAAO,UAAAzI,CAAC;AAAA,mCAAEA,CAAC,CAACqJ,KAAJ;AAAA,2BAAR,EAAoBlB,MAApB,CAA2BmB,OAA3B,CAAb,EAAF;AAAA,yBAAxQ,CAAvd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAjB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UAAepH,GAAf,CAAL;;AAA6yB,eAAO,+DAAE,CAAC,+FAAD,CAAF,EAAQC,CAAC,CAAC2F,SAAV,EAAoB,OAApB,EAA4B,KAAK,CAAjC,GAAoC3F,CAAC,GAAC,+DAAE,CAAC,8FAAE,kCAAF,CAAD,CAAF,EAA0CA,CAA1C,CAAtC,EAAmFA,CAA1F;AAA4F,OAAr5B;;;;;;;;;;;;;;;;;ACJpoB;AAAA;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AACA,eAASpC,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAAC,eAAOA,CAAC,GAAC,aAAYA,CAAZ,IAAeA,CAAC,CAACuJ,OAAjB,GAAyBjH,IAAI,CAACI,GAAL,CAAS3C,CAAT,EAAWuC,IAAI,CAACkH,GAAL,CAASxJ,CAAC,CAACuJ,OAAX,CAAX,CAAzB,GAAyD,aAAYvJ,CAAZ,IAAeA,CAAC,CAACyJ,OAAjB,GAAyBnH,IAAI,CAACI,GAAL,CAAS3C,CAAT,EAAWuC,IAAI,CAACkH,GAAL,CAASxJ,CAAC,CAACyJ,OAAF,IAAW,CAApB,CAAX,CAAzB,GAA4D1J,CAAtH,GAAwHA,CAAhI;AAAkI;;AAAA,eAASC,CAAT,CAAWD,CAAX,EAAaC,CAAb,EAAe;AAAC,eAAM,YAAU,OAAOD,CAAjB,GAAmBA,CAAnB,GAAqBA,CAAC,IAAEA,CAAC,CAAC2J,KAAL,IAAY3J,CAAC,CAAC2J,KAAF,CAAQpF,MAApB,GAA2B,UAASvE,CAAT,EAAW;AAAC,cAAIC,CAAC,GAAC,CAAN;AAAA,cAAQoB,CAAC,GAAC,CAAV;;AAAY,eAAI,IAAIvB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACE,CAAC,CAACuE,MAAhB,EAAuBzE,CAAC,EAAxB,EAA2B;AAAC,gBAAMC,CAAC,GAACC,CAAC,CAACF,CAAD,CAAD,CAAKW,IAAb;AAAkB,wBAAU,OAAOV,CAAjB,KAAqBE,CAAC,IAAEF,CAAH,EAAKsB,CAAC,EAA3B;AAA+B;;AAAA,iBAAOpB,CAAC,GAACoB,CAAT;AAAW,SAAhH,CAAiHrB,CAAC,CAAC2J,KAAnH,CAA3B,GAAqJ1J,CAAhL;AAAkL;;AAAA,eAASoB,CAAT,CAAWA,CAAX,EAAa;AAAC,YAAMvB,CAAC,GAACuB,CAAC,IAAEA,CAAC,CAACwH,QAAb;AAAA,YAAsB9I,CAAC,GAAC,aAAWsB,CAAC,IAAEA,CAAC,CAACuH,KAAL,IAAYvH,CAAC,CAACuH,KAAF,CAAQgB,WAA/B,IAA4C,CAA5C,GAA8C,CAAtE;AAAwE,YAAG,CAAC9J,CAAJ,EAAM,OAAOC,CAAP;AAAS,YAAMgB,CAAC,GAAC,qBAAoBjB,CAApB,GAAsB,UAASE,CAAT,EAAWqB,CAAX,EAAa;AAAC,cAAG,CAACA,CAAJ,EAAM,OAAOrB,CAAP;AAAS,cAAMF,CAAC,GAACuB,CAAC,CAAC+G,MAAF,CAAU,UAAApI,CAAC;AAAA,mBAAE,WAASA,CAAC,CAAC0B,IAAb;AAAA,WAAX,EAA+BgH,GAA/B,CAAoC,UAAArH,CAAC,EAAE;AAAA,gBAAevB,CAAf,GAA4BuB,CAA5B,CAAOwI,OAAP;AAAA,gBAAyB9J,CAAzB,GAA4BsB,CAA5B,CAAiByI,OAAjB;AAA8B,mBAAM,CAAC7J,CAAC,CAACH,CAAD,EAAGE,CAAH,CAAD,GAAOC,CAAC,CAACF,CAAD,EAAGC,CAAH,CAAT,IAAgB,CAAtB;AAAwB,WAA7F,CAAR;AAAwG,cAAID,CAAC,GAAC,CAAN;AAAQ,cAAMgB,CAAC,GAACjB,CAAC,CAACyE,MAAV;AAAiB,cAAG,MAAIxD,CAAP,EAAS,OAAOf,CAAP;;AAAS,eAAI,IAAIA,EAAC,GAAC,CAAV,EAAYA,EAAC,GAACe,CAAd,EAAgBf,EAAC,EAAjB;AAAoBD,aAAC,IAAED,CAAC,CAACE,EAAD,CAAJ;AAApB;;AAA4B,cAAMqC,CAAC,GAACE,IAAI,CAACwH,KAAL,CAAWhK,CAAC,GAACgB,CAAb,CAAR;AAAwB,iBAAOwB,IAAI,CAACI,GAAL,CAASN,CAAT,EAAWrC,CAAX,CAAP;AAAqB,SAAzP,CAA0PD,CAA1P,EAA4PD,CAAC,CAACkK,eAA9P,CAAtB,GAAqSjK,CAA7S;AAA+S,YAAG,aAAWD,CAAC,CAAC4B,IAAhB,EAAqB,OAAO1B,CAAC,CAACe,CAAD,EAAGjB,CAAC,CAACmK,MAAL,CAAR;;AAAqB,YAAG,mBAAiBnK,CAAC,CAAC4B,IAAtB,EAA2B;AAAC,cAAIzB,GAAC,GAACc,CAAN;AAAQ,iBAAOjB,CAAC,CAACoK,gBAAF,CAAmB3E,OAAnB,CAA4B,UAAAlE,CAAC,EAAE;AAACpB,eAAC,GAACD,CAAC,CAACC,GAAD,EAAGoB,CAAC,CAAC4I,MAAL,CAAH;AAAgB,WAAhD,GAAmDhK,GAA1D;AAA4D;;AAAA,YAAG,mBAAiBH,CAAC,CAAC4B,IAAtB,EAA2B;AAAC,cAAIzB,GAAC,GAACc,CAAN;AAAQ,iBAAOjB,CAAC,CAACqK,eAAF,CAAkB5E,OAAlB,CAA2B,UAAAlE,CAAC,EAAE;AAACpB,eAAC,GAACD,CAAC,CAACC,GAAD,EAAGoB,CAAC,CAAC4I,MAAL,CAAH;AAAgB,WAA/C,GAAkDhK,GAAzD;AAA2D;;AAAA,eAAOH,CAAC,CAAC4B,IAAF,EAAOX,CAAd;AAAgD;;;;;;;;;;;;;;;;;ACJjgC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AACgK,UAAMM,CAAC,GAAC,SAAFA,CAAE,CAACpB,CAAD,EAAGH,CAAH;AAAA,eAAOG,CAAC,CAACM,GAAF,CAAMmG,KAAN,GAAY5G,CAAC,CAACS,GAAF,CAAMmG,KAAlB,IAAyB,CAAzB,GAA2BzG,CAAC,CAACM,GAAF,CAAMmG,KAAN,GAAY5G,CAAC,CAACS,GAAF,CAAMmG,KAA7C,GAAmDzG,CAAC,CAACM,GAAF,CAAMoG,GAAN,GAAU7G,CAAC,CAACS,GAAF,CAAMoG,GAAhB,IAAqB,CAArB,GAAuB1G,CAAC,CAACM,GAAF,CAAMoG,GAAN,GAAU7G,CAAC,CAACS,GAAF,CAAMoG,GAAvC,GAA2C1G,CAAC,CAACM,GAAF,CAAMqG,GAAN,GAAU9G,CAAC,CAACS,GAAF,CAAMqG,GAArH;AAAA,OAAR;AAAgJ;;;AAAA;AAAA;;AAAA;;AAAgB,wBAAY3G,CAAZ,EAAc;AAAA;;AAAA;;AAAC,uCAAQ,OAAKkE,aAAL,GAAmBlE,CAA3B;AAAD;AAA8B;;AAA5D;AAAA;AAAA,iBAA4D,wBAAeA,CAAf,EAAiB;AAAC,iBAAKmK,YAAL,CAAkB/I,CAAlB,GAAqB,KAAKgJ,mBAAL,EAArB,6EAAqEpK,CAArE;AAAwE;AAAtJ;AAAA;AAAA,iBAAsJ,4BAAmBA,CAAnB,EAAqB;AAAA,gBAAaH,CAAb,GAAgBG,CAAhB,CAAO6D,KAAP;AAAkB,kIAAmC7D,CAAnC;AAAsCqK,2BAAa,EAAC,KAAKnG,aAAL,CAAmBoG,sBAAnB,CAA0CzK,CAAC,CAAC0K,KAA5C,EAAmD9D,KAAvG;AAA6G+D,0BAAY,EAAC,KAAKtG,aAAL,CAAmBZ,QAAnB,CAA4BmH,WAA5B,CAAwC5K,CAAC,CAAC0K,KAA1C;AAA1H;AAA4K;AAAzW;AAAA;AAAA,iBAAyW,6BAAoBxK,CAApB,EAAsB;AAAA;;AAAC,gBAAMqB,CAAC,GAACrB,CAAC,CAAC2K,kBAAF,CAAqB;AAACC,kBAAI,EAAC,SAAN;AAAgBC,qBAAO,EAAC,CAAC,mEAAD,CAAxB;AAA4BC,uBAAS,EAAC,uDAAEC,KAAF,GAAQ,uDAAEC,GAAV,GAAc,uDAAEC,SAAtD;AAAgEC,oBAAM,EAAC;AAAA,uBAAI,MAAI,CAACC,gBAAL,EAAJ;AAAA;AAAvE,aAArB,CAAR;AAAA,gBAAkInK,CAAC,GAAChB,CAAC,CAAC2K,kBAAF,CAAqB;AAACC,kBAAI,EAAC,UAAN;AAAiBC,qBAAO,EAAC,CAAC,gEAAD,CAAzB;AAA6BC,uBAAS,EAAC,uDAAEC,KAAzC;AAA+CG,oBAAM,EAAC;AAAA,uBAAI,MAAI,CAACE,QAAT;AAAA,eAAtD;AAAwErE,iBAAG,EAAC;AAA5E,aAArB,CAApI;AAA0P,gIAAoC/G,CAApC,KAAuCqB,CAAvC,EAAyCL,CAAzC;AAA4C;AAAtqB;AAAA;AAAA,iBAAsqB,4BAAkB;AAAC,mBAAO,KAAKoK,QAAZ;AAAqB;AAA9sB;AAAA;AAAA,iBAA8sB,0BAAiBnL,CAAjB,EAAmB;AAAA,uDAAgB,KAAKmL,QAArB;AAAA;;AAAA;AAAC,kEAA6B;AAAA,oBAAnBtL,CAAmB;;AAAC,oBAAMC,CAAC,GAAC,KAAKoE,aAAL,CAAmB0B,iBAAnB,CAAqC/F,CAAC,CAACS,GAAvC,CAAR;;AAAoDT,iBAAC,CAACuL,YAAF,CAAepL,CAAf,EAAiBF,CAAjB;AAAoB;AAAvG;AAAA;AAAA;AAAA;AAAA;AAAwG;AAAz0B;AAAA;AAAA,iBAAy0B,+BAAqB;AAAC,gBAAIE,CAAC,GAAC,CAAN;;AAAD,wDAAwB,KAAKmL,QAA7B;AAAA;;AAAA;AAAS;AAAA,oBAAUtL,CAAV;AAA6BA,iBAAC,CAACwL,UAAF,GAAarL,CAAC,EAAd;AAA7B;AAAT;AAAA;AAAA;AAAA;AAAA;AAAuD;AAAr5B;;AAAA;AAAA,QAAc,wDAAd","file":"layers-TileLayerView2D-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{s,m as t}from\"../../../../chunks/mat3.js\";import o from\"../../tiling/TileKey.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as e}from\"../DisplayObject.js\";class r extends e{constructor(s,t,e,r=e){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:i(),tileMat3:i()},this.triangleCount=0,this.key=new o(s),this.bounds=t,this.size=e,this.coordRange=r}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(s){this._coords=[s[0],s[3]],this._bounds=s}setTransform(o,i){const e=i/(o.resolution*o.pixelRatio),r=this.transforms.tileMat3,[n,h]=o.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*e,d=this.size[1]/this.coordRange[1]*e;s(r,a,0,0,0,d,0,n,h,1),t(this.transforms.dvs,o.displayViewMat3,r)}}export{r as TiledDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as t}from\"../../../core/maybe.js\";import i from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{reject as l,isAbortError as o}from\"../../../core/promiseUtils.js\";import{RefreshableLayerView as h}from\"../../layers/RefreshableLayerView.js\";import n from\"../tiling/TileKey.js\";import c from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileQueue.js\";import p from\"../tiling/TileStrategy.js\";import m from\"../../layers/LayerView.js\";import{createQueryGeometry as f}from\"../../support/drapedUtils.js\";import{TileLayerView as g}from\"../../layers/TileLayerView.js\";import{LayerView2DMixin as y}from\"./LayerView2D.js\";import{BitmapTileLayerView2D as d}from\"./BitmapTileLayerView2D.js\";const w=i.getLogger(\"esri.views.2d.layers.TileLayerView2D\"),_=[0,0];let I=class extends(g(h(d(y(m))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}initialize(){const e=this.layer.tileInfo,t=e&&e.spatialReference;let i;t||(i=new a(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer})),t.equals(this.view.spatialReference)||(i=new a(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})),this.watch(\"resampling\",(()=>{this.refresh()})),i&&this.addResolvingPromise(l(i))}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}hitTest(){return null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new c(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new u({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new p({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.container.requestRender(),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return f(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){var e;return(null==(e=this._fetchQueue)?void 0:e.length)>0}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,i){const r=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,s=!t(i)&&i.signal;if(!r)try{return await this._fetchImage(e,s)}catch(e){if(!o(e)&&!this.resampling)return this._createBlankImage();throw e}const a=new n(0,0,0,0);let l;try{if(await r.fetchAvailabilityUpsample(e.level,e.row,e.col,a,{signal:s}),a.level!==e.level&&!this.resampling)return this._createBlankImage();l=await this._fetchImage(a,s)}catch(t){if(o(t))throw t;l=await this._fetchImage(e,s)}const{level:h,row:c,col:u}=a;return this.resampling&&h!==e.level?this._resampleImage(l,h,c,u,e.level,e.row,e.col):l}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(e){o(e)||w.error(e)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{timestamp:this.refreshTimestamp,signal:t})}_resampleImage(e,t,i,r,s,a,l){const o=this._tileInfoView.tileInfo.size,h=this._tileInfoView.getTileResolution(t),n=this._tileInfoView.getTileResolution(s);let c=this._tileInfoView.getLODInfoAt(s);const u=c.getXForColumn(l),p=c.getYForRow(a);c=this._tileInfoView.getLODInfoAt(t);const m=c.getXForColumn(r),f=c.getYForRow(i),g=Math.round((u-m)/h),y=Math.round(-(p-f)/h),d=Math.round(o[0]*(n/h)),w=Math.round(o[1]*(n/h)),_=this._createBlankImage();return _.getContext(\"2d\").drawImage(e,g,y,d,w,0,0,o[0],o[1]),_}_createBlankImage(){const e=this._tileInfoView.tileInfo.size,t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}};e([r({dependsOn:[\"layer.resampling?\"]})],I.prototype,\"resampling\",null),I=e([s(\"esri.views.2d.layers.TileLayerView2D\")],I);var T=I;export default T;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as p,eachAlways as a}from\"../../core/promiseUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";const c=c=>{let l=class extends c{async fetchPopupFeatures(e,t){const{layer:o}=this;if(!e)return p(new s(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:o}));if(\"tile\"!==o.type)return p(new s(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:o.type}));const c=this.get(\"view.scale\"),l=o.allSublayers.toArray().filter((e=>{const r=0===e.minScale||c<=e.minScale,t=0===e.maxScale||c>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return a(l.map((async o=>{const s=o.createQuery(),p=r(t)?t.event:null,a=i({renderer:o.renderer,event:p});s.geometry=this.createFetchPopupFeaturesQueryGeometry(e,a),s.outFields=await o.popupTemplate.getRequiredFields();return(await o.queryFeatures(s)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([t()],l.prototype,\"layer\",void 0),l=e([o(\"esri.layers.mixins.TileLayerView\")],l),l};export{c as TileLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t,e){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}(t.stops):e}function n(n){const r=n&&n.renderer,s=\"touch\"===(n&&n.event&&n.event.pointerType)?9:6;if(!r)return s;const o=\"visualVariables\"in r?function(t,n){if(!n)return t;const r=n.filter((t=>\"size\"===t.type)).map((n=>{const{maxSize:r,minSize:s}=n;return(e(r,t)+e(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let t=0;t<o;t++)s+=r[t];const f=Math.floor(s/o);return Math.max(f,t)}(s,r.visualVariables):s;if(\"simple\"===r.type)return t(o,r.symbol);if(\"unique-value\"===r.type){let e=o;return r.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===r.type){let e=o;return r.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return r.type,o}export{n as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./enums.js\";import r from\"./brushes/WGLBrushInfo.js\";import s from\"./brushes/WGLBrushStencil.js\";import t from\"./WGLContainer.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;export default class extends t{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[s],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[r],drawPhase:e.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{n as sortByLevel};\n"]}