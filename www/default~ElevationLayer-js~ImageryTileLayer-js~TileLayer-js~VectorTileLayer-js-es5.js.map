{"version":3,"sources":["webpack:///node_modules/@arcgis/core/layers/mixins/PortalLayer.js","webpack:///node_modules/@arcgis/core/layers/support/Tilemap.js","webpack:///node_modules/@arcgis/core/layers/support/TilemapCache.js","webpack:///node_modules/@arcgis/core/renderers/support/lengthUtils.js","webpack:///node_modules/@arcgis/core/layers/support/serviceTileInfoProperty.js"],"names":["n","getLogger","d","r","arguments","resourceReferences","portalItem","paths","t","destroy","_get","removeOrigin","_set","e","itemId","id","portal","load","instance","supportedTypes","validateItem","supportsData","warn","title","layer","o","getDefault","restUrl","messages","push","type","prototype","String","l","location","left","top","width","height","_allAvailability","byteSize","i","a","_tileAvailabilityBitSet","length","Math","ceil","Uint8Array","service","request","s","row","h","col","c","m","query","f","then","data","details","httpStatus","valid","response","definition","fromJSON","validateJSON","Object","freeze","_updateFromData","Array","isArray","level","url","tileServers","z","A","L","_handles","_pendingTilemapRequests","_availableLevels","levels","cacheByteSize","_prefetchingEnabled","_tilemapCache","add","watch","_initializeTilemapDefinition","_initializeAvailableLevels","error","_tmpTilemapDefinition","_tilemapFromCache","signal","fromDefinition","put","getAvailability","tileInfo","updateTileInfo","upsampleTile","fetchTilemap","fetchAvailability","fetchAvailabilityUpsample","_fetchAvailabilityUpsamplePrefetch","has","abort","remove","p","_prefetches","removeUnordered","_maxPrefetch","parsedUrl","clear","path","size","get","forEach","prefetchingEnabled","hasTilemap","initialSize","constructOnly","Number","readOnly","dependsOn","inches","feet","yards","miles","millimeters","centimeters","decimeters","meters","kilometers","radius","json","origins","read","source","reader","minScale","maxScale","minLOD","maxLOD","ignoreMinMaxLOD","lods","filter","round","scale"],"mappings":"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","file":"default~ElevationLayer-js~ImageryTileLayer-js~TileLayer-js~VectorTileLayer-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import i from\"../../core/Error.js\";import{hasSamePortal as p}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{throwIfAborted as l}from\"../../core/promiseUtils.js\";import m from\"../../portal/Portal.js\";import c from\"../../portal/PortalItem.js\";const n=r.getLogger(\"esri.layers.mixins.PortalLayer\"),d=r=>{let d=class extends r{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]}}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,r,e){if(r.itemId)return new c({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id)}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import(\"../../portal/support/layersLoader.js\");return l(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(t){throw n.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${t}`),t}}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){const e=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||m.getDefault());return e&&o&&!p(o.restUrl,e.restUrl)?(r.messages&&r.messages.push(new i(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return t([e({type:c})],d.prototype,\"portalItem\",null),t([o(\"web-document\",\"portalItem\",[\"itemId\"])],d.prototype,\"readPortalItem\",null),t([a(\"web-document\",\"portalItem\",{itemId:{type:String}})],d.prototype,\"writePortalItem\",null),t([e()],d.prototype,\"resourceReferences\",void 0),d=t([s(\"esri.layers.mixins.PortalLayer\")],d),d};export{d as PortalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../core/lang.js\";import i from\"../../core/Error.js\";import{constant as e}from\"../../core/arrayUtils.js\";import a from\"../../request.js\";class l{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability=\"unknown\",this.byteSize=40}getAvailability(t,i){if(\"unknown\"!==this._allAvailability)return this._allAvailability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%8,l=e>>3,o=this._tileAvailabilityBitSet;return l<0||l>o.length?\"unknown\":o[l]&1<<a?\"available\":\"unavailable\"}_updateFromData(t){const i=this.location.width,e=this.location.height;let a=!0,l=!0;const o=Math.ceil(i*e/8),n=new Uint8Array(o);let r=0;for(let i=0;i<t.length;i++){const e=i%8;t[i]?(l=!1,n[r]|=1<<e):a=!1,7===e&&++r}l?this._allAvailability=\"unavailable\":a?this._allAvailability=\"available\":(this._allAvailability=\"unknown\",this._tileAvailabilityBitSet=n,this.byteSize+=n.length)}static fromDefinition(t,o){const r=t.service.request||a,{row:s,col:h,width:c,height:m}=t,d={query:{f:\"json\"}};return o=o?{...d,...o}:d,r(n(t),o).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:s,left:h,width:c,height:m},valid:!0,data:e(c*m,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==s||t.location.left!==h||t.location.width!==c||t.location.height!==m))throw new i(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:s,left:h,width:c,height:m}});return l.fromJSON(t)}))}static fromJSON(i){l.validateJSON(i);const e=new l;return e.location=Object.freeze(t(i.location)),e._updateFromData(i.data),Object.freeze(e)}static validateJSON(t){if(!t||!t.location)throw new i(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new i(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new i(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new i(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new i(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}}function o(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function n(t){let i;if(\"vector-tile\"===t.service.type)i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;else{const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}const e=t.service.query;return e&&(i=`${i}?${e}`),i}export default l;export{l as Tilemap,o as tilemapDefinitionId,n as tilemapDefinitionUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{cast as l}from\"../../core/accessorSupport/decorators/cast.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import{objectToQuery as a}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import o from\"../../core/PooledArray.js\";import{reject as n,resolve as h,create as c,onAbort as p,createAbortError as m,isAbortError as u,createAbortController as f,isAborted as v}from\"../../core/promiseUtils.js\";import{waitTicks as y}from\"../../core/scheduling.js\";import d from\"../../core/Accessor.js\";import _ from\"../../request.js\";import b from\"../../core/Handles.js\";import{init as g}from\"../../core/watchUtils.js\";import w from\"../../core/LRUCache.js\";import{tilemapDefinitionId as T,Tilemap as j}from\"./Tilemap.js\";var z;const A=t.getLogger(\"esri.layers.support.TilemapCache\");let L=z=class extends d{constructor(e){super(e),this._handles=new b,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=_,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new w(this.cacheByteSize),this._handles.add([this.watch([\"layer.parsedUrl\",\"layer.tileServers?\"],(()=>this._initializeTilemapDefinition())),g(this,\"layer.tileInfo.lods\",(e=>this._initializeAvailableLevels(e)),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(A.error(\"Minimum levels for Tilemap is 3, but got \",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,l){if(!this._availableLevels[e])return n(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const r=this._tmpTilemapDefinition,a=this._tilemapFromCache(e,t,i,r);if(a)return h(a);const o=l&&l.signal;return l={...l,signal:null},c(((e,t)=>{p(o,(()=>t(m())));const i=T(r);let s=this._pendingTilemapRequests[i];if(!s){s=j.fromDefinition(r,l).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return\"unavailable\";const l=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return l?l.getAvailability(t,i):\"unknown\"}getAvailabilityUpsample(e,t,i,l){l.level=e,l.row=t,l.col=i;const r=this.layer.tileInfo;for(r.updateTileInfo(l);;){const e=this.getAvailability(l.level,l.row,l.col);if(\"unavailable\"!==e)return e;if(!r.upsampleTile(l))return\"unavailable\"}}fetchAvailability(e,t,i,l){return this._availableLevels[e]?this.fetchTilemap(e,t,i,l).catch((e=>e)).then((l=>{if(l instanceof j){const r=l.getAvailability(t,i);return\"unavailable\"===r?n(new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})):r}if(u(l))throw l;return\"unknown\"})):n(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,l,r){l.level=e,l.row=t,l.col=i;const s=this.layer.tileInfo;s.updateTileInfo(l);const a=this.fetchAvailability(e,t,i,r).catch((e=>{if(u(e))throw e;if(s.upsampleTile(l))return this.fetchAvailabilityUpsample(l.level,l.row,l.col,l);throw e}));return this._fetchAvailabilityUpsamplePrefetch(l.id,e,t,i,r,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,l,r,s){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this._handles.has(a))return;const o=f();s.then((()=>o.abort()),(()=>o.abort()));let n=!1;const h={remove(){n||(n=!0,o.abort())}};if(this._handles.add(h,a),await y(10,o.signal).catch((()=>{})),n||(n=!0,this._handles.remove(a)),v(o))return;const c={id:e,level:t,row:i,col:l},p={...r,signal:o.signal},m=this.layer.tileInfo;for(let e=0;z._prefetches.length<z._maxPrefetch&&m.upsampleTile(c);++e){const e=this.fetchAvailability(c.level,c.row,c.col,p);z._prefetches.push(e);const t=()=>{z._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?a(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,l){l.level=e,l.row=t-t%this.size,l.col=i-i%this.size;const r=T(l);return this._tilemapCache.get(r)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,l)=>!!e._tilemapFromCache(t,i,l,e._tmpTilemapDefinition)}}};L._maxPrefetch=4,L._prefetches=new o({initialSize:z._maxPrefetch}),e([i({constructOnly:!0,type:Number})],L.prototype,\"levels\",void 0),e([l(\"levels\")],L.prototype,\"castLevels\",null),e([i({readOnly:!0,dependsOn:[\"levels\"],type:Number})],L.prototype,\"size\",null),e([i({constructOnly:!0,type:Number})],L.prototype,\"cacheByteSize\",void 0),e([i({constructOnly:!0})],L.prototype,\"layer\",void 0),e([i({constructOnly:!0})],L.prototype,\"request\",void 0),L=z=e([r(\"esri.layers.support.TilemapCache\")],L);export{L as TilemapCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{earth as e}from\"../../geometry/support/Ellipsoid.js\";import{convertUnit as s,lengthToDegrees as t}from\"../../core/unitUtils.js\";const m={inches:s(1,\"meters\",\"inches\"),feet:s(1,\"meters\",\"feet\"),\"us-feet\":s(1,\"meters\",\"us-feet\"),yards:s(1,\"meters\",\"yards\"),miles:s(1,\"meters\",\"miles\"),\"nautical-miles\":s(1,\"meters\",\"nautical-miles\"),millimeters:s(1,\"meters\",\"millimeters\"),centimeters:s(1,\"meters\",\"centimeters\"),decimeters:s(1,\"meters\",\"decimeters\"),meters:s(1,\"meters\",\"meters\"),kilometers:s(1,\"meters\",\"kilometers\"),\"decimal-degrees\":1/t(1,\"meters\",e.radius)};export{m as meterIn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"./TileInfo.js\";const r={type:e,json:{origins:{service:{read:{source:[\"tileInfo\",\"minScale\",\"maxScale\",\"minLOD\",\"maxLOD\"],reader:n}}}}};function n(r,n,l,o){if(!r)return null;const{minScale:i,maxScale:t,minLOD:m,maxLOD:s}=n;if(null!=m&&null!=s)return o&&o.ignoreMinMaxLOD?e.fromJSON(r):e.fromJSON({...r,lods:r.lods.filter((({level:e})=>null!=e&&e>=m&&e<=s))});if(0!==i&&0!==t){const n=e=>Math.round(1e4*e)/1e4,l=i?n(i):1/0,o=t?n(t):-1/0;return e.fromJSON({...r,lods:r.lods.filter((e=>{const r=n(e.scale);return r<=l&&r>=o}))})}return e.fromJSON(r)}export{n as readServiceTileInfo,r as serviceTileInfoProperty};\n"]}