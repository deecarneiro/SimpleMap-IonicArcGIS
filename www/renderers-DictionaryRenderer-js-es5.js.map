{"version":3,"sources":["webpack:///node_modules/@arcgis/core/renderers/DictionaryRenderer.js"],"names":["w","x","getLogger","v","e","_ongoingRequests","Map","_symbolCache","config","fieldMap","scaleExpression","scaleExpressionTitle","url","type","s","scalingExpressionInfo","expression","returnType","t","r","origin","visualVariables","_dictionaryPromise","fetchResources","i","_symbolFields","attributes","o","n","toString","a","get","pop","l","split","p","u","length","indexOf","_itemNames","has","push","substr","map","Number","toRgba","primitiveName","propertyName","value","m","_cimPartsToCIMSymbol","put","collectVVRequiredFields","name","add","error","abortOptions","responseType","query","f","data","authoringInfo","_refSymbolUrlTemplate","cimRefTemplateUrl","Set","itemsNames","symbol","configuration","hasOwnProperty","c","fields","filter","spatialReference","then","scale","repurposeFeature","geometry","evaluate","$feature","$view","reduce","getAttributeHash","JSON","stringify","replace","set","primitiveOverrides","symbolLayers","unshift","Array","_getSymbolPart","_combineSymbolParts","Object","json","read","source","write","target","prototype","String","overridePolicy","enabled","S"],"mappings":"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","file":"renderers-DictionaryRenderer-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{clone as s}from\"../core/lang.js\";import{isSome as t}from\"../core/maybe.js\";import{numericHash as r}from\"../core/string.js\";import i from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../core/accessorSupport/decorators/writer.js\";import l from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{isAbortError as c,all as p,reject as u}from\"../core/promiseUtils.js\";import{loadArcade as m,createDictionaryExpression as f}from\"../support/arcadeOnDemand.js\";import{collectArcadeFieldNames as h}from\"../layers/support/fieldUtils.js\";import y from\"../Color.js\";import d from\"../symbols/CIMSymbol.js\";import g from\"../request.js\";import b from\"./Renderer.js\";import{VisualVariablesMixin as j}from\"./mixins/VisualVariablesMixin.js\";import _ from\"../core/LRUCache.js\";var w;const x=i.getLogger(\"esri.renderers.DictionaryRenderer\");let v=w=class extends(j(b)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new _(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type=\"dictionary\"}writeData(e,s){e&&(s.scalingExpressionInfo={expression:e,returnType:\"number\"})}writeVisualVariables(e,s,t,r){null!=r&&r.origin||super.writeVisualVariables(e,s,t,r)}clone(){return new w({config:s(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:s(this.fieldMap),url:s(this.url),visualVariables:s(this.visualVariables)})}async getSymbolAsync(e,s){let t;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(s));try{t=await this._dictionaryPromise}catch(e){if(c(e))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const s of this._symbolFields){const t=this.fieldMap[s];if(t&&null!==e.attributes[t]&&void 0!==e.attributes[t]){const r=\"\"+e.attributes[t];i[s]=r}else i[s]=\"\"}const o=t(i,s);if(!o||\"string\"!=typeof o)return null;const n=r(o).toString(),a=this._symbolCache.get(n);if(a)return a.catch((()=>{this._symbolCache.pop(n)})),a;const l=o.split(\";\"),p=[],u=[];for(const e of l)if(e&&0!==e.length)if(-1===e.indexOf(\"po:\"))if(-1!==e.indexOf(\"|\"))for(const s of e.split(\"|\"))this._itemNames.has(s)&&p.push(s);else this._itemNames.has(e)&&p.push(e);else{const s=e.substr(3).split(\"|\");if(3===s.length){const e=s[0],t=s[1];let r=s[2];if(\"DashTemplate\"===t)r=r.split(\" \").map((e=>Number(e)));else if(\"Color\"===t){const e=new y(r).toRgba();r=[e[0],e[1],e[2],255*e[3]]}else r=Number(r);u.push({primitiveName:e,propertyName:t,value:r})}}const m=this._cimPartsToCIMSymbol(p,u,s);return this._symbolCache.put(n,m,1),m}async collectRequiredFields(e,s){await this.collectVVRequiredFields(e,s),this.scaleExpression&&await h(e,s,this.scaleExpression);const t=s.map((e=>e.name));for(const s in this.fieldMap)t.indexOf(this.fieldMap[s])<0||e.add(this.fieldMap[s])}get arcadeRequired(){return!0}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void x.error(\"no valid URL!\");const s=t(e)?e.abortOptions:null,r=g(this.url+\"/resources/styles/dictionary-info.json\",{responseType:\"json\",query:{f:\"json\"},...s}),[{data:i}]=await p([r,m()]);if(!i)throw this._dictionaryPromise=null,new l(\"esri.renderers.DictionaryRenderer\",\"Bad dictionary data!\");const o=i.expression,n=i.authoringInfo;this._refSymbolUrlTemplate=this.url+\"/\"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=n.symbol;const a={};if(this.config){const e=this.config;for(const s in e)a[s]=e[s]}for(const e of n.configuration)a.hasOwnProperty(e.name)||(a[e.name]=e.value);const c=[];if(t(e)&&e.fields&&this.fieldMap)for(const s of this._symbolFields){const t=this.fieldMap[s],r=e.fields.filter((e=>e.name===t));r.length>0&&c.push({...r[0],name:s})}return this._dictionaryPromise=f(o,t(e)?e.spatialReference:null,c,a).then((e=>{const s={scale:0};return(r,i)=>{const o=e.repurposeFeature({geometry:null,attributes:r});return s.scale=t(i)?i.scale:void 0,e.evaluate({$feature:o,$view:s})}})).catch((e=>(x.error(\"Creating dictinoary expression failed:\",e),null))),this._dictionaryPromise}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),\"\")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}async _getSymbolPart(e,s){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const t=this._refSymbolUrlTemplate.replace(/\\{itemName\\}/gi,e),r=g(t,{responseType:\"json\",query:{f:\"json\"},...s});this._ongoingRequests.set(e,r);try{return(await r).data}catch(s){return this._ongoingRequests.delete(e),u(s)}}_combineSymbolParts(e,s){if(!e||0===e.length)return null;if(1===e.length)return{type:\"CIMSymbolReference\",symbol:e[0],primitiveOverrides:s};const t={...e[0]};t.symbolLayers=[];for(const s of e){const e=s;t.symbolLayers.unshift(...e.symbolLayers)}return{type:\"CIMSymbolReference\",symbol:t,primitiveOverrides:s}}async _cimPartsToCIMSymbol(e,s,t){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=this._getSymbolPart(e[s],t);const i=await p(r);return new d({data:this._combineSymbolParts(i,s)})}};e([o({type:Object,json:{read:{source:\"configuration\"},write:{target:\"configuration\"}}})],v.prototype,\"config\",void 0),e([o({type:Object,json:{write:!0}})],v.prototype,\"fieldMap\",void 0),e([o({type:String,json:{read:{source:\"scalingExpressionInfo.expression\"},write:!0}})],v.prototype,\"scaleExpression\",void 0),e([a(\"scaleExpression\")],v.prototype,\"writeData\",null),e([o({type:String,json:{read:{source:\"scalingExpressionInfo.title\"},write:{target:\"scalingExpressionInfo.title\",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],v.prototype,\"scaleExpressionTitle\",void 0),e([o({type:String,json:{write:!0}})],v.prototype,\"url\",void 0),e([a(\"visualVariables\")],v.prototype,\"writeVisualVariables\",null),v=w=e([n(\"esri.renderers.DictionaryRenderer\")],v);var S=v;export default S;\n"]}