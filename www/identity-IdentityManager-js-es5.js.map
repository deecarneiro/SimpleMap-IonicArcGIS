{"version":3,"sources":["webpack:///node_modules/@arcgis/core/identity/IdentityManager.js","webpack:///node_modules/focus-trap/dist/focus-trap.esm.js","webpack:///node_modules/@arcgis/core/identity/IdentityForm.js","webpack:///node_modules/@arcgis/core/identity/OAuthInfo.js","webpack:///node_modules/@arcgis/core/core/cookie.js","webpack:///node_modules/@arcgis/core/identity/ServerInfo.js","webpack:///node_modules/tabbable/dist/index.esm.js","webpack:///node_modules/@arcgis/core/identity/OAuthCredential.js","webpack:///node_modules/@arcgis/core/identity/IdentityModal.js","webpack:///node_modules/@arcgis/core/identity/IdentityManagerBase.js"],"names":["o","a","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","activeFocusDelay","activeFocusTraps","trapQueue","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","isSelectableInput","node","tagName","toLowerCase","select","isEscapeEvent","e","keyCode","isTabEvent","delay","fn","setTimeout","findIndex","arr","idx","every","createFocusTrap","elements","userOptions","doc","document","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","element","some","container","contains","getNodeForOption","optionName","optionValue","querySelector","Error","concat","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","tabbableNodes","lastTabbableNode","undefined","group","tryFocus","focus","preventScroll","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","preventDefault","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkTab","destinationNode","shiftKey","startOfGroupIndex","_ref","destinationGroupIndex","destinationGroup","lastOfGroupIndex","_ref2","_destinationGroupIndex","_destinationGroup","checkKey","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","deactivateOptions","clearTimeout","onDeactivate","updateContainerElements","containerElements","elementsAsArray","Boolean","p","d","c","m","h","v","b","s","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","t","n","l","oAuthInfo","info","test","lblItem","g","lblUser","required","autocomplete","spellcheck","type","bind","afterCreate","f","lblPwd","_","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","y","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","username","password","prototype","_oAuthCred","appId","authNamespace","expiration","forceLogin","forceUserId","locale","minTimeUntilExpiration","popup","popupCallbackUrl","popupWindowFeatures","portalUrl","preserveUrlHash","userId","fromJSON","toJSON","json","write","expires","Date","setTime","getTime","toUTCString","r","encodeURIComponent","cookie","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","candidates","Array","slice","querySelectorAll","call","unshift","isContentEditable","contentEditable","getTabindex","tabindexAttr","parseInt","getAttribute","isNaN","nodeName","tabIndex","sortOrderedTabbables","documentOrder","isInput","isHiddenInput","isDetailsWithSummary","children","child","getCheckedRadio","nodes","form","checked","isTabbableRadio","name","radioScope","ownerDocument","queryRadios","radioSet","window","CSS","escape","err","console","message","isRadio","isNonTabbableRadio","isHidden","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","display","isNodeMatchingSelectorFocusable","isNodeMatchingSelectorTabbable","tabbable","options","regularTabbables","orderedTabbables","candidate","candidateTabindex","sort","focusable","isTabbable","focusableCandidateSelector","isFocusable","storage","ssl","token","_init","now","_load","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","open","send","getItem","parse","declaredClass","u","createElement","content","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","close","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","D","j","host","q","E","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","signInPage","useSignInPage","normalizeWebTierAuth","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","L","scope","resources","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","_doPortalSignIn","_getEsriAuthCookie","findCredential","destroy","path","domain","location","hostname","endsWith","email","resolve","_restInfoPms","_selfReq","_findOAuthInfo","selfDfd","_getPortalSelf","_enqueue","_isRESTService","href","S","w","isAdmin","serverUrl","customParameters","auth_tier","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","checkAppAccess","credential","getCredential","force","client_id","valid","viewOnlyUserTypeApp","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","localStorage","sessionStorage","save","_redirectFunc","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","allSSL","portalMode","supportsOAuth","protocol","cookieEnabled","_getAllCookies","portalApp","urlKey","match","RegExp","decodeURIComponent","top","_hasPortalSession","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_canUsePortalSignInWorkflow","_pendingDfd","_exchangeToken","baseUrl","signin","useSSL","returnUrlParamName","returnUrl","isValid","oAuthState","oAuthSignIn","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","response_type","force_login","prepopulatedusername","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer","EventedAccessor"],"mappings":"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","file":"identity-IdentityManager-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n","/*!\n* focus-trap 6.2.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      if (e.shiftKey) {\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref) {\n          var firstTabbableNode = _ref.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex >= 0) {\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var lastTabbableNode = _ref2.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex >= 0) {\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (config.clickOutsideDeactivates) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as n}from\"../widgets/support/decorators/renderable.js\";import{j as u}from\"../chunks/index.js\";import l from\"../widgets/Widget.js\";const p=\"esri-identity-form\",a=\"esri-identity-form__group\",d=\"esri-identity-form__label\",c=\"esri-identity-form__footer\",m=\"esri-input\",h=\"esri-button\",v=\"esri-button--secondary\";let b=class extends l{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:n,messages:l}=this,b=u(\"div\",{class:a},r(n?l.oAuthInfo:l.info,{server:/\\.arcgis\\.com/i.test(e)?\"ArcGIS Online\":e,resource:`(${t||l.lblItem})`})),g=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:m}))),f=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:m}))),_=u(\"div\",{class:this.classes(a,c)},u(\"input\",{type:\"submit\",disabled:!!i,value:i?l.lblSigning:l.lblOk,class:h}),u(\"input\",{type:\"button\",value:l.lblCancel,bind:this,onclick:this._cancel,class:this.classes(h,v)})),y=s?u(\"div\",null,s.details&&s.details.httpStatus?l.invalidUser:l.noAuthService):null;return u(\"form\",{class:p,bind:this,onsubmit:this._submit},b,y,g,f,_)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(),i(\"esri/identity/t9n/identity\")],b.prototype,\"messages\",void 0),s([e(),n()],b.prototype,\"signingIn\",void 0),s([e(),n()],b.prototype,\"server\",void 0),s([e(),n()],b.prototype,\"resource\",void 0),s([e(),n()],b.prototype,\"error\",void 0),s([e(),n()],b.prototype,\"oAuthPrompt\",void 0),b=s([t(\"esri.identity.IdentityForm\")],b);var g=b;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as e}from\"./maybe.js\";function t(t,o,n={}){let i=e(n.expires);if(\"number\"==typeof i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),i=n.expires=e}\"string\"!=typeof i&&(n.expires=i.toUTCString());let r=t+\"=\"+encodeURIComponent(o);for(const e in n){r+=\"; \"+e;const t=n[e];!0!==t&&(r+=\"=\"+t)}document.cookie=r}export{t as writeCookie};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*!\n* tabbable 5.1.5\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable);\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable);\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=e,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const e=Date.now();if(this.expires>e){(this.expires-e)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s||(s=t[e.authNamespace]={}),s[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}destroy(){const t=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const s=t[e.authNamespace];if(s){delete s[e.portalUrl];try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s&&(s=s[e.portalUrl],s&&(this.appId=s.appId,this.expires=s.expires,this.ssl=s.ssl,this.token=s.token,this.userId=s.userId))}}_load(){let t={};if(this.storage){const e=this.storage.getItem(\"esriJSAPIOAuth\");if(e)try{t=JSON.parse(e)}catch(t){console.log(t)}}return t}}t.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as o}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as i}from\"../widgets/support/decorators/renderable.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as a}from\"../widgets/support/widget.js\";import n from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const d=\"esri-identity-modal\",l=\"esri-identity-modal--open\",p=\"esri-identity-modal--closed\",u=\"esri-identity-modal__title\",m=\"esri-identity-modal__dialog\",h=\"esri-identity-modal__content\",_=\"esri-identity-modal__close-button\",y=\"esri-icon-close\";let g=class extends n{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:s,title:o,messages:i}=this,a=e&&!!s,n={[l]:a,[p]:!a},c=r(\"button\",{class:_,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:y})),h=`${t}_title`,g=`${t}_content`,f=o?r(\"h1\",{id:h,class:u},o):null,v=a?r(\"div\",{bind:this,class:m,role:\"dialog\",\"aria-labelledby\":h,\"aria-describedby\":g,afterCreate:this._createFocusTrap},c,f,this._renderContent(g)):null;return r(\"div\",{tabIndex:-1,class:this.classes(d,n)},v)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap(),requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:h,id:t,innerHTML:e}):a(e)?r(\"div\",{class:h,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:h,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};t([e({readOnly:!0})],g.prototype,\"container\",void 0),t([e(),i()],g.prototype,\"content\",void 0),t([e(),i()],g.prototype,\"open\",void 0),t([e(),i(),o(\"esri/t9n/common\")],g.prototype,\"messages\",void 0),t([e({aliasOf:\"messages.auth.signIn\"}),i()],g.prototype,\"title\",void 0),g=t([s(\"esri.identity.IdentityModal\")],g);var f=g;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{mixin as r,fixJson as s}from\"../core/lang.js\";import{getDeepValue as i}from\"../core/object.js\";import n from\"../config.js\";import{escapeRegExpString as o}from\"../core/string.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../core/Error.js\";import{Url as c,hasSameOrigin as d,queryToObject as u,normalize as p,urlToObject as _,getProxyRule as f,makeAbsolute as g,objectToQuery as m}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as v}from\"../core/events.js\";import{createAbortController as S,createResolver as w,onAbort as I,isAborted as k,resolve as A}from\"../core/promiseUtils.js\";import U from\"../core/Evented.js\";import{id as y}from\"../kernel.js\";import x from\"../request.js\";import{writeCookie as T}from\"../core/cookie.js\";import R from\"./IdentityForm.js\";import O from\"./IdentityModal.js\";import C from\"./OAuthCredential.js\";import P from\"./OAuthInfo.js\";import b from\"./ServerInfo.js\";const D={},j=e=>{const t=new c(e.owningSystemUrl).host,r=new c(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},q=(e,t)=>!!(j(e)&&t&&t.some((t=>t.test(e.server))));let E=class extends U{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=R,this.tokenValidity=null,this.signInPage=null,this.useSignInPage=!0,this.normalizeWebTierAuth=!1,this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;t?(e=e.filter((e=>!this.findOAuthInfo(e.portalUrl))),this.oAuthInfos=t.concat(e)):this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let i,n=this.findServerInfo(t),o=!0;n||(n=new b,n.server=this._getServerInstanceRoot(t),s?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),i=this._findCredential(t),i?(delete e.server,r(i,e),o=!1):(i=new L({userId:e.userId,server:n.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),i.resources=[t],this.credentials.push(i)),i.emitTokenChange(!1),o||i.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new b(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new L(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){let r,s;if(e=this._sanitizeUrl(e),s=this._isServerRsrc(e)?\"server\":\"portal\",t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===s){r=t;break}return r}getCredential(e,t){let r,s,i=!0;t&&(r=!!t.token,s=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=S(),o=w();if(t.signal&&I(t.signal,(()=>{n.abort()})),I(n,(()=>{o.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))})),k(n))return o.promise;t.signal=n.signal;const a=this._isAdminResource(e),h=r&&this._doPortalSignIn(e)?this._getEsriAuthCookie():null,c=r?this.findCredential(e):null;let d;if(c&&s&&s.details&&498===s.details.httpStatus)c.destroy(),h&&h.token===t.token&&(T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:document.domain}),window.location.hostname.endsWith(\".arcgis.com\")&&T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:\"arcgis.com\"}));else if(h||c){const t=h&&h.email||c&&c.userId;return d=new l(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+t+\"'. You do not have access to this resource: \"+e,{error:s}),o.reject(d),o.promise}const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new l(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),o.reject(d),o.promise;p=new b,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return i&&p.hasPortal&&void 0===p._selfReq&&!this._findOAuthInfo(e)&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,o,a)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const i=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new c(window.location.href.toLowerCase()),o=this._getEsriAuthCookie(),a=e.shortLivedTokenValidity;let h,u,p,_,f,g,m,v,S,w;t&&(w=this.tokenValidity||a||this.defaultTokenValidity,w>a&&a>0&&(w=a)),s&&(u=s.isAdmin,p=s.serverUrl,_=s.token,m=s.signal,v=s.ssl,e.customParameters=s.customParameters),u?f=e.adminTokenServiceUrl:(f=e.tokenServiceUrl,g=new c(f.toLowerCase()),o&&(h=o.auth_tier,h=h&&h.toLowerCase()),(\"web\"===h||e.webTierAuth)&&s&&s.serverUrl&&!v&&\"http\"===n.scheme&&(d(n.uri,f,!0)||\"https\"===g.scheme&&n.host===g.host&&\"7080\"===n.port&&\"7443\"===g.port)&&(f=f.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"))),S=r({query:r({request:\"getToken\",username:t&&t.username,password:t&&t.password,serverUrl:p,token:_,expiration:w,referer:u||i?window.location.host:null,client:u?\"referer\":null,f:\"json\"},e.customParameters),method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:m},s&&s.ioArgs),i||(S.withCredentials=!1);return x(f,S).then((r=>{const s=r.data;if(!s||!s.token)return new l(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return D[i]||(D[i]={}),t&&(D[i][t.username]=t.password),s.validity=w,s}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,r){let s=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let n;const o={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e,!0)||r&&r.force))n=i.server+\"/sharing/rest/oauth2/validateAppAccess\",o.client_id=t;else{if(!i.token)return{credential:i};n=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};n=i.server+\"/rest/services\"}return i.token&&(o.token=i.token),x(n,{query:o,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new l(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return s=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new l(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new l(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:s})))}setOAuthResponseHash(e){var t;const r=this._oAuthDfd;if(this._oAuthDfd=null,!r||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const s=u(e);if(s.error){const e=\"access_denied\"===s.error,t=new l(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+s.error+\" - \"+s.error_description);r.reject(t)}else{const e=r.sinfo_,t=r.oinfo_,i=t._oAuthCred,n=new L({userId:s.username,server:e.server,token:s.access_token,expires:Date.now()+1e3*Number(s.expires_in),ssl:\"true\"===s.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=s.persist?window.localStorage:window.sessionStorage,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),r.resolve(n)}}setRedirectionHandler(e){this._redirectFunc=e}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=w(),i=()=>{var e,t,r,s,i;null==(e=a)||e.remove(),null==(t=h)||t.remove(),null==(r=c)||r.remove(),null==(s=o)||s.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=o=a=h=c=null},n=()=>{i(),this._oAuthDfd=null,s.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&I(r.signal,(()=>{n()}));let o=new this.formConstructor;o.resource=this.getResourceName(e),o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");let a=o.on(\"cancel\",n),h=this.dialog.watch(\"open\",n),c=o.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((n=>{i();const o=new L({userId:e.username,server:t.server,token:n.token,expires:null!=n.expires?Number(n.expires):null,ssl:!!n.ssl,isAdmin:r.isAdmin,validity:n.validity});s.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=w();const i=this._oAuthDfd;null!=s&&s.signal&&I(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&a()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=r;const n=!s||!1!==s.oAuthPopupConfirmation;if(!r.popup||!n)return this._doOAuthSignIn(e,t,r),i.promise;const o=new this.formConstructor;o.oAuthPrompt=!0,o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");const a=()=>{u(),this._oAuthDfd=null,i.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))},h=o.on(\"cancel\",a),c=this.dialog.watch(\"open\",a),d=o.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,r)})),u=()=>{h.remove(),c.remove(),d.remove(),o.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=u(e);let r=!1;t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\")?(t.state=JSON.parse(t.state),this._oAuthHash=t,r=!0):t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0)),r&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new l(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],n=this.findServerInfo(r.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,r.userId),o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,i),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,i))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,n=this.findServerInfo(t.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,t.userId),o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t&&t.isAdmin&&!d(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!d(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===r&&(r=t.indexOf(\"/sharing\")),-1===r&&\"/\"===t.substr(-1)&&(r=t.length-1),r>-1?e.substring(0,r):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):r.test(e)?e=e.replace(r,\"https://devext.arcgis.com\"):s.test(e)&&(e=e.replace(s,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(n.request.proxyUrl||\"\").toLowerCase(),r=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==r&&(e=e.substring(r+t.length+1)),e=p(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;r=s.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new c(e.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some((e=>e.regex.test(t.uri)));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),s||n.portalUrl&&(s=d(t,n.portalUrl,!0)),s||(s=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),s=s||this._agsPortal.test(t.path),s}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,n)=>{-1===r&&i.regex.test(e)&&(r=n),-1===s&&i.regex.test(t)&&(s=n)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r&&r.owningSystemUrl;s&&j(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,s;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return t=s+\"/admin/generateToken\",r=x(e=s+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(s=e.toLowerCase().indexOf(\"/sharing\"),-1!==s&&(t=e.substring(0,s)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,r){return x(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}}).then((e=>e.data.token))}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return A({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return x(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_hasPortalSession(){return!!this._getEsriAuthCookie()}_getEsriAuthCookie(){let e=null;if(navigator.cookieEnabled){const t=this._getAllCookies(\"esri_auth\");let r;for(let s=0;s<t.length;s++){const i=JSON.parse(t[s]);if(i.portalApp){e=i;break}r?r.push(i):r=[i]}if(!e&&r)for(const t of r)if(t.urlKey&&window.location.hostname===`${t.urlKey.toLowerCase()}.${t.customBaseUrl}`){e=t;break}}if(e){let t=null;e.expires&&(\"number\"==typeof e.expires?t=e.expires:\"string\"==typeof e.expires&&(t=Date.parse(e.expires)),isNaN(t)&&(t=null),e.expires=t),t&&t<Date.now()&&(e=null)}return e}_getAllCookies(e){const t=[],r=document.cookie.match(new RegExp(\"(?:^|; )\"+o(e)+\"=([^;]*)\",\"g\"));if(r)for(let e=0;e<r.length;e++){let s=r[e];const i=s.indexOf(\"=\");i>-1&&(s=s.substring(i+1),t.push(decodeURIComponent(s)))}return t}_doPortalSignIn(e,t){if(navigator.cookieEnabled){const r=this._getEsriAuthCookie(),s=this._portalConfig,i=window.location.href,n=this.findServerInfo(e);if((t||this.useSignInPage)&&(s||this._isPortalDomain(i)||r)&&(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))&&(this._isIdProvider(i,e)||s&&(this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),e)||this._isIdProvider(s.restBaseUrl,e))||d(i,e,!0)))return!0}return!1}_canUsePortalSignInWorkflow(e){return this._doPortalSignIn(e)&&(window===window.top||this._hasPortalSession())}_checkProtocol(e,t,r,s){let i=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===n.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&f(n)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){r(new l(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,r,s,i,n){return s||(s=w()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_&&e.options_.resource,s=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(s,i,n,o)=>{const a=e.sinfo_,h=!e.options_||!1!==e.options_.prompt,c=a.hasPortal&&this._findOAuthInfo(e.resUrl_);let d,u;if(this._canUsePortalSignInWorkflow(e.resUrl_)){const s=this._getEsriAuthCookie(),i=this._portalConfig;if(s){if(!a.webTierAuth){\"web\"===(s.auth_tier&&s.auth_tier.toLowerCase())&&(a.webTierAuth=!0)}return d=new L({userId:s.email,server:a.server,token:a.webTierAuth?null:s.token,expires:s.expires}),void(d.token?e._pendingDfd=this._exchangeToken(d.server,c?c.appId:\"arcgisonline\",d.token).then((e=>{d.token=e,t(d)})).catch((()=>{t(d)})):t(d))}if(h){let t=\"\";const s=window.location.href;return t=this.signInPage?this.signInPage:i?i.baseUrl+i.signin:this._isIdProvider(s,e.resUrl_)?this._getOrigin(s)+\"/home/signin.html\":a.tokenServiceUrl.replace(this._rePortalTokenSvc,\"\")+\"/home/signin.html\",t=t.replace(/http:/i,\"https:\"),i&&!1===i.useSSL&&(t=t.replace(/https:/i,\"http:\")),void(0===s.toLowerCase().replace(\"https\",\"http\").indexOf(t.toLowerCase().replace(\"https\",\"http\"))?(u=new l(\"identity-manager:unexpected-error\",\"Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: \"+e.resUrl_),r(u)):(this._rejectOnPersistedPageShow=!0,this._redirectFunc?this._redirectFunc({signInPage:t,returnUrlParamName:\"returnUrl\",returnUrl:s,resourceUrl:e.resUrl_,serverInfo:a}):window.location.href=t+\"?returnUrl=\"+encodeURIComponent(s)))}u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)}else if(s)t(new L({userId:s,server:a.server,token:n,expires:null!=o?Number(o):null,ssl:!!i}));else if(c){let s=c._oAuthCred;if(!s){const e=new C(c,window.localStorage),t=new C(c,window.sessionStorage);e.isValid()&&t.isValid()?e.expires>t.expires?(s=e,t.destroy()):(s=t,e.destroy()):s=e.isValid()?e:t,c._oAuthCred=s}if(s.isValid())d=new L({userId:s.userId,server:a.server,token:s.token,expires:s.expires,ssl:s.ssl,_oAuthCred:s}),c.appId!==s.appId&&this._doPortalSignIn(e.resUrl_,!0)?e._pendingDfd=this._exchangeToken(d.server,c.appId,d.token).then((e=>{d.token=e,s.token=e,s.save(),t(d)})).catch((()=>{t(d)})):t(d);else if(this._oAuthHash&&this._oAuthHash.state.portalUrl===c.portalUrl){const e=this._oAuthHash;d=new L({userId:e.username,server:a.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s}),c.userId=d.userId,s.storage=e.persist?window.localStorage:window.sessionStorage,s.token=d.token,s.expires=d.expires,s.userId=d.userId,s.ssl=d.ssl,s.save(),this._oAuthHash=null,t(d)}else h?e._pendingDfd=this.oAuthSignIn(e.resUrl_,a,c,e.options_).then(t,r):(u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u))}else if(h){if(this._checkProtocol(e.resUrl_,a,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,a,s).then(t,r)}}else u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)},n=()=>{const s=e.sinfo_,i=s.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(q(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new L(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new L({userId:l.userId,server:s.server,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{r(e)}))}};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),h=e.sinfo_._restInfoPms;h?h.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=i(\"authInfo.tokenServicesUrl\",t)||i(\"authInfo.tokenServiceUrl\",t)||i(\"tokenServiceUrl\",t),r.shortLivedTokenValidity=i(\"authInfo.shortLivedTokenValidity\",t),r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}a&&r.owningSystemUrl?n():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new l(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):a&&o?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,n,o;return t&&(s=t.user&&t.user.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e&&e.token,r.tokenExpiration=e&&e.expires,r))):!s&&i&&parseFloat(n)>=4.4&&!this._canUsePortalSignInWorkflow(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r,s=e.portalUrl;const i=e.customBaseUrl,n=e.owningTenant,o=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,t=x(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new P({appId:\"arcgisonline\",popup:!0,popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=A(),t.then((()=>{if(this.defaultOAuthInfo)return s=s.replace(/^http:/i,\"https:\"),x(s+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this.defaultOAuthInfo.appId,redirect_uri:g(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=s,this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,r,s){const i={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(i),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?g(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId);const o=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",a=o+\"?\"+m(n);if(s.popup){const e=window.open(a,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new l(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=v(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new l(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:o,resourceUrl:e,serverInfo:r,oAuthInfo:s}):window.location.href=a}};E=e([h(\"esri.identity.IdentityManagerBase\")],E);let L=class extends U.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=y.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,s=r&&q(e,y._legacyFed),i=e.webTierAuth,n=i&&y.normalizeWebTierAuth,o=D[this.server],a=o&&o[this.userId];let h,l,c=this.resources&&this.resources[0],d=r&&y.findServerInfo(t),u={username:this.userId,password:a};if((!i||n)&&(r&&!d&&y.serverInfos.some((e=>(y._isIdProvider(t,e.server)&&(d=e),!!d))),h=d&&y.findCredential(d.server,this.userId),!r||h)){if(!s){if(r)l={serverUrl:c,token:h&&h.token,ssl:h&&h.ssl};else if(n)u=null,l={ssl:this.ssl};else{if(!a){let t;return c&&(c=y._sanitizeUrl(c),this._enqueued=1,t=y._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return y.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}h.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&y.credentials.forEach((e=>{const t=y.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(y._hasSameServerInstance(this.server,r)||y._isIdProvider(r,this.server))&&(q(t,y._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&y.findServerInfo(this.server),r=t&&t.owningSystemUrl,s=r&&y.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!s||!s.webTierAuth||y.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=y.credentials.indexOf(this);e>-1&&y.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer;let t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();t<0&&(t=0),this._refreshTimer=setTimeout(this.refreshToken.bind(this),t>e?t-e:t)}};e([a()],L.prototype,\"creationTime\",void 0),e([a()],L.prototype,\"expires\",void 0),e([a()],L.prototype,\"isAdmin\",void 0),e([a()],L.prototype,\"oAuthState\",void 0),e([a()],L.prototype,\"resources\",void 0),e([a()],L.prototype,\"scope\",void 0),e([a()],L.prototype,\"server\",void 0),e([a()],L.prototype,\"ssl\",void 0),e([a()],L.prototype,\"token\",void 0),e([a()],L.prototype,\"tokenRefreshBuffer\",void 0),e([a()],L.prototype,\"userId\",void 0),e([a()],L.prototype,\"validity\",void 0),L=e([h(\"esri.identity.Credential\")],L);export{L as Credential,E as IdentityManagerBase};\n"]}