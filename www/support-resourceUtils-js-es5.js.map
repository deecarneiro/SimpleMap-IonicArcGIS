{"version":3,"sources":["webpack:///node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["u","t","r","a","load","s","itemUrl","start","n","num","sortOrder","c","sortField","i","l","query","signal","portal","_request","p","total","nextStart","resources","map","e","created","size","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","path","d","m","h","FormData","append","access","method","body","deleteAll","lastIndexOf","slice","length","o","Blob","url","responseType","data","f"],"mappings":"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","file":"support-resourceUtils-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{get as e,isSome as t,isNone as r}from\"../../core/maybe.js\";import a from\"../../core/Error.js\";import{join as o,getPathExtension as s}from\"../../core/urlUtils.js\";import n from\"../../request.js\";async function u(t,r={},a){await t.load(a);const s=o(t.itemUrl,\"resources\"),{start:n=1,num:u=10,sortOrder:c=\"asc\",sortField:i=\"created\"}=r,l={query:{start:n,num:u,sortOrder:c,sortField:i},signal:e(a,\"signal\")},p=await t.portal._request(s,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:e,size:r,resource:a})=>({created:new Date(e),size:r,resource:t.resourceFromPath(a)})))}}async function c(r,s,n,u){if(!r.hasPath())throw new a(`portal-item-resource-${s}:invalid-path`,\"Resource does not have a valid path\");await r.portalItem.load(u);const c=o(r.portalItem.userItemUrl,\"add\"===s?\"addResources\":\"updateResources\"),[i,l]=p(r.path),m=await d(n),h=new FormData;return i&&\".\"!==i&&h.append(\"resourcesPrefix\",i),h.append(\"fileName\",l),h.append(\"file\",m,l),h.append(\"f\",\"json\"),t(u)&&u.access&&h.append(\"access\",u.access),await r.portalItem.portal._request(c,{method:\"post\",body:h,signal:e(u,\"signal\")}),r}async function i(t,r,s){if(!r.hasPath())throw new a(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await t.load(s);const n=o(t.userItemUrl,\"removeResources\");await t.portal._request(n,{method:\"post\",query:{resource:r.path},signal:e(s,\"signal\")}),r.portalItem=null}async function l(t,r){await t.load(r);const a=o(t.userItemUrl,\"removeResources\");return t.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:e(r,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function m(e){const[t,a]=function(e){const t=s(e);if(r(t))return[e,\"\"];return[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[o,n]=p(t);return[o,n,a]}async function d(e){if(e instanceof Blob)return e;return(await n(e.url,{responseType:\"blob\"})).data}function h(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}function f(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}export{c as addOrUpdateResource,d as contentToBlob,u as fetchResources,h as getSiblingOfSameType,f as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,m as splitPrefixFileNameAndExtension};\n"]}