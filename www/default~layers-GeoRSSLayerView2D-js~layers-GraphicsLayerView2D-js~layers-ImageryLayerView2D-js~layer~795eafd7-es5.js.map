{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexBuffer.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/collisions/Metric.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/MeshData.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayObject.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayRecord.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/util/Reader.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js"],"names":["t","e","r","data","stride","vertexCount","s","o","n","buffer","geometryType","indexBuffer","Uint32Array","namedBuffers","decode","indexVector","namedVectors","fromVertexVector","a","getLogger","d","i","h","id","range","boxes","minZoom","size","directionX","directionY","offsetX","offsetY","placementPadding","anchor","baseZoom","x","y","bounds","push","extend","clone","Math","floor","xBucket","yBucket","hasVV","xOverflow","yOverflow","min","ceil","width","height","findCollisionDelta","length","abs","_boxesToBoxes","_boxesToBox","_boxToBoxes","error","isNaN","_computeOffset","round","map","max","serialize","from","count","writeF32","readInt32","deserialize","f","l","c","readF32","u","b","m","p","g","setPlacementOffset","computeIndex","_pos","_roundToNearest","BYTES_PER_ELEMENT","_array","ArrayBuffer","_buffer","_ctor","byteLength","set","_ensureSize","Float32Array","slice","destroy","vertexData","Map","indexData","clear","insertAfter","displayRecords","metrics","vertexVectorsMap","_currentIndex","_currentRecordOffset","_currentMetricOffset","_currentMetrics","features","records","_bufDisplayObjects","_bufDisplayRecords","_bufMetrics","_vertexBuffersMap","intoBuffers","incr","hasDisplayRecords","setValue","_rollbackDisplayObject","transfer","bufDisplayObjects","bufRecords","bufMetrics","vertexBuffersMap","decr","seek","materialKey","maxZoom","meshData","symbolLevel","zOrder","vertexFrom","indexFrom","indexCount","_sortKey","_computeSortKey","copy","get","writeMeshDataToBuffers","_i32View","Int32Array","_f32View","Array"],"mappings":"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","file":"default~layers-GeoRSSLayerView2D-js~layers-GraphicsLayerView2D-js~layers-ImageryLayerView2D-js~layer~795eafd7-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{allocateTypedArrayBufferwithData as e}from\"../Utils.js\";class t{constructor(e,t,r){this.data=e,this.stride=t,this.vertexCount=r}static decode(r){const s=e(r.data,r.stride),o=r.stride,n=r.vertexCount;return new t(s,o,n)}static fromVertexVector(r){const s=e(r.data.buffer(),r.stride),o=r.stride,n=r.vertexCount;return new t(s,o,n)}}class r{constructor(e,t,r){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=r}static decode(e){const s=e.geometryType,o=e.indexBuffer,n={};for(const r in e.namedBuffers)n[r]=t.decode(e.namedBuffers[r]);return new r(s,o,n)}static fromVertexVectors(e){const s=e.geometryType,o=e.indexVector.buffer(),n={};for(const r in e.namedVectors)n[r]=t.fromVertexVector(e.namedVectors[r]);return new r(s,o,n)}}export default t;export{r as VertexBuffers};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Logger.js\";import{COLLISION_BUCKET_SIZE as s,COLLISION_MAX_ZOOM_DELTA as i,TILE_SIZE as e}from\"../definitions.js\";import{f as o}from\"../../../../../chunks/vec2f32.js\";import h from\"./BoundingBox.js\";import{serializeList as n,deserializeList as r}from\"../util/serializationUtils.js\";const a=t.getLogger(\"esri/views/2d/engine/webgl/collisions/Metric\");class d{constructor(t,s,i,e,h){this.id=t,this.range=s,this.boxes=null,this.minZoom=-1,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.placementPadding=0,this.anchor=o(i,e),this.baseZoom=h}add(t,s,i){t.x=t.x+s,t.y=t.y+i,this.bounds?this.boxes?(this.boxes.push(t),this.bounds.extend(t)):(this.boxes=[this.bounds,t],this.bounds=this.bounds.clone(),this.bounds.extend(t)):this.bounds=t}computeIndex(){const t=this.anchor[0],i=this.anchor[1],o=Math.floor(t/s),h=Math.floor(i/s);this.xBucket=o,this.yBucket=h;const n=e/s;if(this.hasVV)return this.xOverflow=n,void(this.yOverflow=n);this.xOverflow=Math.min(n,Math.ceil(2*this.bounds.width/s)),this.yOverflow=Math.min(n,Math.ceil(2*this.bounds.height/s))}findCollisionDelta(t){const s=this.bounds.findCollisionDelta(t.bounds),e=this.boxes&&this.boxes.length,o=t.boxes&&t.boxes.length;return Math.abs(s)>i||!e&&!o?s:e&&o?this._boxesToBoxes(t):e?this._boxesToBox(t):this._boxToBoxes(t)}computeVVOffset(t,s){s||a.error(\"mapview-labeling\",`Unable to compute label offset. Expected an evaluator function but found ${s}`);let i=this.size;if(this.hasVV){const e=s(t);i=isNaN(e)||null==e||e===1/0?this.size:e}this._computeOffset(i)}setPlacementOffset(t,s,i,e,o){this.hasVV=t,this.size=s,this.placementPadding=Math.round(i),this.directionX=e,this.directionY=o}clone(){const t=new d(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return t.minZoom=this.minZoom,this.bounds&&(t.bounds=this.bounds.clone()),this.boxes&&(t.boxes=this.boxes.map((t=>t.clone()))),t.xBucket=this.xBucket,t.yBucket=this.yBucket,t.xOverflow=this.xOverflow,t.yOverflow=this.yOverflow,t.hasVV=this.hasVV,t.size=this.size,t.directionX=this.directionX,t.directionY=this.directionY,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t}_boxToBoxes(t){let s=-1/0;for(const i of t.boxes){const t=this.bounds.findCollisionDelta(i);s=Math.max(t,s)}return s}_boxesToBox(t){let s=this.boxes[0].findCollisionDelta(t.bounds);for(let i=1;i<this.boxes.length;i++){const e=this.boxes[i].findCollisionDelta(t.bounds);s=Math.max(e,s)}return s}_boxesToBoxes(t){let s=-1/0;for(let i=0;i<this.boxes.length;i++){const e=this.boxes[i];for(const i of t.boxes){const t=e.findCollisionDelta(i);s=Math.max(t,s)}}return s}_computeOffset(t){this.offsetX=this.directionX*(t/2+this.placementPadding),this.offsetY=this.directionY*(t/2+this.placementPadding)}serialize(t){return t.push(this.id),this.bounds.serialize(t),t.push(this.range.from),t.push(this.range.count),t.push(this.anchor[0]),t.push(this.anchor[1]),t.push(this.baseZoom),t.push(this.hasVV?1:0),t.push(this.size),t.writeF32(this.directionX),t.writeF32(this.directionY),t.push(this.offsetX),t.push(this.offsetY),t.push(this.placementPadding),n(t,this.boxes),t}static deserialize(t){const s=t.readInt32(),i=h.deserialize(t),e={from:t.readInt32(),count:t.readInt32()},o=t.readInt32(),n=t.readInt32(),a=t.readInt32(),f=t.readInt32(),l=t.readInt32(),c=t.readF32(),u=t.readF32(),b=t.readInt32(),x=t.readInt32(),m=t.readInt32(),p=r(t,h),g=new d(s,e,o,n,a);return g.bounds=i,g.boxes=p,g.setPlacementOffset(!!f,l,m,c,u),g.offsetX=b,g.offsetY=x,g.computeIndex(),f||g._computeOffset(l),g}}export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(t,s){this._pos=0;const r=s?this._roundToNearest(s,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r),this._buffer=new t(this._array),this._ctor=t}get length(){return this._pos}_roundToNearest(t,s){const r=Math.round(t);return r+(s-r%s)}_ensureSize(t){if(this._pos+t>=this._buffer.length){const s=this._roundToNearest(1.5*(this._array.byteLength+t*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(s),e=new this._ctor(r);e.set(this._buffer,0),this._array=r,this._buffer=e}}writeF32(t){this._ensureSize(1);const s=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=t,this._pos++,s}push(t){this._ensureSize(1);const s=this._pos;return this._buffer[this._pos++]=t,s}writeFixed(t){this._buffer[this._pos++]=t}setValue(t,s){this._buffer[t]=s}getValue(t){return this._buffer[t]}incr(t){this._buffer[t]++}decr(t){this._buffer[t]--}writeRegion(t){this._ensureSize(t.length);const s=this._pos;return this._buffer.set(t,this._pos),this._pos+=t.length,s}buffer(){const t=this._array.slice(0,4*this._pos);return this.destroy(),t}toArray(){const t=this._array,s=[];for(let r=0;r<t.byteLength/4;r++)s.push(t[r]);return s}seek(t){this._pos=t}destroy(){this._array=null,this._buffer=null}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}clear(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]}update(t,e,a){for(const e in t)this.vertexData.set(e,t[e]);for(const e in this.vertexData)null===t[e]&&this.vertexData.delete(e);this.vertexCount=e,this.indexData=a}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"./WGLDisplayRecord.js\";import{serializeList as i,deserializeList as t}from\"./util/serializationUtils.js\";import e from\"./collisions/Metric.js\";class r{constructor(s){this.insertAfter=null,this.id=s,this.displayRecords=[],this.metrics=[]}copy(){const s=new r(this.id);return s.set(this),s}clone(){const s=new r(this.id);return s.displayRecords=this.displayRecords.map((s=>s.clone())),s.metrics=this.metrics.map((s=>s.clone())),s.insertAfter=this.insertAfter,s}set(s){this.id=s.id,this.displayRecords=s.displayRecords,this.metrics=s.metrics,this.insertAfter=s.insertAfter}serialize(s){return s.push(this.id),i(s,this.metrics),i(s,this.displayRecords),s}static deserialize(i){const c=i.readInt32(),o=new r(c),d={id:c},n=t(i,e);return n.length&&(o.metrics=n),o.displayRecords=t(i,s,d),o}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"../WGLDisplayRecord.js\";import{serializeList as t,deserializeList as e}from\"../util/serializationUtils.js\";import r from\"../collisions/Metric.js\";import i from\"../WGLDisplayObject.js\";import c from\"../util/Reader.js\";import u from\"../util/Writer.js\";class f{constructor(s,t){this.vertexVectorsMap=s,this._currentIndex=-1,this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[];const e=4*(4*t.features+1),r=4*(8*t.records+1),i=4*(20*t.metrics+1);this._bufDisplayObjects=new u(Uint32Array,e+4),this._bufDisplayRecords=new u(Uint32Array,r+4),this._bufMetrics=new u(Uint32Array,i+4),this._bufDisplayObjects.push(0),this._bufDisplayRecords.push(0),this._bufMetrics.push(0)}get vertexBuffersMap(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(let s=0;s<this.vertexVectorsMap.length;s++)this._vertexBuffersMap[s]=this.vertexVectorsMap[s].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap}get(s){return this.vertexVectorsMap[s]}currentDisplayRecordCount(){return this._bufDisplayRecords[this._currentRecordOffset]}writeDisplayObject(s,t){this._bufDisplayObjects.incr(0),this._currentIndex=this._bufDisplayObjects.push(s),this._bufDisplayObjects.push(t),this._bufDisplayObjects.push(0),this._bufDisplayObjects.push(0),this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[]}hasDisplayRecords(){return!(0===this._currentRecordOffset)}endDisplayObject(){this.hasDisplayRecords()?this._currentMetrics&&(0===this._currentMetricOffset&&(this._bufDisplayObjects.setValue(this._currentIndex+3,this._bufMetrics.length),this._currentMetricOffset=this._bufMetrics.length),t(this._bufMetrics,this._currentMetrics)):this._rollbackDisplayObject()}writeDisplayRecord(s,t,e,r,i,c,u=0,f=0){0===this._currentRecordOffset&&(this._currentRecordOffset=this._bufDisplayRecords.push(0),this._bufDisplayObjects.setValue(this._currentIndex+2,this._currentRecordOffset)),this._bufDisplayRecords.incr(this._currentRecordOffset),this._bufDisplayRecords.push(s),this._bufDisplayRecords.push(t),this._bufDisplayRecords.push(e),this._bufDisplayRecords.push(r),this._bufDisplayRecords.push(i),this._bufDisplayRecords.push(c),this._bufDisplayRecords.push(u),this._bufDisplayRecords.push(f)}writeMetrics(s){s&&this._currentMetrics.push(...s)}static deserializeDisplayObjects(t){const{bufDisplayObjects:u,bufMetrics:f,bufRecords:h}=t,p=new c(u),a=new c(h),l=new c(f),n=[];let b=p.readInt32();for(a.readInt32(),l.readInt32();b--;){const t=p.readInt32(),c=p.readInt32(),u=p.readInt32(),f=p.readInt32(),h=new i(t);0!==c&&(h.insertAfter=c),0!==u&&(h.displayRecords=e(a,s,{id:t})),0!==f&&(h.metrics=e(l,r)),n.push(h)}return n}encode(s,t){const e={};for(let s=0;s<this.vertexVectorsMap.length;s++){const r=this.vertexVectorsMap[s];e[s]={},r.transfer(e[s],t)}s.bufDisplayObjects=this._bufDisplayObjects.buffer(),s.bufRecords=this._bufDisplayRecords.buffer(),s.bufMetrics=this._bufMetrics.buffer(),t.push(s.bufDisplayObjects),t.push(s.bufMetrics),t.push(s.bufRecords),s.vertexBuffersMap=e,this.destroy()}destroy(){this.vertexVectorsMap=null,this._bufDisplayObjects=null,this._bufDisplayRecords=null,this._bufMetrics=null}_rollbackDisplayObject(){this._bufDisplayObjects.decr(0),this._bufDisplayObjects.seek(this._bufDisplayObjects.length-4),this._currentIndex=this._bufDisplayObjects.length}}export{f as MeshData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{strideToPackingFactor as t}from\"./Utils.js\";import e from\"./MeshData.js\";class s{constructor(t,e,s,r=0,i=0){this.id=t,this.geometryType=e,this.materialKey=s,this.minZoom=r,this.maxZoom=i,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}get sortKey(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey}clone(){return this.copy()}copy(){const t=new s(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t}setMeshDataFromBuffers(s,r,i){const o=new e;for(const e in r){const i=r[e].stride,a=r[e].data,h=[],n=t(i);for(let t=0;t<i*s.vertexCount/n;++t)h[t]=a[t+i*s.vertexFrom/n];o.vertexData.set(e,h)}o.indexData.length=0;for(let t=0;t<s.indexCount;++t)o.indexData[t]=i[t+s.indexFrom]-s.vertexFrom;o.vertexCount=s.vertexCount,this.meshData=o}readMeshDataFromBuffers(s,r){this.meshData?this.meshData.clear():this.meshData=new e;for(const e in s){const r=s[e].stride,i=s[e].data,o=[],a=t(r);for(let t=0;t<r*this.vertexCount/a;++t)o[t]=i[t+r*this.vertexFrom/a];this.meshData.vertexData.set(e,o)}this.meshData.indexData.length=0;for(let t=0;t<this.indexCount;++t)this.meshData.indexData[t]=r[t+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount}writeMeshDataToBuffers(e,s,r,i){for(const r in s){const i=s[r].stride,o=this.meshData.vertexData.get(r),a=s[r].data,h=t(i);for(let t=0;t<i*this.meshData.vertexCount/h;++t)a[t+i*e/h]=o[t]}for(let t=0;t<this.meshData.indexData.length;++t)i[t+r]=this.meshData.indexData[t]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=r,this.indexCount=this.meshData.indexData.length}static writeAllMeshDataToBuffers(t,e,s){let r=0,i=0;for(const o of t)o.writeMeshDataToBuffers(r,e,i,s),r+=o.vertexCount,i+=o.indexCount}_computeSortKey(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType}serialize(t){return t.push(this.geometryType),t.push(this.materialKey),t.push(this.vertexFrom),t.push(this.vertexCount),t.push(this.indexFrom),t.push(this.indexCount),t.push(this.minZoom),t.push(this.maxZoom),t}static deserialize(t,e){const r=t.readInt32(),i=t.readInt32(),o=new s(e.id,r,i);return o.vertexFrom=t.readInt32(),o.vertexCount=t.readInt32(),o.indexFrom=t.readInt32(),o.indexCount=t.readInt32(),o.minZoom=t.readInt32(),o.maxZoom=t.readInt32(),o}}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(t){this._pos=0,this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}readInt32(){return this._i32View[this._pos++]}readF32(){return this._f32View[this._pos++]}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e,n){if(null!==n){e.push(n.length);for(const r of n)r.serialize(e);return e}e.push(0)}function n(e,n,r){const t=e.readInt32(),o=new Array(t);for(let t=0;t<o.length;t++)o[t]=n.deserialize(e,r);return o}export{n as deserializeList,e as serializeList};\n"]}