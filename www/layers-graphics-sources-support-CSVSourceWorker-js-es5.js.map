{"version":3,"sources":["webpack:///node_modules/@arcgis/core/layers/graphics/sources/support/CSVSourceWorker.js","webpack:///node_modules/@arcgis/core/chunks/_commonjsHelpers.js","webpack:///node_modules/@arcgis/core/layers/graphics/sources/csv/csv.js"],"names":["j","w","E","D","q","v","S","C","e","t","x","y","V","RegExp","regexp","i","group","n","factor","r","o","exec","NaN","l","replace","decimal","k","Number","isInteger","isFinite","Math","floor","_fieldsIndex","_queryEngine","destroy","_fetch","url","_checkProjection","parsing","spatialReference","_parse","_createQueryEngine","layerDefinition","extent","fullExtent","timeInfo","timeExtent","start","end","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","path","query","responseType","data","columnDelimiter","locationInfo","latitudeFieldName","latitudeField","longitudeFieldName","longitudeField","s","next","a","value","csv","trim","d","split","u","name","drawingInfo","geometryType","objectIdField","fields","xmin","POSITIVE_INFINITY","ymin","xmax","NEGATIVE_INFINITY","ymax","wkid","_inferLocationInfo","c","_inferFields","length","Map","set","toLowerCase","get","some","type","alias","editable","nullable","unshift","startTimeField","endTimeField","trackIdField","find","done","push","map","_inferFieldType","test","isNaN","indexOf","Date","_isValidDate","reduce","Object","prototype","toString","call","getTime","match","f","g","h","Set","I","b","add","_parseCoordinateValue","has","WGS84","hasM","hasZ","cacheSpatialQueries","featureStore","addMany","abs","parseFloat","globalThis","window","global","self","__esModule","hasOwnProperty","exports","require","Error","substring","includes"],"mappings":"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","file":"layers-graphics-sources-support-CSVSourceWorker-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{mixin as t}from\"../../../../core/lang.js\";import i from\"../../../../core/Error.js\";import{urlToObject as n,getFilename as r}from\"../../../../core/urlUtils.js\";import{all as o}from\"../../../../core/promiseUtils.js\";import{equals as l,isWebMercator as s,WGS84 as a}from\"../../../../geometry/support/spatialReferenceUtils.js\";import d from\"../../../../geometry/SpatialReference.js\";import{lngLatToXY as u}from\"../../../../geometry/support/webMercatorUtils.js\";import\"../../../../geometry.js\";import c from\"../../../../request.js\";import{projectMany as m}from\"../../../../geometry/projection.js\";import{_parseInfo as f}from\"../../../../core/number.js\";import p from\"../../OptimizedFeature.js\";import y from\"../../OptimizedGeometry.js\";import g from\"../../../support/FieldsIndex.js\";import{jsonAdapter as F}from\"../../../../geometry/geometryAdapters/json.js\";import{checkProjectionSupport as h}from\"../../data/projectionSupport.js\";import{createDrawingInfo as I}from\"./clientSideDefaults.js\";import N from\"../../data/FeatureStore.js\";import _ from\"../../data/QueryEngine.js\";import{readRows as x,inferDelimiter as b,parseRows as T}from\"../csv/csv.js\";const j=I(\"esriGeometryPoint\"),w=[\"esriFieldTypeSmallInteger\",\"esriFieldTypeInteger\",\"esriFieldTypeSingle\",\"esriFieldTypeDouble\",\"esriFieldTypeLong\"],E=[\"lat\",\"latitude\",\"latitude83\",\"latdecdeg\",\"lat_dd\",\"y\",\"ycenter\",\"point-y\"],D=[\"lon\",\"lng\",\"long\",\"longitude\",\"longitude83\",\"longdecdeg\",\"long_dd\",\"x\",\"xcenter\",\"point-x\"],q=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,v=[\"csv\"],S=[0,0];class C{constructor(e,t){this.x=e,this.y=t}}const V=function(){const e=f(),t=new RegExp(\"^\"+e.regexp+\"$\"),i=new RegExp(\"[\"+e.group+\"\\\\s\\\\xa0]\",\"g\"),n=e.factor;return function(r){const o=t.exec(r);if(e.factor=n,!o)return NaN;let l=o[1];if(!o[1]){if(!o[2])return NaN;l=o[2],e.factor*=-1}return l=l.replace(i,\"\").replace(e.decimal,\".\"),+l*e.factor}}(),k=\"isInteger\"in Number?Number.isInteger:e=>\"number\"==typeof e&&isFinite(e)&&Math.floor(e)===e;export default class{constructor(){this._fieldsIndex=null,this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null,this._fieldsIndex=null}async load(e,t={}){const[i]=await o([this._fetch(e.url,t),this._checkProjection(t&&e.parsing&&e.parsing.spatialReference)]),n=this._parse(i,e);if(this._queryEngine=this._createQueryEngine(i,n),n.layerDefinition.extent=this._queryEngine.fullExtent,n.layerDefinition.timeInfo){const{start:e,end:t}=this._queryEngine.timeExtent;n.layerDefinition.timeInfo.timeExtent=[e,t]}return n}async applyEdits(){throw new i(\"csv-source:editing-not-supported\",\"applyEdits() is not supported on CSVLayer\")}async queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}async _fetch(e,t){if(!e)throw new i(\"csv-source:invalid-source\",\"url not defined\");const r=n(e);return(await c(r.path,{query:r.query,responseType:\"text\",signal:t.signal})).data}_parse(e,n){const o=n.parsing||{},l={columnDelimiter:o.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:o.latitudeField,longitudeFieldName:o.longitudeField}},s=x(e);let{value:a}=s.next();if(!a)throw new i(\"csv\",\"CSV is empty\",{csv:e});if(a=a.trim(),!o.columnDelimiter){const e=b(a);if(!e)throw new i(\"csv-source:invalid-delimiter\",\"Unable to detect the delimiter from CSV\");l.columnDelimiter=e}const d=a.split(l.columnDelimiter),u=l.layerDefinition={name:r(n.url,v)||\"csv\",drawingInfo:j,geometryType:\"esriGeometryPoint\",objectIdField:null,fields:[],timeInfo:o.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:o.spatialReference||{wkid:102100}}};if(!o.latitudeField||!o.longitudeField){const e=this._inferLocationInfo(d);if(!o.longitudeField&&!e.longitudeFieldName||!o.latitudeField&&!e.latitudeFieldName)throw new i(\"csv\",\"Unable to identify latitudeField and/or longitudeField from CSV\");l.locationInfo={longitudeFieldName:o.longitudeField||e.longitudeFieldName,latitudeFieldName:o.latitudeField||e.latitudeFieldName}}const c=this._inferFields(s,l.columnDelimiter,d,l.locationInfo);if(o.fields&&o.fields.length){const e=new Map;for(const t of o.fields)e.set(t.name.toLowerCase(),t);for(const i of c){const n=e.get(i.name.toLowerCase());if(n){const e=i.name;t(i,n),i.name=e}}}u.fields=c;if(!u.fields.some((e=>\"esriFieldTypeOID\"===e.type&&(u.objectIdField=e.name,!0)))){const e={name:\"__OBJECTID\",alias:\"__OBJECTID\",type:\"esriFieldTypeOID\",editable:!1,nullable:!1};u.objectIdField=e.name,u.fields.unshift(e)}if(this._fieldsIndex=new g(u.fields),u.timeInfo){const e=u.timeInfo;if(e.startTimeField){const t=this._fieldsIndex.get(e.startTimeField);t?(e.startTimeField=t.name,t.type=\"esriFieldTypeDate\"):e.startTimeField=null}if(e.endTimeField){const t=this._fieldsIndex.get(e.endTimeField);t?(e.endTimeField=t.name,t.type=\"esriFieldTypeDate\"):e.endTimeField=null}if(e.trackIdField){const t=this._fieldsIndex.get(e.trackIdField);e.trackIdField=t?t.name:null}e.startTimeField||e.endTimeField||(u.timeInfo=null)}return l}_inferLocationInfo(e){let t=null,i=null;const n=t=>e.find((e=>e.toLowerCase()===t));return D.some((e=>(t=n(e),!!t))),E.some((e=>(i=n(e),!!i))),{longitudeFieldName:t,latitudeFieldName:i}}_inferFields(e,t,i,n){const r=[],o=T(e,i,t),l=[];e:for(;l.length<10;){const{value:e,done:t}=o.next();if(t)break e;l.push(e)}for(const e of i)if(e===n.longitudeFieldName||e===n.latitudeFieldName)r.push({name:e,type:\"esriFieldTypeDouble\",alias:e});else{const t=l.map((t=>t[e])),i=this._inferFieldType(t),n={name:e,type:null,alias:e};switch(i){case\"integer\":n.type=\"esriFieldTypeInteger\";break;case\"double\":n.type=\"esriFieldTypeDouble\";break;case\"date\":n.type=\"esriFieldTypeDate\",n.length=36;break;default:n.type=\"esriFieldTypeString\",n.length=255}r.push(n)}return r}_inferFieldType(e){if(!e.length)return\"string\";const t=/[^+-.,0-9]/;return e.map((e=>{let i=!1;if(\"\"!==e){if(t.test(e))i=!0;else{let t=V(e);if(!isNaN(t))return/[.,]/.test(e)||!k(t)||t>214783647||t<-214783648?\"double\":\"integer\";if(-1===e.indexOf(\"E\"))i=!0;else{if(t=Number(e),!isNaN(t))return\"double\";if(-1===e.indexOf(\",\"))i=!0;else{if(e=e.replace(\",\",\".\"),t=Number(e),!isNaN(t))return\"double\";i=!0}}}if(i){if(!/^[-]?\\d*[.,]?\\d*$/.test(e)){const t=new Date(e);return this._isValidDate(t,e)?\"date\":\"string\"}return\"string\"}return\"string\"}})).reduce(((e,t)=>void 0===e||e===t?t:\"string\"===e||\"string\"===t?\"string\":\"double\"===e||\"double\"===t?\"double\":void 0))}_isValidDate(t,i){if(!t||\"[object Date]\"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))return!1;let n=!0;if(e(\"chrome\")&&/\\d+\\W*$/.test(i)){const e=i.match(/[a-zA-Z]{2,}/);if(e){let t=!1,i=0;for(;!t&&i<=e.length;)t=!q.test(e[i]),i++;n=!t}}return n}_createQueryEngine(e,t){const{latitudeFieldName:i,longitudeFieldName:n}=t.locationInfo,{objectIdField:r,fields:o,extent:a,timeInfo:c}=t.layerDefinition;let f=[];const g=[],h=new Set,I=new Set,b=[];for(const{name:e,type:t}of o)\"esriFieldTypeDate\"===t?h.add(e):w.indexOf(t)>-1&&I.add(e),e!==r&&b.push(e);let j=0;const E=x(e);E.next();const D=T(E,b,t.columnDelimiter);e:for(;;){const{value:e,done:t}=D.next();if(t)break e;const o=this._parseCoordinateValue(e[i]),l=this._parseCoordinateValue(e[n]);if(null!=l&&null!=o&&!isNaN(o)&&!isNaN(l)){e[i]=o,e[n]=l;for(const t in e)if(t!==i&&t!==n)if(h.has(t)){const i=new Date(e[t]);e[t]=this._isValidDate(i,e[t])?i.getTime():null}else if(I.has(t)){const i=V(e[t]);isNaN(i)?e[t]=null:e[t]=i}e[r]=j,j++,f.push(new C(l,o)),g.push(e)}}if(!l({wkid:4326},a.spatialReference))if(s(a.spatialReference))for(const e of f)[e.x,e.y]=u(e.x,e.y,S);else f=m(F,f,d.WGS84,a.spatialReference,null);const q=new N({geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1}),v=new _({fields:t.layerDefinition.fields,geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1,timeInfo:c,objectIdField:r,spatialReference:a.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:q}),k=[];for(let e=0;e<f.length;e++){const{x:t,y:i}=f[e],n=g[e];n[r]=e+1,k.push(new p(new y([],[t,i]),n,null,n[r]))}return q.addMany(k),v}_parseCoordinateValue(e){if(null==e||\"\"===e)return null;let t=V(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}async _checkProjection(e){try{await h(a,e)}catch{throw new i(\"csv-layer\",\"Projection not supported\")}}}export{E as csvLatitudeFieldNames,D as csvLongitudeFieldNames};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function o(e,n,o){return e(o={path:n,exports:{},require:function(e,n){return r(null==n&&o.path)}},o.exports),o.exports}function r(){throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\")}export{e as a,r as b,o as c,n as g};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=/^\\s*\"([\\S\\s]*)\"\\s*$/,t=/\"\"/g,e=[\",\",\" \",\";\",\"|\",\"\\t\"];function o(n,t){const e={},o=n.length;for(let r=0;r<o;r++)e[n[r]]=t[r];return e}function*r(n,t,e){let o=0;for(;o<=n.length;){const r=n.indexOf(t,o),i=n.substring(o,r>-1?r:void 0);o+=i.length+1,e&&!i.trim()||(yield i)}}function i(n){const t=n.includes(\"\\r\\n\")?\"\\r\\n\":\"\\n\";return r(n,t,!0)}function c(n,t){return r(n,t,!1)}function f(n){const t=n.trim();let o=0,r=\"\";for(const n of e){const e=t.split(n).length;e>o&&(o=e,r=n)}return\"\"===r?null:r}function*s(e,r,i){let f=\"\",s=\"\",l=0,d=[];n:for(;;){const{value:x,done:g}=e.next();if(g)return;const h=c(x,i);t:for(;;){const{value:e,done:o}=h.next();if(o)break t;if(f+=s+e,s=\"\",l+=u(e),l%2==0){if(l>0){const e=n.exec(f);if(!e){d=[],f=\"\",l=0;continue n}d.push(e[1].replace(t,'\"'))}else d.push(f);f=\"\",l=0}else s=i}0===l?(yield o(r,d),d=[]):s=\"\\n\"}}function u(n){let t=0,e=0;for(e=n.indexOf('\"',e);e>=0;)t++,e=n.indexOf('\"',e+1);return t}export{f as inferDelimiter,s as parseRows,c as readRowParts,i as readRows};\n"]}