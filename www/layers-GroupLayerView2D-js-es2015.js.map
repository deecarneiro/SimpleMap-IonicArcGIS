{"version":3,"sources":["./node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js","./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js","./node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACykB,oBAAoB,yEAAC,CAAC,iEAAC,GAAG,cAAc,uCAAuC,+EAAC,CAAC,SAAS,uIAAuI,SAAS,2EAA2E,aAAa,YAAY,WAAW,aAAa,cAAc,WAAW,uBAAuB,gHAAgH,EAAE,8DAAC,EAAE,6FAAC,8CAA8C,QAAuB,gEAAC,EAAC;;;;;;;;;;;;;ACJ5pC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAC4O,gBAAgB,wDAAC,CAAC,cAAc,yDAAyD,UAAU,2EAA2E,YAAY,oCAAoC,+BAA+B,GAAG,8EAA8E,8CAA8C,iMAAiM,+CAA+C,gDAAgD,8CAA8C,sRAAsR,sBAAsB,OAAO,sGAAsG,WAAW,MAAM,oBAAoB,IAAI,iBAAiB,iBAAiB,uIAAuI,KAAK,SAAS,6FAA6F,IAAI,mCAAmC,8BAA8B,uBAAuB,mEAAC,UAAU,2BAAuD;;;;;;;;;;;;;ACJ1yD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAC8jB,oBAAoB,sDAAC,CAAC,eAAe,6BAA6B,2DAAC,CAAC,aAAa,uVAAuV,gEAAgE,wCAAwC,kBAAkB,uBAAuB,iFAAC,6BAA6B,aAAa,6CAA6C,gCAAgC,6DAA6D,0BAA0B,iDAAiD,4BAA4B,oCAAoC,uCAAuC,oBAAoB,GAAG,yCAAyC,+BAA+B,wMAAwM,gBAAgB,IAAI,4BAA4B,2LAA2L,kCAAkC,WAAW,+CAA+C,iCAAiC,0MAA0M,sBAAsB,0EAA0E,iBAAiB,qBAAqB,6BAA6B,YAAY,GAAG,MAAM,qDAAqD,yBAAyB,0BAA0B,8BAA8B,0EAA0E,2DAA2D,MAAM,wDAAwD,kBAAkB,MAAM,8HAA8H,kBAAkB,gCAAgC,8DAAC,EAAE,6FAAC,EAAE,KAAK,gFAAC,CAAC,kCAAkC,8DAAC,EAAE,6FAAC,iCAAiC,8DAAC,EAAE,6FAAC,yCAAyC,QAAuB,gEAAC,EAAC","file":"layers-GroupLayerView2D-js-es2015.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../layers/GroupLayerView.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{GroupContainer as s}from\"../engine/webgl/GroupContainer.js\";let i=class extends(o(t)){constructor(){super(...arguments),this.container=new s}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on(\"after-changes\",(()=>this._updateStageChildren())),\"grouplayerview2d\")}detach(){this.handles.remove(\"grouplayerview2d\"),this.container.removeAllChildren()}hitTest(e,r){return null}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}};i=e([r(\"esri.views.2d.layers.GroupLayerView2D\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import\"../../../../core/mathUtils.js\";import\"../../../../chunks/builtins.js\";import e from\"../../../webgl/FramebufferObject.js\";import\"../../../webgl/RenderingContext.js\";import t from\"./WGLContainer.js\";class r extends t{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:s,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const n=this._getFbo(t),o=s.getRenderTarget();r.bindFramebuffer(n),s.setRenderTarget(n),r.setDepthWriteEnabled(!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const t of this.children)t.beforeRender(e);for(const e of this.children)e.processRender(t);for(const t of this.children)t.afterRender(e);s.setRenderTarget(o),r.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),s.blitTexture(r,n.colorTexture,9728),s.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:r,painter:s}=t,{width:i,height:n}=r.getViewport();if(i!==this._lastWidth||n!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=n,this._renderTarget)this._renderTarget.resize(i,n);else{const t={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:n},o={colorTarget:0,depthStencilTarget:3},a=s.getSharedStencilBuffer();this._renderTarget=new e(r,o,t,a)}return this._renderTarget}}export{r as GroupContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../core/Collection.js\";import{referenceSetter as t,castForReferenceSetter as a}from\"../../core/collectionUtils.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.layerViews=new r}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",t(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([i({cast:a})],o.prototype,\"layerViews\",null),e([i()],o.prototype,\"view\",void 0),o=e([s(\"esri.views.layers.GroupLayerView\")],o);var h=o;export default h;\n"],"sourceRoot":"webpack:///"}