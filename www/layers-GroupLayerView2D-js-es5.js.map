{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js","webpack:///node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js","webpack:///node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"names":["i","arguments","container","_updateStageChildren","handles","add","layerViews","on","remove","removeAllChildren","e","r","forEach","addChildAt","a","_lastWidth","_lastHeight","_renderTarget","dispose","t","createRenderParams","context","s","painter","profiler","_prevFBO","getBoundFramebufferObject","recordContainerStart","name","n","_getFbo","o","getRenderTarget","bindFramebuffer","setRenderTarget","setDepthWriteEnabled","setClearColor","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","children","beforeRender","processRender","afterRender","beforeRenderLayer","_clippingInfos","computedOpacity","setStencilTestEnabled","setStencilWriteMask","blitTexture","colorTexture","compositeLayer","recordContainerEnd","blendMode","effects","computedEffects","globalOpacity","getViewport","width","height","resize","target","pixelFormat","dataType","samplingMode","wrapMode","colorTarget","depthStencilTarget","getSharedStencilBuffer","_layerViewsChangeHandler","_layerViewsAfterChangesHandler","layer","watch","_visibilityModeHandler","_visibleHandler","added","toArray","removed","moved","_set","_get","some","updating","_isOverridden","find","layers","_findLayerViewForLayer","visible","_hasLayerViewVisibleOverrides","_firstVisibleOnLayerOrder","length","getItemAt","map","_layerViewVisibleHandler","_enforceVisibility","_updateUpdating","visibilityMode","_enforceExclusiveVisibility","notifyChange","cast","prototype","h"],"mappings":"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","file":"layers-GroupLayerView2D-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../layers/GroupLayerView.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{GroupContainer as s}from\"../engine/webgl/GroupContainer.js\";let i=class extends(o(t)){constructor(){super(...arguments),this.container=new s}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on(\"after-changes\",(()=>this._updateStageChildren())),\"grouplayerview2d\")}detach(){this.handles.remove(\"grouplayerview2d\"),this.container.removeAllChildren()}hitTest(e,r){return null}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}};i=e([r(\"esri.views.2d.layers.GroupLayerView2D\")],i);var a=i;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import\"../../../../core/mathUtils.js\";import\"../../../../chunks/builtins.js\";import e from\"../../../webgl/FramebufferObject.js\";import\"../../../webgl/RenderingContext.js\";import t from\"./WGLContainer.js\";class r extends t{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:s,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const n=this._getFbo(t),o=s.getRenderTarget();r.bindFramebuffer(n),s.setRenderTarget(n),r.setDepthWriteEnabled(!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const t of this.children)t.beforeRender(e);for(const e of this.children)e.processRender(t);for(const t of this.children)t.afterRender(e);s.setRenderTarget(o),r.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),s.blitTexture(r,n.colorTexture,9728),s.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:r,painter:s}=t,{width:i,height:n}=r.getViewport();if(i!==this._lastWidth||n!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=n,this._renderTarget)this._renderTarget.resize(i,n);else{const t={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:n},o={colorTarget:0,depthStencilTarget:3},a=s.getSharedStencilBuffer();this._renderTarget=new e(r,o,t,a)}return this._renderTarget}}export{r as GroupContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../core/Collection.js\";import{referenceSetter as t,castForReferenceSetter as a}from\"../../core/collectionUtils.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.layerViews=new r}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",t(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([i({cast:a})],o.prototype,\"layerViews\",null),e([i()],o.prototype,\"view\",void 0),o=e([s(\"esri.views.layers.GroupLayerView\")],o);var h=o;export default h;\n"]}