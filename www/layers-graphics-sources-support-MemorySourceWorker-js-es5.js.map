{"version":3,"sources":["webpack:///node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js","webpack:///node_modules/@arcgis/core/chunks/_commonjsHelpers.js"],"names":["E","x","xmin","ymin","xmax","ymax","spatialReference","T","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","q","e","z","hasZ","R","m","hasM","_queryEngine","_nextObjectId","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","t","i","s","features","r","_inferLayerProperties","fields","l","o","d","f","I","b","F","geometryType","_","j","objectIdField","timeInfo","push","name","message","some","type","editable","nullable","unshift","alias","field","jsonValues","indexOf","startTimeField","get","endTimeField","trackIdField","details","D","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","assignedObjectIds","featureStore","length","O","reduce","attributes","isNaN","isFinite","Math","max","_loadInitialFeatures","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","n","a","geometry","toLowerCase","u","uid","_assignObjectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","p","y","c","has","getFeature","add","globalThis","window","global","self","__esModule","Object","prototype","hasOwnProperty","call","path","exports","require","Error"],"mappings":"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","file":"layers-graphics-sources-support-MemorySourceWorker-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{WGS84 as i}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as s,isPoint as r}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as n}from\"../../../support/fieldUtils.js\";import{kebabDict as a}from\"../../../support/fieldType.js\";import{convertFromFeatures as l,convertToFeature as o,convertFromFeature as d}from\"../../featureConversionUtils.js\";import u from\"../../../support/FieldsIndex.js\";import{checkProjectionSupport as p,project as f}from\"../../data/projectionSupport.js\";import{createDefaultAttributesFunction as y,createDrawingInfo as c,createDefaultTemplate as m}from\"./clientSideDefaults.js\";import h from\"../../data/FeatureStore.js\";import g from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as I,createFeatureEditErrorResult as b,mixAttributes as F,createFeatureEditSuccessResult as _,simplify as j}from\"./sourceUtils.js\";const E=i,x={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:i},T={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function q(e){return r(e)?null!=e.z:!!e.hasZ}function R(e){return r(e)?null!=e.m:!!e.hasM}export default class{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,r=this._inferLayerProperties(s,t.fields),l=t.fields||[],o=null!=t.hasM?t.hasM:r.hasM,d=null!=t.hasZ?t.hasZ:r.hasZ,f=!t.spatialReference&&!r.spatialReference,I=f?E:t.spatialReference||r.spatialReference,b=f?x:null,F=t.geometryType||r.geometryType,_=!F;let j=t.objectIdField||r.objectIdField,q=t.timeInfo;if(!_&&(f&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!F))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!j)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(r.objectIdField&&j!==r.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${j}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`}),j=r.objectIdField),j&&!r.objectIdField){let e=null;l.some((t=>t.name===j&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):l.unshift({alias:j,name:j,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of l){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===j&&(t.type=\"esriFieldTypeOID\"),-1===a.jsonValues.indexOf(t.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const R={};this._requiredFields=[];for(const e of l)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=n(e);e.nullable||void 0!==t?R[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new u(l),this._createDefaultAttributes=y(R,j),q){if(q.startTimeField){const e=this._fieldsIndex.get(q.startTimeField);e?(q.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):q.startTimeField=null}if(q.endTimeField){const e=this._fieldsIndex.get(q.endTimeField);e?(q.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):q.endTimeField=null}if(q.trackIdField){const e=this._fieldsIndex.get(q.trackIdField);e?q.trackIdField=e.name:(q.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:q}}))}q.startTimeField||q.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:q}}),q=null)}const D={warnings:i,featureErrors:[],layerDefinition:{...T,drawingInfo:c(F),templates:m(R),extent:b,geometryType:F,objectIdField:j,fields:l,hasZ:!!d,hasM:!!o,timeInfo:q},assignedObjectIds:{}};if(this._queryEngine=new g({fields:l,geometryType:F,hasM:o,hasZ:d,objectIdField:j,spatialReference:I,featureStore:new h({geometryType:F,hasM:o,hasZ:d}),timeInfo:q}),!s||!s.length)return this._nextObjectId=1,D;const O=s.reduce(((e,t)=>{const i=t.attributes&&t.attributes[j];return null==i||isNaN(i)||!isFinite(i)?e:Math.max(e,i)}),0);return this._nextObjectId=1+O,await p(s,I),this._loadInitialFeatures(D,s)}async applyEdits(e){const{spatialReference:i,geometryType:s}=this._queryEngine;return await t([I(i,s),p(e.adds,i),p(e.updates,i)]),this._applyEdits(e)}async queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}_inferLayerProperties(e,t){let i,r,n=null,a=null,l=null;for(const t of e){const e=t.geometry;if(e&&(n||(n=s(e)),a||(a=e.spatialReference),null==i&&(i=q(e)),null==r&&(r=R(e)),n&&a&&null!=i&&null!=r))break}if(t&&t.length){let e=null;t.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(l=e.name)}return{geometryType:n,spatialReference:a,objectIdField:l,hasM:r,hasZ:i}}_loadInitialFeatures(e,t){const{geometryType:i,hasM:r,hasZ:n,objectIdField:a,spatialReference:o,featureStore:d}=this._queryEngine,u=[];for(const r of t){if(null!=r.uid&&(e.assignedObjectIds[r.uid]=-1),r.geometry&&i!==s(r.geometry)){e.featureErrors.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=F(this._fieldsIndex,this._requiredFields,t,r.attributes,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,r.attributes,!0),r.attributes=t,null!=r.uid&&(e.assignedObjectIds[r.uid]=r.attributes[a]),r.geometry&&(r.geometry=f(r.geometry,r.geometry.spatialReference,o)),u.push(r))}if(d.addMany(l([],u,i,n,r,a)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(_(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:r,hasM:n,hasZ:a,objectIdField:o,spatialReference:d,featureStore:u}=this._queryEngine,p=[];for(const n of t){if(n.geometry&&r!==s(n.geometry)){i.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),a=F(this._fieldsIndex,this._requiredFields,t,n.attributes);if(a)i.push(a);else{if(this._assignObjectId(t,n.attributes),n.attributes=t,null!=n.uid){const t=n.attributes[o];e.uidToObjectId[n.uid]=t}n.geometry&&(n.geometry=f(j(n.geometry,d),n.geometry.spatialReference,d)),p.push(n),i.push(_(n.attributes[o]))}}u.addMany(l([],p,r,a,n,o))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:r,hasZ:n,objectIdField:a,spatialReference:l,featureStore:u}=this._queryEngine;for(const p of t){const{attributes:t,geometry:y}=p,c=t&&t[a];if(null==c){e.push(b(`Identifier field ${a} missing`));continue}if(!u.has(c)){e.push(b(`Feature with object id ${c} missing`));continue}const m=o(u.getFeature(c),i,n,r);if(y){if(i!==s(y)){e.push(b(\"Incorrect geometry type.\"));continue}m.geometry=f(j(y,l),y.spatialReference,l)}if(t){const i=F(this._fieldsIndex,this._requiredFields,m.attributes,t);if(i){e.push(i);continue}}u.add(d(m,i,n,r,a)),e.push(_(c))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nvar e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function o(e,n,o){return e(o={path:n,exports:{},require:function(e,n){return r(null==n&&o.path)}},o.exports),o.exports}function r(){throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\")}export{e as a,r as b,o as c,n as g};\n"]}