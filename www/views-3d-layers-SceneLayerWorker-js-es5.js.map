{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js","webpack:///node_modules/@arcgis/core/libs/i3s/I3SWorker.js"],"names":["o","e","p","t","geometryBuffer","result","b","transferList","s","n","byteLength","f","l","_malloc","i","Uint8Array","HEAPU8","buffer","set","a","dracoDecompressPointCloudData","_free","error","length","u","r","featureIds","c","positions","push","d","y","setLegacySchema","context","jsonSchema","E","modifications","Float64Array","setModifications","isGeodetic","localOrigin","globalTrafo","mbs","obb","elevationOffset","geometryDescriptor","indexToVertexProjector","m","vertexToRenderProjector","BYTES_PER_ELEMENT","g","h","w","byteOffset","A","center","halfSize","quaternion","_","L","isDraco","isLegacy","color","layouts","some","name","normal","needNormals","uv0","uvRegion","featureIndex","T","process","normalReferenceFrame","discarded","I","componentOffsets","P","U","interleavedVertedData","B","indicesType","Uint16Array","indices","Uint32Array","F","x","positionIndicesType","positionIndices","O","layout","interleavedVertexData","hasColors","hasModifications","positionData","data","transformedGeometry","filterOBBs","destroy","then","transform","locateFile","onRuntimeInitialized"],"mappings":"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","file":"views-3d-layers-SceneLayerWorker-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{slice as e}from\"../../../core/typedArrayUtil.js\";import{isSome as t}from\"../../../core/maybe.js\";import{resolve as r}from\"../../../core/promiseUtils.js\";import{getWorkerModule as n}from\"../../../libs/i3s/I3SWorker.js\";async function o(e){await p();const t=[e.geometryBuffer];return{result:b(e,t),transferList:t}}async function s(t){var r;await p();const n=[t.geometryBuffer],{geometryBuffer:o}=t,s=o.byteLength,f=l._malloc(s),i=new Uint8Array(l.HEAPU8.buffer,f,s);i.set(new Uint8Array(o));const a=l.dracoDecompressPointCloudData(f,i.byteLength);if(l._free(f),a.error.length>0)throw`i3s.wasm: ${a.error}`;const u=(null==(r=a.featureIds)?void 0:r.length)>0?e(a.featureIds):null,c=e(a.positions);u&&n.push(u.buffer),n.push(c.buffer);return{result:{positions:c,featureIds:u},transferList:n}}async function f(e){await p(),d(e);const t={buffer:e.buffer};return{result:t,transferList:[t.buffer]}}async function i(e){await p(),y(e)}async function a(e){await p(),l.setLegacySchema(e.context,e.jsonSchema)}function u(e){E(e)}let c,l;function y(e){const t=e.modifications,r=l._malloc(8*t.length),n=new Float64Array(l.HEAPU8.buffer,r,t.length);for(let e=0;e<t.length;++e)n[e]=t[e];l.setModifications(e.context,r,t.length,e.isGeodetic),l._free(r)}function b(r,n){if(!l)return null;const{context:o,localOrigin:s,globalTrafo:f,mbs:i,obb:a,elevationOffset:u,geometryBuffer:c,geometryDescriptor:y,indexToVertexProjector:b,vertexToRenderProjector:m}=r,d=l._malloc(c.byteLength),E=l._malloc(33*Float64Array.BYTES_PER_ELEMENT),p=new Uint8Array(l.HEAPU8.buffer,d,c.byteLength);p.set(new Uint8Array(c));const g=new Float64Array(l.HEAPU8.buffer,E,33);h(g,s);let w=g.byteOffset+3*g.BYTES_PER_ELEMENT,A=new Float64Array(g.buffer,w);h(A,f),w+=16*g.BYTES_PER_ELEMENT,A=new Float64Array(g.buffer,w),h(A,i),w+=4*g.BYTES_PER_ELEMENT,t(a)&&(A=new Float64Array(g.buffer,w),h(A,a.center),w+=3*g.BYTES_PER_ELEMENT,A=new Float64Array(g.buffer,w),h(A,a.halfSize),w+=3*g.BYTES_PER_ELEMENT,A=new Float64Array(g.buffer,w),h(A,a.quaternion));const _=y,L={isDraco:!1,isLegacy:!1,color:r.layouts.some((e=>e.some((e=>\"color\"===e.name)))),normal:r.needNormals&&r.layouts.some((e=>e.some((e=>\"normalCompressed\"===e.name)))),uv0:r.layouts.some((e=>e.some((e=>\"uv0\"===e.name)))),uvRegion:r.layouts.some((e=>e.some((e=>\"uvRegion\"===e.name)))),featureIndex:_.featureIndex},T=l.process(o,!!r.obb,d,p.byteLength,_,L,E,u,b,m,r.normalReferenceFrame);if(l._free(E),l._free(d),T.error.length>0)throw`i3s.wasm: ${T.error}`;if(T.discarded)return null;const I=T.componentOffsets.length>0?e(T.componentOffsets):null,P=T.featureIds.length>0?e(T.featureIds):null,U=e(T.interleavedVertedData).buffer,B=1===T.indicesType?e(new Uint16Array(T.indices.buffer,T.indices.byteOffset,T.indices.byteLength/2)):e(new Uint32Array(T.indices.buffer,T.indices.byteOffset,T.indices.byteLength/4)),F=e(T.positions),x=1===T.positionIndicesType?e(new Uint16Array(T.positionIndices.buffer,T.positionIndices.byteOffset,T.positionIndices.byteLength/2)):e(new Uint32Array(T.positionIndices.buffer,T.positionIndices.byteOffset,T.positionIndices.byteLength/4)),O={layout:r.layouts[0],interleavedVertexData:U,indices:B,hasColors:T.hasColors,hasModifications:T.hasModifications,positionData:{data:F,indices:x}};return P&&n.push(P.buffer),I&&n.push(I.buffer),n.push(U),n.push(B.buffer),n.push(F.buffer),n.push(x.buffer),{componentOffsets:I,featureIds:P,transformedGeometry:O,obb:T.obb}}function m(e){return 0===e?0:1===e?1:2===e?2:3}function d(e){const{context:t,buffer:r}=e,n=l._malloc(r.byteLength),o=r.byteLength/Float64Array.BYTES_PER_ELEMENT,s=new Float64Array(l.HEAPU8.buffer,n,o),f=new Float64Array(r);s.set(f),l.filterOBBs(t,n,o),f.set(s),l._free(n)}function E(e){l&&l.destroy(e)}function h(e,t){for(let r=0;r<t.length;++r)e[r]=t[r]}function p(){return l?r():(c||(c=n().then((e=>{l=e,c=null}))),c)}const g={transform:b,destroy:E};export{u as destroyContext,s as dracoDecompressPointCloudData,f as filterObbsForModifications,d as filterObbsForModificationsSync,p as initialize,m as interpretObbModificationResults,o as process,a as setLegacySchema,i as setModifications,y as setModificationsSync,g as test};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{create as t,reject as e}from\"../../core/promiseUtils.js\";import{getAssetUrl as i}from\"../../assets.js\";function n(){return o||(o=t((t=>import(\"../../chunks/i3s.js\").then((function(t){return t.i})).then((({default:e})=>{const i=e({locateFile:r,onRuntimeInitialized:()=>t(i)});delete i.then})))).catch((t=>e(t)))),o}function r(t){return i(`esri/libs/i3s/${t}`)}let o;export{n as getWorkerModule};\n"]}