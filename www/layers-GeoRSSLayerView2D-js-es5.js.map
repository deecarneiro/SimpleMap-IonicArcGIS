{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/2d/layers/GeoRSSLayerView2D.js"],"names":["g","arguments","_graphicsViewMap","_popupTemplates","Map","graphicsViews","e","r","suspended","length","i","reverse","map","s","hitTest","then","filter","popupTemplate","get","layer","sourceLayer","processUpdate","featureCollections","forEach","fromJSON","featureSet","ofType","features","o","geometryType","graphics","addMany","layerDefinition","drawingInfo","p","popupInfo","a","renderer","requestUpdateCallback","requestUpdate","view","set","polygonSymbol","lineSymbol","pointSymbol","symbol","push","container","addChild","handles","add","polygon","polyline","point","removeAllChildren","destroy","viewChange","u"],"mappings":"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","file":"layers-GeoRSSLayerView2D-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{resolve as s,all as o}from\"../../../core/promiseUtils.js\";import i from\"../../../core/Collection.js\";import t from\"../../../PopupTemplate.js\";import p from\"../../../Graphic.js\";import{init as a}from\"../../../core/watchUtils.js\";import l from\"../../../renderers/SimpleRenderer.js\";import{fromJSON as h}from\"../../../renderers/support/jsonUtils.js\";import n from\"../../../tasks/support/FeatureSet.js\";import m from\"../../layers/LayerView.js\";import c from\"./graphics/GraphicsView2D.js\";import{LayerView2DMixin as y}from\"./LayerView2D.js\";let g=class extends(y(m)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(e,r){if(this.suspended||!this.graphicsViews.length)return s();const i=this.graphicsViews.reverse().map((s=>s.hitTest(e,r)));return o(i).then((e=>e.filter(((e,r)=>(e&&(e.popupTemplate=this._popupTemplates.get(this.graphicsViews[r]),e.layer=this.layer,e.sourceLayer=this.layer),!!e)))[0]||null))}update(e){if(this.graphicsViews)for(const r of this.graphicsViews)r.processUpdate(e)}attach(){this.layer.featureCollections.forEach((e=>{const r=n.fromJSON(e.featureSet),s=new(i.ofType(p))(r.features);let o;if(this._graphicsViewMap[r.geometryType])o=this._graphicsViewMap[r.geometryType],o.graphics.addMany(s);else{const i=e.layerDefinition.drawingInfo,p=e.popupInfo?t.fromJSON(e.popupInfo):null,a=h(i.renderer);o=new c({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:s,renderer:a}),this._graphicsViewMap[r.geometryType]=o,this._popupTemplates.set(o,p),\"polygon\"!==r.geometryType||this.layer.polygonSymbol?\"polyline\"!==r.geometryType||this.layer.lineSymbol?\"point\"!==r.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=a.symbol):this.layer.lineSymbol=a.symbol:this.layer.polygonSymbol=a.symbol,this.graphicsViews.push(o),this.container.addChild(o.container)}})),this.handles.add([a(this.layer,\"polygonSymbol\",(e=>{this._graphicsViewMap.polygon.renderer=new l({symbol:e})})),a(this.layer,\"lineSymbol\",(e=>{this._graphicsViewMap.polyline.renderer=new l({symbol:e})})),a(this.layer,\"pointSymbol\",(e=>{this._graphicsViewMap.point.renderer=new l({symbol:e})}))])}detach(){this.container.removeAllChildren();for(const e of this.graphicsViews)e.destroy(),e.view=null,e.renderer=null;this.graphicsViews.length=0}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews)e.viewChange()}};g=e([r(\"esri.views.2d.layers.GeoRSSLayerView2D\")],g);var u=g;export default u;\n"]}