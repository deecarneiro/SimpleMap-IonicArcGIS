{"version":3,"sources":["webpack:///node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js","webpack:///node_modules/@arcgis/core/core/accessorSupport/diffUtils.js","webpack:///node_modules/@arcgis/core/core/MemCache.js","webpack:///node_modules/@arcgis/core/core/LRUCache.js"],"names":["h","arguments","_handles","_popupTemplates","Map","graphicsViews","e","s","suspended","length","i","map","r","hitTest","then","filter","popupTemplate","get","layer","sourceLayer","processUpdate","featureCollections","forEach","view","graphics","source","requestUpdateCallback","requestUpdate","renderer","set","push","container","addChild","removeAllChildren","destroy","removeAll","viewChange","c","f","t","Object","keys","items","u","l","declaredClass","n","o","diff","p","Array","isArray","type","oldValue","newValue","a","indexOf","y","m","concat","sort","d","b","split","added","removed","changed","_namespace","_storage","_removeFunc","_hit","_miss","register","registerRemoveFunc","slice","size","maxSize","clear","deregisterRemoveFunc","deregister","put","pop","updateSize","clearAll","getStats","resetStats","_maxSize","_db","_size","_removeFuncs","_users","removeUnordered","Math","max","_checkSizeLimit","entry","_notifyRemoved","console","warn","lifetime","lives","Size","round","_getHitRate","Entries","toString","forAll","namespace","startsWith","isNaN","hitRate","resetHitRate"],"mappings":"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","file":"layers-RouteLayerView2D-js-es5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{resolve as r,all as t}from\"../../../core/promiseUtils.js\";import i from\"../../../core/Handles.js\";import o from\"../../layers/LayerView.js\";import p from\"./graphics/GraphicsView2D.js\";import{LayerView2DMixin as a}from\"./LayerView2D.js\";let h=class extends(a(o)){constructor(){super(...arguments),this._handles=new i,this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(e,s){if(this.suspended||!this.graphicsViews.length)return r();const i=this.graphicsViews.map((r=>r.hitTest(e,s)));return t(i).then((e=>e.filter(((e,s)=>(e&&(e.popupTemplate=this._popupTemplates.get(this.graphicsViews[s]),e.layer=this.layer,e.sourceLayer=this.layer),!!e)))[0]||null))}update(e){if(this.graphicsViews)for(const s of this.graphicsViews)s.processUpdate(e)}attach(){this.layer.featureCollections.forEach((e=>{const s=new p({view:this.view,graphics:e.source,requestUpdateCallback:()=>this.requestUpdate()});s.renderer=e.renderer,this._popupTemplates.set(s,e.popupTemplate),this.graphicsViews.push(s),this.container.addChild(s.container)}))}detach(){this.container.removeAllChildren();for(const e of this.graphicsViews)e.destroy(),e.view=null,e.renderer=null;this.graphicsViews.length=0,this._handles.removeAll(),this._popupTemplates=null}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews)e.viewChange()}};h=e([s(\"esri.views.2d.layers.RouteLayerView2D\")],h);var c=h;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as e}from\"../maybe.js\";import{getProperties as n}from\"./utils.js\";import o from\"../Accessor.js\";import r from\"../Collection.js\";const f=[\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"];function i(t){return t instanceof o}function c(t){return t instanceof r?Object.keys(t.items):i(t)?n(t).keys():t?Object.keys(t):[]}function u(t,e){return t instanceof r?t.items[e]:t[e]}function l(t){return t?t.declaredClass:null}function s(t,n){const o=t.diff;if(o&&\"function\"==typeof o)return o(t,n);const r=c(t),p=c(n);if(0===r.length&&0===p.length)return;if(!r.length||!p.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,n))return{type:\"complete\",oldValue:t,newValue:n};const a=p.filter((t=>-1===r.indexOf(t))),y=r.filter((t=>-1===p.indexOf(t))),m=r.filter((e=>p.indexOf(e)>-1&&u(t,e)!==u(n,e))).concat(a,y).sort(),d=l(t);if(d&&f.indexOf(d)>-1&&m.length)return{type:\"complete\",oldValue:t,newValue:n};let b;const h=i(t)&&i(n);for(const r of m){const f=u(t,r),i=u(n,r);let c;(h||\"function\"!=typeof f&&\"function\"!=typeof i)&&(f!==i&&(null==f&&null==i||(c=o&&o[r]&&\"function\"==typeof o[r]?o[r](f,i):\"object\"==typeof f&&\"object\"==typeof i&&l(f)===l(i)?s(f,i):{type:\"complete\",oldValue:f,newValue:i},e(c)&&(e(b)?b.diff[r]=c:b={type:\"partial\",diff:{[r]:c}}))))}return b}function p(e,n){if(t(e))return!1;const o=n.split(\".\");let r=e;for(const t of o){if(\"complete\"===r.type)return!0;if(\"partial\"!==r.type)return!1;{const e=r.diff[t];if(!e)return!1;r=e}}return!0}function a(t,e){for(const n of e)if(p(t,n))return!0;return!1}function y(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(t||e))return!t||!e||\"object\"==typeof t&&\"object\"==typeof e&&l(t)!==l(e)?{type:\"complete\",oldValue:t,newValue:e}:s(t,e)}function m(e){if(t(e))return!0;switch(e.type){case\"complete\":return!1;case\"collection\":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case\"partial\":for(const t in e.diff){if(!m(e.diff[t]))return!1}return!0}}export{y as diff,p as hasDiff,a as hasDiffAny,m as isEmpty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"./PooledArray.js\";const e=-3;class s{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=\":\",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class i{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new t}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,s,i){const h=this._db.get(t);if(h&&(this._size-=h.size,this._db.delete(t),h.entry!==e&&this._notifyRemoved(t,h.entry)),s>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn(\"Refusing to cache undefined entry \");if(!s||s<0)return void console.warn(\"Refusing to cache entry with invalid size \"+s);const r=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:s,lifetime:r,lives:r}),this._size+=s,this._checkSizeLimit()}updateSize(t,e,s){const i=this._db.get(t);i&&i.entry===e&&(this._size-=i.size,s>this._maxSize?this._notifyRemoved(t,e):(i.size=s,this._size+=s,this._checkSizeLimit()))}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+\"/\"+Math.round(this._maxSize/1048576)+\"MB\",\"Hit rate\":Math.round(100*this._getHitRate())+\"%\",Entries:this._db.size.toString()},e={},s=new Array;this._db.forEach(((t,i)=>{const h=t.lifetime;s[h]=(s[h]||0)+t.size,this._users.forAll((s=>{const h=s.namespace;if(i.startsWith(h)){const s=e[h]||0;e[h]=s+t.size}}))}));const i={};this._users.forAll((t=>{const s=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const h=e[s]||0;e[s]=h,i[s]=Math.round(100*t.hitRate)+\"%\"}else i[s]=\"0%\"}));const h=Object.keys(e);h.forEach((t=>e[t]=e[t]/this._size*100)),h.sort(((t,s)=>e[s]-e[t])),h.forEach((s=>t[s]=Math.round(e[s])+\"% / \"+i[s]));for(let e=s.length-1;e>=0;--e){const i=s[e];i&&(t[\"Priority \"+(e+-3-1)]=Math.round(i/this.size*100)+\"%\")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,s)=>{s.startsWith(t)&&(this._size-=e.size,this._db.delete(s),this._notifyRemoved(s,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach((s=>{t.startsWith(s[0])&&s[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}export{e as MIN_PRIORITY,s as MemCache,i as MemCacheStorage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{MemCacheStorage as t}from\"./MemCache.js\";export default class{constructor(e,r){this._storage=new t,this._storage.maxSize=e,r&&this._storage.registerRemoveFunc(\"\",r)}put(t,e,r){this._storage.put(t,e,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}\n"]}